<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AlgMCDigitList class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>AlgMCDigitList  Class Reference</h1><code>#include &lt;<a class="el" href="AlgMCDigitList_8h-source.html">AlgMCDigitList.h</a>&gt;</code>
<p>
Inheritance diagram for AlgMCDigitList:<p><center><img src="classAlgMCDigitList__inherit__graph.png" border="0" usemap="#AlgMCDigitList__inherit__map" alt="Inheritance graph"></center>
<map name="AlgMCDigitList__inherit__map">
<area href="classAlgBase.html" shape="rect" coords="33,15,94,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for AlgMCDigitList:<p><center><img src="classAlgMCDigitList__coll__graph.png" border="0" usemap="#AlgMCDigitList__coll__map" alt="Collaboration graph"></center>
<map name="AlgMCDigitList__coll__map">
<area href="classAlgBase.html" shape="rect" coords="33,15,94,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classAlgMCDigitList-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classAlgMCDigitList.html#a0">AlgMCDigitList</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="classAlgMCDigitList.html#a1">~AlgMCDigitList</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classAlgMCDigitList.html#a2">RunAlg</a> (<a class="el" href="classAlgConfig.html">AlgConfig</a> &amp;ac, <a class="el" href="classCandHandle.html">CandHandle</a> &amp;ch, <a class="el" href="classCandContext.html">CandContext</a> &amp;cx)</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classAlgMCDigitList.html#a3">Trace</a> (const char *<a class="el" href="TCL_8cxx.html#a10">c</a>) const</td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="AlgMCDigitList::AlgMCDigitList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> AlgMCDigitList::AlgMCDigitList </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="AlgMCDigitList::~AlgMCDigitList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> AlgMCDigitList::~AlgMCDigitList </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="AlgMCDigitList_8cxx-source.html#l00046">46</a> of file <a class="el" href="AlgMCDigitList_8cxx-source.html">AlgMCDigitList.cxx</a>.
<p>
<div class="fragment"><pre>00047 {
00048 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="AlgMCDigitList::RunAlg"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AlgMCDigitList::RunAlg </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classAlgConfig.html">AlgConfig</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ac</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classCandHandle.html">CandHandle</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ch</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classCandContext.html">CandContext</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>cx</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="classAlgBase.html#b2">AlgBase</a>.
<p>
Definition at line <a class="el" href="AlgMCDigitList_8cxx-source.html#l00051">51</a> of file <a class="el" href="AlgMCDigitList_8cxx-source.html">AlgMCDigitList.cxx</a>.
<p>
References <a class="el" href="CandHandle_8cxx-source.html#l00113">CandHandle::AddDaughterLink</a>(), <a class="el" href="PlexSEIdAltLItem_8h-source.html#l00069">PlexSEIdAltLItem::AddToTime</a>(), <a class="el" href="AlgFactory_8cxx-source.html#l00068">AlgFactory::GetAlgHandle</a>(), <a class="el" href="PlexSEIdAltL_8cxx-source.html#l00391">PlexSEIdAltL::GetCurrentItem</a>(), <a class="el" href="CandContext_8h-source.html#l00031">CandContext::GetDataIn</a>(), <a class="el" href="RawDigitDataBlock_8cxx-source.html#l00151">RawDigitDataBlock::GetDatumIter</a>(), <a class="el" href="CandHandle_8cxx-source.html#l00248">CandHandle::GetDaughterIterator</a>(), <a class="el" href="AlgFactory_8cxx-source.html#l00053">AlgFactory::GetInstance</a>(), <a class="el" href="CandContext_8h-source.html#l00032">CandContext::GetMom</a>(), <a class="el" href="CandDigitHandle_8cxx-source.html#l00103">CandDigitHandle::GetPlexSEIdAltL</a>(), <a class="el" href="RawRecord_8cxx-source.html#l00080">RawRecord::GetRawBlockIter</a>(), <a class="el" href="CandDigitHandle_8cxx-source.html#l00130">CandDigitHandle::GetTime</a>(), <a class="el" href="PlexSEIdAltL_8cxx-source.html#l00552">PlexSEIdAltL::IsValid</a>(), <a class="el" href="MessageService_2Msg_8h-source.html#l00022">Msg::kDebug</a>, <a class="el" href="CandDigit_8cxx-source.html#l00142">CandDigit::MakeCandidate</a>(), <a class="el" href="MsgService_8h-source.html#l00100">MSG</a>, <a class="el" href="PlexSEIdAltL_8h-source.html#l00075">PlexSEIdAltL::Next</a>(), <a class="el" href="CandDigitListHandle_8cxx-source.html#l00068">CandDigitListHandle::SetAbsTime</a>(), <a class="el" href="CandContext_8h-source.html#l00034">CandContext::SetDataIn</a>(), <a class="el" href="PlexSEIdAltL_8h-source.html#l00077">PlexSEIdAltL::SetFirst</a>(), <a class="el" href="CandDigitHandle_8cxx-source.html#l00177">CandDigitHandle::SetRawDigitIndex</a>(), and <a class="el" href="CandDigitHandle_8cxx-source.html#l00183">CandDigitHandle::SetTime</a>().
<p>
<div class="fragment"><pre>00053 {
00054    <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00055                          &lt;&lt; <font class="stringliteral">"Starting AlgMCDigitList::RunAlg()"</font> &lt;&lt; endl;
00056 
00057    assert(cx.<a class="code" href="classCandContext.html#a5">GetDataIn</a>());
00058 
00059 <font class="comment">// Iterate over RawDigitDataBlock or CandDigitList daughters.</font>
00060    <font class="keywordflow">if</font> (cx.<a class="code" href="classCandContext.html#a5">GetDataIn</a>()-&gt;InheritsFrom(<font class="stringliteral">"RawRecord"</font>)) {
00061 
00062 <font class="comment">// Iterate over input RawDigit's to fill input CandDigitList.</font>
00063 
00064 <font class="comment">// Get Singleton instance of AlgFactory.</font>
00065      <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00066                &lt;&lt; <font class="stringliteral">"AlgFactory &amp;af = AlgFactory::GetInstance();"</font> &lt;&lt; endl;
00067      <a class="code" href="classAlgFactory.html">AlgFactory</a> &amp;af = <a class="code" href="classAlgFactory.html#d0">AlgFactory::GetInstance</a>();
00068 
00069 <font class="comment">// Get an AlgHandle to AlgMCDigit with "default" AlgConfig.</font>
00070      <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00071        &lt;&lt; <font class="stringliteral">"AlgHandle ah = af.GetAlgHandle(\"AlgMCDigit\", \"default\");"</font>
00072                                                                 &lt;&lt; endl;
00073      <a class="code" href="classAlgHandle.html">AlgHandle</a> ah = af.<a class="code" href="classAlgFactory.html#a0">GetAlgHandle</a>(<font class="stringliteral">"AlgMCDigit"</font>, <font class="stringliteral">"default"</font>);
00074 
00075      <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00076                                &lt;&lt; <font class="stringliteral">"Create CandContext instance."</font> &lt;&lt; endl
00077                                     &lt;&lt; <font class="stringliteral">"CandContext cxx(this);"</font> &lt;&lt; endl;
00078      <a class="code" href="classCandContext.html">CandContext</a> cxx(<font class="keyword">this</font>, cx.<a class="code" href="classCandContext.html#a6">GetMom</a>());
00079 
00080 <font class="comment">// Set up to find snarl time offset</font>
00081      Double_t dtoff = 1.e+30;                   <font class="comment">// Large positive number</font>
00082 
00083 <font class="comment">// Iterate over RawRecord's RawDataBlockList to find RawDigitDataBlock.</font>
00084      <a class="code" href="classRawRecord.html">RawRecord</a> *rr = (<a class="code" href="classRawRecord.html">RawRecord</a> *) (cx.<a class="code" href="classCandContext.html#a5">GetDataIn</a>());
00085      TIter rdbit = rr-&gt;<a class="code" href="classRawRecord.html#a6">GetRawBlockIter</a>();
00086      TObject *tob;
00087      <font class="keywordflow">while</font> ((tob = rdbit())) {
00088        <font class="keywordflow">if</font> (tob-&gt;InheritsFrom(<font class="stringliteral">"RawDigitDataBlock"</font>)) {
00089          <a class="code" href="classRawDigitDataBlock.html">RawDigitDataBlock</a> *rdb = (<a class="code" href="classRawDigitDataBlock.html">RawDigitDataBlock</a> *) tob;
00090          TIter rdit = rdb-&gt;<a class="code" href="classRawDigitDataBlock.html#a9">GetDatumIter</a>();
00091          <a class="code" href="classRawDigit.html">RawDigit</a> *rd;
00092          Int_t rawdigitindex = -1;
00093          <font class="keywordflow">while</font> ((rd = (<a class="code" href="classRawDigit.html">RawDigit</a> *) rdit())) { 
00094            ++rawdigitindex;
00095 
00096            <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00097              &lt;&lt; <font class="stringliteral">"Set RawDigit object as CandContext input data."</font> &lt;&lt; endl
00098                                         &lt;&lt; <font class="stringliteral">"cxx.SetDataIn(rd);"</font> &lt;&lt; endl;
00099            cxx.<a class="code" href="classCandContext.html#a8">SetDataIn</a>(rd);
00100 
00101            <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00102                   &lt;&lt; <font class="stringliteral">"Get handle to CandDigit."</font> &lt;&lt; endl
00103                   &lt;&lt; <font class="stringliteral">"cdh = CandDigit::MakeCandidate(ah, cxx);"</font> &lt;&lt; endl;
00104 
00105            <a class="code" href="classCandDigitHandle.html">CandDigitHandle</a> cdh = <a class="code" href="classCandDigit.html#d0">CandDigit::MakeCandidate</a>(ah, cxx);
00106            cdh.<a class="code" href="classCandDigitHandle.html#a15">SetRawDigitIndex</a>(rawdigitindex);
00107 
00108 <font class="comment">// Find lowest value for absolute snarl time offset</font>
00109            Double_t dtemp = cdh.<a class="code" href="classCandDigitHandle.html#a11">GetTime</a>();
00110            <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00111                       &lt;&lt; <font class="stringliteral">"Raw CandDigit::GetTime() = "</font> &lt;&lt; dtemp &lt;&lt; endl;
00112            <font class="keywordflow">if</font> (dtemp &lt; dtoff) {
00113              dtoff = dtemp;
00114              <a class="code" href="MsgService_8h.html#a1">MSG</a>(<font class="stringliteral">"AlgMCDigitList"</font>, <a class="code" href="classMsg.html#p2">Msg::kDebug</a>)
00115                 &lt;&lt; <font class="stringliteral">"Reset CandDigitList::fAbsTime to "</font> &lt;&lt; dtoff &lt;&lt; endl;
00116            }
00117 
00118            ch.<a class="code" href="classCandHandle.html#a7">AddDaughterLink</a>(cdh, kFALSE);      <font class="comment">// Don't check for dups</font>
00119          }
00120        }
00121      }
00122 
00123 <font class="comment">// Set absolute time offset in CandDigitList and subtract it from</font>
00124 <font class="comment">// relative time in each CandDigit of daughter list.</font>
00125      <a class="code" href="classCandDigitListHandle.html">CandDigitListHandle</a> &amp;cdlh =
00126                                 dynamic_cast&lt;CandDigitListHandle &amp;&gt;(ch);
00127      cdlh.<a class="code" href="classCandDigitListHandle.html#a6">SetAbsTime</a>(dtoff);
00128      TIter diter = ch.<a class="code" href="classCandHandle.html#a15">GetDaughterIterator</a>();
00129      <a class="code" href="classCandDigitHandle.html">CandDigitHandle</a> *idau;
00130      <font class="keywordflow">while</font> ((idau = (<a class="code" href="classCandDigitHandle.html">CandDigitHandle</a> *) diter())) {
00131        idau-&gt;<a class="code" href="classCandDigitHandle.html#a16">SetTime</a>(idau-&gt;<a class="code" href="classCandDigitHandle.html#a11">GetTime</a>() - dtoff);
00132 
00133 <font class="comment">// Loop over PlexSEIdAltL entries, subtracting time offset</font>
00134        <a class="code" href="classPlexSEIdAltL.html">PlexSEIdAltL</a> &amp;seid = idau-&gt;<a class="code" href="classCandDigitHandle.html#a7">GetPlexSEIdAltL</a>();
00135        seid.<a class="code" href="classPlexSEIdAltL.html#a28">SetFirst</a>();
00136        <font class="keywordflow">while</font> (seid.<a class="code" href="classPlexSEIdAltL.html#a25">IsValid</a>()) {
00137          seid.<a class="code" href="classPlexSEIdAltL.html#a12">GetCurrentItem</a>().<a class="code" href="classPlexSEIdAltLItem.html#a18">AddToTime</a>(-dtoff);
00138          seid.<a class="code" href="classPlexSEIdAltL.html#a26">Next</a>();
00139        }
00140 
00141      }
00142    }
00143    <font class="keywordflow">else</font> <font class="keywordflow">if</font> (cx.<a class="code" href="classCandContext.html#a5">GetDataIn</a>()-&gt;InheritsFrom(<font class="stringliteral">"TCollection"</font>)) {
00144      TCollection *cdl = (TCollection *) cx.<a class="code" href="classCandContext.html#a5">GetDataIn</a>();
00145      TIter cdit(cdl);
00146      <a class="code" href="classCandDigitHandle.html">CandDigitHandle</a> *cdh;
00147      <font class="keywordflow">while</font> ((cdh = (<a class="code" href="classCandDigitHandle.html">CandDigitHandle</a> *) cdit())) { 
00148        ch.<a class="code" href="classCandHandle.html#a7">AddDaughterLink</a>(*cdh, kFALSE);         <font class="comment">// Don't check for dups</font>
00149      }
00150    }
00151 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="AlgMCDigitList::Trace"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void AlgMCDigitList::Trace </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>c</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented from <a class="el" href="classAlgBase.html#a0">AlgBase</a>.
<p>
Definition at line <a class="el" href="AlgMCDigitList_8cxx-source.html#l00154">154</a> of file <a class="el" href="AlgMCDigitList_8cxx-source.html">AlgMCDigitList.cxx</a>.
<p>
References <a class="el" href="TCL_8cxx-source.html#l00040">c</a>.
<p>
<div class="fragment"><pre>00155 {
00156 }
</pre></div>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="AlgMCDigitList_8h-source.html">AlgMCDigitList.h</a><li><a class="el" href="AlgMCDigitList_8cxx-source.html">AlgMCDigitList.cxx</a></ul>
<hr><address align="right"><small>Generated on Wed Sep 4 19:21:26 2002 for loon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.16 </small></address>
</body>
</html>
