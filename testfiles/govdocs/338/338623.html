<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'>
<html>
<head>
<title>l2mapgen apply_pal parameter</title>
<meta name='description' content='Ocean Biology Processing Group Ocean Color Science Community Forum'
<meta name='orgcode' content='Code 614.2'
<meta name='rno' content='Gene.C.Feldman.1'
<meta name='content-owner' content='Gene.C.Feldman.1'
<meta name='webmaster' content='Norman.A.Kuring.1'
<meta http-equiv='content-type' content='text/html; charset=iso-8859-1'>
<meta http-equiv='content-style-type' content='text/css'>
<meta http-equiv='content-script-type' content='text/javascript'>
<link rel='stylesheet' href='/oceanforum/oceanforum.css' type='text/css'>
<style type='text/css'>
  body, input, textarea, select, table { font-family: 'Verdana', sans-serif;  }
</style>
<script type='text/javascript'>
	function mwfSetFocus() {
		var texta = document.getElementsByTagName('textarea')[0];
		var inputs = document.getElementsByTagName('input');
		for (var i = 0; i < inputs.length; i++) {
			var inp = inputs[i];
			if (inp.type != 'hidden' && inp.type != 'submit' && inp.type != 'checkbox') {
				var input = inp;
				break;
			}
		}
		if (input) input.focus();
		else if (texta) texta.focus();
	}
	
	function mwfSetFocusOnload() {
		var mwfOldOnload = window.onload;
		if (typeof(window.onload) != 'function') window.onload = mwfSetFocus;
		else {
			window.onload = function() {
				if (mwfOldOnload) mwfOldOnload();
				mwfSetFocus();
			}
		}
	}
	mwfSetFocusOnload();
</script>
</head>
<body class='topic_show'>

<div class='tim'><a href='forum_show.pl'><img src='/oceanforum/oceancolor_forum.png' alt=''/></a></div>

<div class='frm tpb'>
<div class='hcl'>
<span class='htt'>Ocean Color Forum</span> - Not logged in
</div>
<div class='bcl'>
<a class='btl' href='forum_show.pl' title='Forum start page'>Forum</a>
<a class='btl' href='http://oceancolor.gsfc.nasa.gov/' title=''>Ocean Color Home</a>
<a class='btl' href='forum_help.pl' title='Help and FAQ'>Help</a>
<a class='btl' href='forum_search.pl' title='Search posts for keywords'>Search</a>
<a class='btl' href='user_login.pl?ori=topic_show.pl%3fpid%3d9612' title='Login with username and password'>Login</a>
</div>
</div>

<script type='text/javascript'>
	function mwfToggleBranch(postId) {
		var branch = document.getElementById('brn' + postId);
		var toggle = document.getElementById('tgl' + postId);
		if (!branch || !toggle) return;
		if (branch.style.display != 'none') {
			branch.style.display = 'none';
			toggle.src = '/oceanforum/nav_plus.png';
			toggle.title = 'Expand branch';
			toggle.alt = '+';
		}
		else {
			branch.style.display = '';
			toggle.src = '/oceanforum/nav_minus.png';
			toggle.title = 'Collapse branch';
			toggle.alt = '-';
		}
	}

	function mwfExpandAllBranches() {
		var divs = document.getElementsByTagName('div');
		for (var i=0; i < divs.length; i++) {
			if (divs[i].id.indexOf('brn') == 0) divs[i].style.display = '';
		}
		var imgs = document.getElementsByTagName('img');
		for (var i=0; i < imgs.length; i++) {
			if (imgs[i].id.indexOf('tgl') == 0) {
				imgs[i].src = '/oceanforum/nav_minus.png';
				imgs[i].title = 'Collapse branch';
				imgs[i].alt = '-';
			}
		}
	}
</script>

<div class='frm'>
<div class='hcl'>
<span class='nav'>
<a href='prevnext.pl?tid=2498;dir=prev'><img class='ico' src='/oceanforum/nav_prev.png' title='Go to previous topic' alt='Previous'/></a>
<a href='prevnext.pl?tid=2498;dir=next'><img class='ico' src='/oceanforum/nav_next.png' title='Go to next topic' alt='Next'/></a>
<a href='board_show.pl?bid=8;tid=2498#tid2498'><img class='ico' src='/oceanforum/nav_up.png' title='Go up a level' alt='Up'/></a>
</span>
<span class='htt'>Topic</span> <a href='forum_show.pl?bid=8#bid8'>SeaDAS</a> / <a href='board_show.pl?bid=8;tid=2498#tid2498'>SeaDAS General Questions</a> / l2mapgen apply_pal parameter (1149 hits)
</div>
</div>

<div class='frm pst' id='pid9587' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9587#pid9587'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <a href='user_info.pl?uid=792'>Andrew L.</a>
<span class='htt'>Date</span> 2008-04-16 23:39
</div>
<div class='ccl'>
I want to echo the earlier other user&#39;s thanks for the l2mapgen facility.&#160; It will allow us to easily see what the L2 files being cranked out by our batch driven processes look like.<br/><br/>What are the possible values for the apply_pal paramater?&#160; I would like to get psuedocolor images, preferably in some relatively simple way.
</div>
</div>

<div class='frm pst' id='pid9602' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9602#pid9602'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <a href='user_info.pl?uid=792'>Andrew L.</a>
<span class='htt'>Date</span> 2008-04-17 16:09
</div>
<div class='ccl'>
Humm, looks like I broke my new toy...&#160; I have a particular L2 file which consistantly causes l2mapgen to seg fault:<br/><br/>[a@otter l2mapgen-crash]$ l2mapgen ifile=S2008096002004.L2_GAC ofile=S2008096002004.L2_GAC.ppm prod=chlor_a<br/>Single HDF input<br/>Segmentation fault<br/><br/>Other files work fine when processed with similar command line options<br/><br/>[a@otter l2mapgen-crash]$ l2mapgen ifile=S2008096033726.L2_GAC ofile=S2008096033726.L2_GAC.ppm prod=chlor_a<br/>Single HDF input<br/>Mapping data to:<br/> N: 86.18645<br/> S: -77.60188<br/> W: 80.93169<br/> E: -137.35741<br/>Scale Type&#160; &#160; &#160; : LOG<br/>Data Min (abs)&#160; :&#160;&#160; 0.0100<br/>Data Max (abs)&#160; :&#160; 64.5654<br/>Scale Slope&#160; &#160;&#160; :&#160;&#160; 0.0152<br/>Scale Intercept :&#160; -2.0000<br/>Opening HDF file, S2008096033726.L2_GAC ...<br/>pix: 248 scan: 3930<br/>Mapping swath pixels to Plate Carree projection...<br/>.............................................................................<br/>Finished Plate Carree projection mapping<br/>Computing means...<br/>Number of output pixels (15745 of a possible 740000) &lt; threshold (5.00%). Output image not generated.<br/>[alaroy@otter l2mapgen-crash]$<br/><br/>If it helps the SeaDAS team debug this I can post the offending L2 file to an anonymous ftp site.
</div>
</div>

<div class='frm pst' id='pid9604' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9604#pid9604'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <span title='Moderator'>@</span><a href='user_info.pl?uid=30'>mike</a>
<span class='htt'>Date</span> 2008-04-17 20:27
</div>
<div class='ccl'>
Andrew we just fixed a boundary coordinates bug in the l2mapgen code that I&#39;m guessing you may want regardless of whether it fixes your segfault problem. If so, what operating system(s) do you use for SeaDAS? Can you also put the offending L2 file on an ftp site so I can ensure there isn&#39;t a separate problem?<br/><br/>And regarding your palette question, our apply_pal expert may be able to look into this tomorrow.
</div>
</div>

<div class='frm pst' id='pid9606' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9606#pid9606'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <span title='Moderator'>@</span><a href='user_info.pl?uid=30'>mike</a>
<span class='htt'>Date</span> 2008-04-17 21:22
</div>
<div class='ccl'>
I grabbed S2008096002004.L2_GAC directly from our site and your l2mapgen command works for me on both Fedora Core 6 and Mac OS X with the original SeaDAS 5.2 l2mapgen binary. Could you please download the file again to make sure it isn&#39;t corrupt. If it&#39;s not, can you tell me your operating system and also your kernel version (uname -r)?
</div>
</div>

<div class='frm pst' id='pid9607' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9607#pid9607'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <a href='user_info.pl?uid=792'>Andrew L.</a>
<span class='htt'>Date</span> 2008-04-17 21:35
</div>
<div class='ccl'>
Mike,<br/><br/>I&#39;ll contact you via e-mail.
</div>
</div>

<div class='frm pst tgt' id='pid9612' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9612#pid9612'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <a href='user_info.pl?uid=792'>Andrew L.</a>
<span class='htt'>Date</span> 2008-04-18 17:35
</div>
<div class='ccl'>
I&#39;ll post this just in case others experience the seg fault problem.&#160; The problem was a currupt L2 input file.&#160; I regenerated the L2 file from the L1A and the problem went away.
</div>
</div>

<div class='frm pst' id='pid9613' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9613#pid9613'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <a href='user_info.pl?uid=792'>Andrew L.</a>
<span class='htt'>Date</span> 2008-04-18 17:37
</div>
<div class='ccl'>
Back to the apply_pal question, I guessed at apply_pal=1 and got some very &quot;garish&quot; looking psuedo color images.&#160; Is there a standard list of possible palettes somewhere?
</div>
</div>

<div class='frm pst' id='pid9616' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9616#pid9616'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <span title='Moderator'>@</span><a href='user_info.pl?uid=2'>sean</a>
<span class='htt'>Date</span> 2008-04-18 19:53
</div>
<div class='ccl'>
Andrew,<br/><br/>Yes, the arguments available to apply_pal binary (0 or 1).<br/>A good option to use with apply_pal is mask (also binary).<br/><br/>Here&#39;s your scene with and without&#160; the mask option using the following commands:<br/>l2mapgen ifile=S2008096002004.L2_GAC ofile=S2008096002004.L2_GAC.chl.mskd prod=chlor_a apply_pal=1 threshold=0.1 mask=1 width=400<br/>l2mapgen ifile=S2008096002004.L2_GAC ofile=S2008096002004.L2_GAC.chl&#160; prod=chlor_a apply_pal=1 threshold=0.1 width=400<br/><br/>You can also change the color palette used:<br/>l2mapgen ifile=S2008096002004.L2_GAC ofile=S2008096002004.L2_GAC.chl.mskd.sstpal prod=chlor_a palfile=$SEADAS/data/common/palette/sst.pal threshold=0.1 mask=1 width=400<br/><br/>Any 256 element RGB triplet palette can be used.<br/><br/>Regards,<br/>Sean<br/><br/>
<div class='pat'>
<img class='ami' src='/oceanforum/attach/16/9616/S2008096002004.L2_GAC.chl.png' title='9.6k' alt=''/>
<img class='ami' src='/oceanforum/attach/16/9616/S2008096002004.L2_GAC.chl.mskd.png' title='10.6k' alt=''/>
<img class='ami' src='/oceanforum/attach/16/9616/S2008096002004.L2_GAC.chl.mskd.sstpal.png' title='10.6k' alt=''/>
</div>

</div>
</div>

<div class='frm pst' id='pid9627' style='margin-left: 0%'>
<div class='hcl'>
<span class='nav'>
</span>
<a href='topic_show.pl?pid=9627#pid9627'><img class='ico' src='/oceanforum/post_ou.png' title='' alt=''/></a>
<span class='htt'>By</span> <a href='user_info.pl?uid=792'>Andrew L.</a>
<span class='htt'>Date</span> 2008-04-22 17:36
</div>
<div class='ccl'>
Sean,<br/><br/>Thanks for the pointers!&#160; I was able to make psuedocolor browse images that meet our needs.&#160; The output definitly looks a lot less &quot;gaudy&quot; without the reddish-purple background.
</div>
</div>

<div class='frm'>
<div class='hcl'>
<span class='nav'>
<a href='prevnext.pl?tid=2498;dir=prev'><img class='ico' src='/oceanforum/nav_prev.png' title='Go to previous topic' alt='Previous'/></a>
<a href='prevnext.pl?tid=2498;dir=next'><img class='ico' src='/oceanforum/nav_next.png' title='Go to next topic' alt='Next'/></a>
<a href='board_show.pl?bid=8;tid=2498#tid2498'><img class='ico' src='/oceanforum/nav_up.png' title='Go up a level' alt='Up'/></a>
</span>
<span class='htt'>Topic</span> <a href='forum_show.pl?bid=8#bid8'>SeaDAS</a> / <a href='board_show.pl?bid=8;tid=2498#tid2498'>SeaDAS General Questions</a> / l2mapgen apply_pal parameter (1149 hits)
</div>
</div>

<form class='bjp' action='board_show.pl' method='get'>
<div>
<select name='bid' size='1' onchange="var id = this.options[this.selectedIndex].value; if (id.indexOf('cid') == 0) { window.location = 'forum_show.pl?#' + id } else if (id == 0) { window.location = 'forum_show.pl?' } else { window.location = 'board_show.pl?bid=' + id + ';' }">
<option value='0'>Forum</option>
<option value='cid7'>Announcements</option>
<option value='1' >- Ocean Color Announcements</option>
<option value='7' >- SeaDAS Announcements</option>
<option value='cid8'>Frequently Asked Questions</option>
<option value='22' >- General Forum Information</option>
<option value='12' >- SeaDAS FAQ</option>
<option value='13' >- Data Products &amp; Algorithms FAQ</option>
<option value='21' >- Data Access FAQ</option>
<option value='cid2'>Products and Algorithms</option>
<option value='3' >- Satellite Data Products &amp; Algorithms</option>
<option value='4' >- Satellite Data Access</option>
<option value='6' >- Field Data</option>
<option value='cid3'>SeaDAS</option>
<option value='8' selected='selected'>- SeaDAS General Questions</option>
<option value='15' >- MODIS Direct Broadcast Support</option>
<option value='18' >- Non-SeaDAS Packages (e.g. MATLAB, ENVI, GIS, etc)</option>
<option value='cid9'>Ocean Color Features Discussion</option>
<option value='24' >- Inherent Optical Properties Workshop</option>
</select>
<input type='submit' value='Go'/>
</div>
</form>
<br>
<br>
<br>
<table style="align: center" cellspacing="16">
  <tr>
    <td style="align: left; vertical-align: middle; width: 350px; font-family: sans-serif;
    font-size: 10pt">
            Responsible NASA Official:  Gene C. Feldman
        <br>Webmaster:  <a href="mailto: ocfadmin@oceancolor.gsfc.nasa.gov">Norman A. Kuring</a>
        <br>Authorized by:  <a href="http://oceancolor.gsfc.nasa.gov/staff/gene/">Gene C. Feldman</a>
<br>Updated: 27 November 2007
    </td>
    <td style="text-align: center; vertical-align: middle; width: 300px"><a href="http://www.nasa.gov/about/highlights/HP_Privacy.html"
    target="_parent">Privacy Policy and Important Notices</a>
    </td>
    <td style="text-align: center; vertical-align: middle; width: 200px"> <a href="http://www.nasa.gov" target="_blank">
        <img src="/oceanforum/logo_nasa_sm.png" border="0" alt="NASA logo" width="77" height="69"></a>
    </td>
  </tr>
</table>
</body>
</html>

