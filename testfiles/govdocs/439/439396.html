<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>loon: MadTVAnalysis class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>MadTVAnalysis Class Reference</h1><code>#include &lt;<a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>&gt;</code>
<p>
<p>Inheritance diagram for MadTVAnalysis:
<p><center><img src="classMadTVAnalysis.png" usemap="#MadTVAnalysis_map" border="0" alt=""></center>
<map name="MadTVAnalysis_map">
<area href="classMadAnalysis.html" alt="MadAnalysis" shape="rect" coords="0,112,101,136">
<area href="classMadQuantities.html" alt="MadQuantities" shape="rect" coords="0,56,101,80">
<area href="classMadBase.html" alt="MadBase" shape="rect" coords="0,0,101,24">
</map>
<a href="classMadTVAnalysis-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a0">CreatePAN</a> (std::string s, const char *bmonpath="")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a1">MadTVAnalysis</a> (TChain *chainSR=0, TChain *chainMC=0, TChain *chainTH=0, TChain *chainEM=0)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a2">MadTVAnalysis</a> (<a class="el" href="classJobC.html">JobC</a> *, string, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a3">~MadTVAnalysis</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a4">ClosestPointToLine</a> (const Float_t &amp;x1, const Float_t &amp;y1, const Float_t &amp;x2, const Float_t &amp;y2, const Float_t &amp;xpt, const Float_t &amp;ypt, Float_t &amp;x, Float_t &amp;y)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a5">ForceMCBeam</a> (const <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a> &amp;beam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a> &amp;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a6">GetForcedMCBeam</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a7">SetDataUseMCBeam</a> (bool x)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a8">FillMCHists</a> (TFile *fout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a9">SetRustemNearPID</a> (string fname)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a10">SetRustemFarPID</a> (string fname)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#a11">SetRustemConfig</a> (string fname)</td></tr>

<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>Bool_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#e0">PittInFidVol</a> (Float_t x, Float_t y, Float_t z, Float_t u, Float_t v)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#e1">PittTrkContained</a> (Float_t x, Float_t y, Float_t z, Float_t u, Float_t v)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#e2">InPartialRegion</a> (UShort_t plane, UShort_t strip)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#e3">NDRadialFidVol</a> (Float_t x, Float_t y, Float_t z)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#e4">FarTrkContained</a> (Float_t x, Float_t y, Float_t z)</td></tr>

<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classMadNsID.html">MadNsID</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#o0">nsid</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classMadDpID.html">MadDpID</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#o1">dpid</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classMadQEID.html">MadQEID</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#o2">qeid</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classMadAbID.html">MadAbID</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#o3">abid</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#o4">openedabpidfile</a></td></tr>

<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b0">SigInOut</a> (Float_t &amp;sigfull, Float_t &amp;sigpart, Float_t &amp;trkfull, Float_t &amp;trkpart)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b1">SigInOut</a> (Int_t trkidx, Float_t &amp;sigfull, Float_t &amp;sigpart, Float_t &amp;trkfull, Float_t &amp;trkpart)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b2">RecoMuDCosNeuND</a> (Int_t itr=0, Float_t *vtx=0)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b3">RecoMuDCosNeuFD</a> (Int_t itr=0, Float_t *vtx=0)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b4">InFidVol</a> (Int_t evidx)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b5">InFidVol</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b6">InFidVol</a> (float vx, float vy, float vx)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b7">SetBECFile</a> (const char *f)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classRegistry.html">Registry</a> &amp;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b8">GetBECRegistry</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b9">NPlanesInObj</a> (TObject *rec, TObject *obj, float phcut, float &amp;sumph)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b10">NStripsInObj</a> (TObject *rec, TObject *obj, float phcut, float &amp;sumph)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b11">GetEvtTimeChar</a> (double &amp;timemin, double &amp;timemax, double &amp;timeln)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b12">GetEvtTimeCharPHC</a> (double &amp;timemin, double &amp;timemax, double &amp;timeln)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b13">FindBatchNumber</a> (double mintimediff)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>float&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b14">MuonShowerEnergy</a> (const <a class="el" href="classNtpSREvent.html">NtpSREvent</a> *evt, const <a class="el" href="classNtpSRTrack.html">NtpSRTrack</a> *trk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b15">EarlyActivity</a> (int evidx, float &amp;earlywph, float &amp;earlywphpw, float &amp;earlywphsphere, float &amp;ph1000, float &amp;ph500, float &amp;ph100, float &amp;lateph1000, float &amp;lateph500, float &amp;lateph100, float &amp;lateph50)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b16">DupRecoStrips</a> (int evidx, int &amp;nduprs, float &amp;dupphrs)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>float&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b17">ComputeLowPHRatio</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b18">FDRCBoundary</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#b19">GetNDCoilCurrent</a> (const <a class="el" href="classVldContext.html">VldContext</a> &amp;vc)</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classRegistry.html">Registry</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r0">fBECConfig</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r1">fMCBeam</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r2">fDataUseMCBeam</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classAnp_1_1Interface.html">Anp::Interface</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r3">phnti</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r4">rustempidfile_near</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r5">rustempidfile_far</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#r6">rustemconfigfile</a></td></tr>

<tr><td colspan=2><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v0">kVetoEndZ</a> = 1.2154</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v1">kTargEndZ</a> = 3.5914</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v2">kCalorEndZ</a> = 7.1554</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v3">kHalfCalorEndZ</a> = <a class="el" href="classMadTVAnalysis.html#v1">kTargEndZ</a>+(<a class="el" href="classMadTVAnalysis.html#v2">kCalorEndZ</a>-<a class="el" href="classMadTVAnalysis.html#v1">kTargEndZ</a>)*0.5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v4">kSpecEndZ</a> = 16.656</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v5">kXcenter</a> = 1.4828</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Float_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v6">kYcenter</a> = 0.2384</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Double_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v7">fEarlyActivityWindowSize</a> = 10.</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Double_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v8">fPMTTimeConstant</a> = 700.</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Int_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v9">fNPlaneEarlyAct</a> = 30</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>const Double_t&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classMadTVAnalysis.html#v10">fEarlyPlaneSphere</a> = 0.5</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a1" doxytag="MadTVAnalysis::MadTVAnalysis" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MadTVAnalysis::MadTVAnalysis </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TChain *&nbsp;</td>
          <td class="mdname" nowrap> <em>chainSR</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>TChain *&nbsp;</td>
          <td class="mdname" nowrap> <em>chainMC</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>TChain *&nbsp;</td>
          <td class="mdname" nowrap> <em>chainTH</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>TChain *&nbsp;</td>
          <td class="mdname" nowrap> <em>chainEM</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00060">60</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadBase_8cxx-source.html#l00201">MadBase::Clear()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00167">fBECConfig</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00169">fDataUseMCBeam</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00168">fMCBeam</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00081">openedabpidfile</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00171">phnti</a>, and <a class="el" href="classRegistry.html#a37">Registry::Set()</a>.
<p>
<div class="fragment"><pre>00062   : <a class="code" href="classMadAnalysis.html#a0">MadAnalysis</a>(chainSR, chainMC, chainTH, chainEM)
00063 {
00064   <a class="code" href="classMadTVAnalysis.html#o4">openedabpidfile</a>=<span class="keyword">false</span>;
00065   <a class="code" href="classMadTVAnalysis.html#r1">fMCBeam</a>=BeamType::kUnknown;
00066   <a class="code" href="classMadTVAnalysis.html#r2">fDataUseMCBeam</a>=<span class="keyword">false</span>;
00067   <span class="keywordflow">if</span>(!chainSR) {
00068     <a class="code" href="classMadBase.html#p7">record</a> = 0;
00069     <a class="code" href="classMadBase.html#p29">emrecord</a> = 0;
00070     <a class="code" href="classMadBase.html#p20">mcrecord</a> = 0;
00071     <a class="code" href="classMadBase.html#p24">threcord</a> = 0;
00072     <a class="code" href="classMadBase.html#a6">Clear</a>();
00073     <a class="code" href="classMadBase.html#p5">whichSource</a> = -1;
00074     <a class="code" href="classMadBase.html#p32">isMC</a> = <span class="keyword">true</span>;
00075     <a class="code" href="classMadBase.html#p33">isTH</a> = <span class="keyword">true</span>;
00076     <a class="code" href="classMadBase.html#p34">isEM</a> = <span class="keyword">true</span>;
00077     <a class="code" href="classMadBase.html#p36">Nentries</a> = -1;
00078     <span class="keywordflow">return</span>;
00079   }
00080   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* default_bec_file=<span class="stringliteral">"/afs/fnal.gov/files/data/minos/d04/kordosky/bec_files/pbeams_0.5_gnumi_v16.root"</span>;
00081   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:flux_file"</span>,default_bec_file);
00082   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:beam_type"</span>,BeamType::kLE);
00083   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:detector"</span>,Detector::kNear);
00084   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:low_energy_limit"</span>,0.5);
00085   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:high_energy_limit"</span>,60.0);
00086 
00087   
00088   <span class="comment">//  InitChain(chainSR,chainMC,chainTH,chainEM);</span>
00089   <a class="code" href="classMadBase.html#p5">whichSource</a> = 0;  
00090 
00091   <a class="code" href="classMadTVAnalysis.html#r3">phnti</a> = <span class="keyword">new</span> <a class="code" href="classAnp_1_1Interface.html">Anp::Interface</a>();
00092 
00093 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="MadTVAnalysis::MadTVAnalysis" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MadTVAnalysis::MadTVAnalysis </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classJobC.html">JobC</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>string&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00096">96</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadBase_8cxx-source.html#l00201">MadBase::Clear()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00167">fBECConfig</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00169">fDataUseMCBeam</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00168">fMCBeam</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00081">openedabpidfile</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00171">phnti</a>, and <a class="el" href="classRegistry.html#a37">Registry::Set()</a>.
<p>
<div class="fragment"><pre>00096                                                             : <a class="code" href="classMadAnalysis.html#a0">MadAnalysis</a>(j, path, entries)
00097 {
00098   <a class="code" href="classMadTVAnalysis.html#o4">openedabpidfile</a>=<span class="keyword">false</span>;
00099   <a class="code" href="classMadTVAnalysis.html#r1">fMCBeam</a>=BeamType::kUnknown;
00100   <a class="code" href="classMadTVAnalysis.html#r2">fDataUseMCBeam</a>=<span class="keyword">false</span>;
00101 
00102   <a class="code" href="classMadBase.html#p7">record</a> = 0;
00103   <a class="code" href="classMadBase.html#p29">emrecord</a> = 0;
00104   <a class="code" href="classMadBase.html#p20">mcrecord</a> = 0;
00105   <a class="code" href="classMadBase.html#p24">threcord</a> = 0;
00106   <a class="code" href="classMadBase.html#a6">Clear</a>();
00107   <a class="code" href="classMadBase.html#p32">isMC</a> = <span class="keyword">true</span>;
00108   <a class="code" href="classMadBase.html#p33">isTH</a> = <span class="keyword">true</span>;
00109   <a class="code" href="classMadBase.html#p34">isEM</a> = <span class="keyword">true</span>;
00110   <a class="code" href="classMadBase.html#p36">Nentries</a> = entries;
00111   <a class="code" href="classMadBase.html#p5">whichSource</a> = 1;
00112   <a class="code" href="classMadBase.html#p2">jcPath</a> = path;
00113   <a class="code" href="classMadBase.html#p1">fJC</a> = j;
00114   <a class="code" href="classMadBase.html#p0">fChain</a> = NULL;
00115 
00116   
00117   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* default_bec_file=<span class="stringliteral">"/afs/fnal.gov/files/data/minos/d04/kordosky/bec_files/pbeams_0.5_gnumi_v16.root"</span>;
00118   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:flux_file"</span>,default_bec_file);
00119   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:beam_type"</span>,BeamType::kLE);
00120   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:detector"</span>,Detector::kNear);
00121   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:low_energy_limit"</span>,0.5);
00122   <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:high_energy_limit"</span>,60.0);
00123 
00124   <a class="code" href="classMadTVAnalysis.html#r3">phnti</a> = <span class="keyword">new</span> <a class="code" href="classAnp_1_1Interface.html">Anp::Interface</a>();
00125 
00126 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="MadTVAnalysis::~MadTVAnalysis" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> MadTVAnalysis::~<a class="el" href="classMadTVAnalysis.html">MadTVAnalysis</a> </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00129">129</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00171">phnti</a>.
<p>
<div class="fragment"><pre>00130 {
00131   <span class="keywordflow">if</span>(<a class="code" href="classMadTVAnalysis.html#r3">phnti</a>){
00132     <span class="keyword">delete</span> <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>;
00133     <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>=0;
00134   }
00135 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="MadTVAnalysis::ClosestPointToLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Float_t MadTVAnalysis::ClosestPointToLine </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>x1</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>y1</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>x2</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>y2</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>xpt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ypt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02227">2227</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="nrutil__val_8h-source.html#l00374">pow()</a>.
<p>
<div class="fragment"><pre>02233                                                                  {
02234   <span class="comment">// given a line with end points (x1,y1) (x2,y2) </span>
02235   <span class="comment">// and a spatial point (xpt,ypt)</span>
02236   <span class="comment">// report the closest point on the line (x,y) to the spatial point</span>
02237   <span class="comment">// and compute the distance from (xpt,ypt) to (x,y)</span>
02238   Float_t u= (xpt-x1)*(x2-x1)+(ypt-y1)*(y2-y1);
02239   u/=sqrt( <a class="code" href="nrutil__val_8h.html#a22">pow</a>(x2-x1,2) + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(y2-y1,2));
02240   x=x1+u*(x2-x1);
02241   y=y1+u*(y2-y1);
02242   Float_t dist =sqrt(<a class="code" href="nrutil__val_8h.html#a22">pow</a>(xpt-x, 2)+<a class="code" href="nrutil__val_8h.html#a22">pow</a>(ypt-y,2));
02243   <span class="keywordflow">return</span> dist;
02244 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b17" doxytag="MadTVAnalysis::ComputeLowPHRatio" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float MadTVAnalysis::ComputeLowPHRatio </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l03134">3134</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadBase_8h-source.html#l00222">MadBase::GetEventSummary()</a>, <a class="el" href="MadBase_8cxx-source.html#l00692">MadBase::LoadStrip()</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00040">NtpSREventSummary::nstrip</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00038">NtpSRPulseHeight::pe</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, and <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>03135 {
03136   <span class="keywordtype">float</span> lowphsum=0.;
03137   <span class="keywordtype">float</span> totphsum=0.;
03138 
03139   <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classMadBase.html#a7">GetEventSummary</a>()-&gt;<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;i++){
03140     <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(i)) <span class="keywordflow">continue</span>;
03141     totphsum+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>;
03142     <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>&lt;2){
03143       lowphsum+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>;
03144     }
03145   }
03146 
03147   <span class="keywordtype">float</span> result=-1.;
03148   <span class="keywordflow">if</span>(totphsum!=0){
03149     result = lowphsum/totphsum;
03150   }
03151 
03152   <span class="keywordflow">return</span> result;
03153 
03154 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="MadTVAnalysis::CreatePAN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::CreatePAN </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::string&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>bmonpath</em> = ""</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">137</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00080">abid</a>, <a class="el" href="NtpStNC_8h-source.html#l00041">abs()</a>, <a class="el" href="Moments_8cxx-source.html#l00023">Moments::AddPoint()</a>, <a class="el" href="MadQEID_8cxx-source.html#l00344">MadQEID::AltCalcQEID()</a>, <a class="el" href="ReleaseType_8cxx-source.html#l00456">ReleaseType::AsString()</a>, <a class="el" href="TrimParams_8h-source.html#l00036">base</a>, <a class="el" href="BeamMonSpill_8cxx-source.html#l00107">BeamMonSpill::BeamType()</a>, <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00040">NtpSRPlane::beg</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00041">NtpSRPlane::begu</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00042">NtpSRPlane::begv</a>, <a class="el" href="MadAbID_8cxx-source.html#l00562">MadAbID::CalcPID()</a>, <a class="el" href="MadDpID_8cxx-source.html#l00172">MadDpID::CalcPID()</a>, <a class="el" href="NtpSRFitTrack_8h-source.html#l00038">NtpSRFitTrack::chi2</a>, <a class="el" href="MadDpID_8cxx-source.html#l00403">MadDpID::ChoosePDFs()</a>, <a class="el" href="MadNsID_8cxx-source.html#l00689">MadNsID::ChooseWeightFile()</a>, <a class="el" href="NearbyEvents_8cxx-source.html#l00150">NearbyVertexFinder::ClosestSpatial()</a>, <a class="el" href="NearbyEvents_8cxx-source.html#l00167">NearbyVertexFinder::ClosestTemporal()</a>, <a class="el" href="NtpSRShower_8h-source.html#l00093">NtpSRShower::clu</a>, <a class="el" href="CoilTools_8cxx-source.html#l00713">CoilTools::CoilCurrent()</a>, <a class="el" href="NtpSRDetStatus_8h-source.html#l00034">NtpSRDetStatus::coilstatus</a>, <a class="el" href="NtpTHTrack_8h-source.html#l00039">NtpTHTrack::completeslc</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l03134">ComputeLowPHRatio()</a>, <a class="el" href="Interface_8cxx-source.html#l00239">Anp::Interface::Config()</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00098">NtpSRTrack::contained</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00046">NtpSRVertex::dcosx</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00047">NtpSRVertex::dcosy</a>, <a class="el" href="classDetector.html#w0">Detector::Detector_t</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00078">dpid</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l03156">DupRecoStrips()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02800">EarlyActivity()</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00102">NtpSRTrack::end</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00043">NtpSRPlane::end</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00044">NtpSRPlane::endu</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00045">NtpSRPlane::endv</a>, <a class="el" href="NtpSRMomentum_8h-source.html#l00038">NtpSRMomentum::eqp</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00167">fBECConfig</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00139">BeamMonSpill::fBpmInt</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00169">fDataUseMCBeam</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l03189">FDRCBoundary()</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00146">BeamMonSpill::fHadInt</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00130">BeamMonSpill::fHornCur</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02931">FillMCHists()</a>, <a class="el" href="Interface_8cxx-source.html#l00075">Anp::Interface::FillSnarl()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l03245">FindBatchNumber()</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00110">NtpSRTrack::fit</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00506">MadQuantities::Flavour()</a>, <a class="el" href="NtpMCTruth_8h-source.html#l00078">NtpMCTruth::flux</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00038">NtpMCFluxInfo::fluxevtno</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00037">NtpMCFluxInfo::fluxrun</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00168">fMCBeam</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00146">BeamMonSpill::fMuInt1</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00146">BeamMonSpill::fMuInt2</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00146">BeamMonSpill::fMuInt3</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00144">BeamMonSpill::fProfWidX</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00144">BeamMonSpill::fProfWidY</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00132">BeamMonSpill::fTargBpmX</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00132">BeamMonSpill::fTargBpmY</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00142">BeamMonSpill::fTargProfX</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00142">BeamMonSpill::fTargProfY</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00128">BeamMonSpill::fTor101</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00128">BeamMonSpill::fTortgt</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00128">BeamMonSpill::fTr101d</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00128">BeamMonSpill::fTrtgtd</a>, <a class="el" href="EnergyCorrections_8cxx-source.html#l00227">EnergyCorrections::FullyCorrectMomentumFromRange()</a>, <a class="el" href="EnergyCorrections_8cxx-source.html#l00260">EnergyCorrections::FullyCorrectSignedMomentumFromCurvature()</a>, <a class="el" href="BDSpillAccessor_8cxx-source.html#l00016">BDSpillAccessor::Get()</a>, <a class="el" href="classRegistry.html#a24">Registry::Get()</a>, <a class="el" href="VldContext_8h-source.html#l00051">VldContext::GetDetector()</a>, <a class="el" href="MadBase_8cxx-source.html#l00068">MadBase::GetEntry()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02627">GetEvtTimeChar()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02673">GetEvtTimeCharPHC()</a>, <a class="el" href="MadNsID_8cxx-source.html#l00720">MadNsID::GetPID()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00447">MadAbID::GetRecoCosTheta()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00492">MadAbID::GetRecoE()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00465">MadAbID::GetRecoY()</a>, <a class="el" href="RecPhysicsHeader_8h-source.html#l00035">RecPhysicsHeader::GetRemoteSpillType()</a>, <a class="el" href="Moments_8cxx-source.html#l00036">Moments::GetRMS()</a>, <a class="el" href="RecDataHeader_8h-source.html#l00026">RecDataHeader::GetRun()</a>, <a class="el" href="VldTimeStamp_8h-source.html#l00166">VldTimeStamp::GetSeconds()</a>, <a class="el" href="VldContext_8h-source.html#l00052">VldContext::GetSimFlag()</a>, <a class="el" href="RecPhysicsHeader_8h-source.html#l00032">RecPhysicsHeader::GetSnarl()</a>, <a class="el" href="WeightCalculator_8h-source.html#l00031">WeightCalculator::GetStandardConfig()</a>, <a class="el" href="BeamMonSpill_8h-source.html#l00172">BeamMonSpill::GetStatusBits()</a>, <a class="el" href="RecDataHeader_8h-source.html#l00027">RecDataHeader::GetSubRun()</a>, <a class="el" href="VldContext_8h-source.html#l00053">VldContext::GetTimeStamp()</a>, <a class="el" href="SpillTimeFinder_8h-source.html#l00112">SpillTimeFinder::GetTimeToNearestSpill()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00519">MadAbID::GetTrackEMCharge()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00510">MadAbID::GetTrackLikePlanes()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00537">MadAbID::GetTrackPHfrac()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00549">MadAbID::GetTrackPHmean()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00501">MadAbID::GetTrackPlanes()</a>, <a class="el" href="MadAbID_8cxx-source.html#l00528">MadAbID::GetTrackQPsigmaQP()</a>, <a class="el" href="RecPhysicsHeader_8h-source.html#l00033">RecPhysicsHeader::GetTrigSrc()</a>, <a class="el" href="Interface_8cxx-source.html#l00198">Anp::Interface::GetVar()</a>, <a class="el" href="RecHeader_8h-source.html#l00028">RecHeader::GetVldContext()</a>, <a class="el" href="NtpSRStripPulseHeight_8h-source.html#l00034">NtpSRStripPulseHeight::gev</a>, <a class="el" href="MsgRootDummies_8cxx.html#a0">gSystem()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01175">MadQuantities::HadronicFinalState()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00528">MadQuantities::IAction()</a>, <a class="el" href="NtpSRCluster_8h-source.html#l00047">NtpSRCluster::id</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02063">InFidVol()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01128">MadQuantities::Initial_state()</a>, <a class="el" href="SpillTimeFinder_8cxx-source.html#l00014">SpillTimeFinder::Instance()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00492">MadQuantities::INu()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00499">MadQuantities::INuNoOsc()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00535">MadQuantities::IResonance()</a>, <a class="el" href="ReleaseType_8cxx-source.html#l00086">ReleaseType::IsCedar()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00286">MadQuantities::IsFid_2008()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00324">MadQuantities::IsFidAll()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00246">MadQuantities::IsFidFD_AB()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00192">MadQuantities::IsFidVtxEvt()</a>, <a class="el" href="DataQualDB_8cxx-source.html#l00010">DataUtil::IsGoodFDData()</a>, <a class="el" href="LISieve_8cxx-source.html#l00022">LISieve::IsLI()</a>, <a class="el" href="CoilTools_8cxx-source.html#l00683">CoilTools::IsOK()</a>, <a class="el" href="CoilTools_8cxx-source.html#l00698">CoilTools::IsReverse()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00051">kXcenter</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00052">kYcenter</a>, <a class="el" href="NtpSRShowerPulseHeight_8h-source.html#l00033">NtpSRShowerPulseHeight::linCCgev</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00050">NtpSREventSummary::litime</a>, <a class="el" href="MadBase_8cxx-source.html#l00306">MadBase::LoadCluster()</a>, <a class="el" href="MadBase_8cxx-source.html#l00536">MadBase::LoadEvent()</a>, <a class="el" href="MadBase_8cxx-source.html#l00244">MadBase::LoadLargestTrackFromEvent()</a>, <a class="el" href="MadBase_8cxx-source.html#l00323">MadBase::LoadShower()</a>, <a class="el" href="MadBase_8cxx-source.html#l00363">MadBase::LoadShower_Jim()</a>, <a class="el" href="MadBase_8cxx-source.html#l00501">MadBase::LoadSlice()</a>, <a class="el" href="BDSpillAccessor_8cxx-source.html#l00039">BDSpillAccessor::LoadSpill()</a>, <a class="el" href="MadBase_8cxx-source.html#l00227">MadBase::LoadTrack()</a>, <a class="el" href="MadBase_8cxx-source.html#l00553">MadBase::LoadTruth()</a>, <a class="el" href="MadBase_8cxx-source.html#l00660">MadBase::LoadTruthForRecoTH()</a>, <a class="el" href="Registry_8h-source.html#l00078">Registry::LockValues()</a>, <a class="el" href="ReleaseType_8cxx-source.html#l00276">ReleaseType::MakeReleaseType()</a>, <a class="el" href="NtpSRStripPulseHeight_8h-source.html#l00033">NtpSRStripPulseHeight::mip</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00109">NtpSRTrack::momentum</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02720">MuonShowerEnergy()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00072">NtpMCFluxInfo::mupare</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00069">NtpMCFluxInfo::muparpx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00070">NtpMCFluxInfo::muparpy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00071">NtpMCFluxInfo::muparpz</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00037">NtpSRPlane::n</a>, <a class="el" href="NtpSRShower_8h-source.html#l00092">NtpSRShower::ncluster</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00052">NtpMCFluxInfo::ndecay</a>, <a class="el" href="NtpSRFitTrack_8h-source.html#l00035">NtpSRFitTrack::ndof</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">NDRadialFidVol()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00039">NtpMCFluxInfo::ndxdz</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00047">NtpMCFluxInfo::ndxdzfar</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00043">NtpMCFluxInfo::ndxdznear</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00040">NtpMCFluxInfo::ndydz</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00048">NtpMCFluxInfo::ndydzfar</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00044">NtpMCFluxInfo::ndydznear</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00073">NtpMCFluxInfo::necm</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00042">NtpMCFluxInfo::nenergy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00049">NtpMCFluxInfo::nenergyfar</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00045">NtpMCFluxInfo::nenergynear</a>, <a class="el" href="NtpTHTrack_8h-source.html#l00034">NtpTHTrack::neumc</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00045">NtpSREventSummary::nevent</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00074">NtpMCFluxInfo::nimpwt</a>, <a class="el" href="NtpSRDmxStatus_8h-source.html#l00042">NtpSRDmxStatus::nonphysicalfail</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00051">NtpMCFluxInfo::norig</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02464">NPlanesInObj()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00041">NtpMCFluxInfo::npz</a>, <a class="el" href="NtpSREvent_8h-source.html#l00070">NtpSREvent::nshower</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00077">nsid</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00070">NtpSRTrack::nstrip</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02551">NStripsInObj()</a>, <a class="el" href="NtpSREvent_8h-source.html#l00072">NtpSREvent::ntrack</a>, <a class="el" href="NtpSRTrackPlane_8h-source.html#l00035">NtpSRTrackPlane::ntrklike</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00053">NtpMCFluxInfo::ntype</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00773">MadQuantities::Nucleus()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00664">MadQuantities::NumFSNeutron()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00682">MadQuantities::NumFSPion()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00725">MadQuantities::NumFSPiZero()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00646">MadQuantities::NumFSProton()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00050">NtpMCFluxInfo::nwtfar</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00046">NtpMCFluxInfo::nwtnear</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00081">openedabpidfile</a>, <a class="el" href="NtpSRFitTrack_8h-source.html#l00034">NtpSRFitTrack::pass</a>, <a class="el" href="MadAnalysis_8h-source.html#l00101">MadAnalysis::PassBasicCuts()</a>, <a class="el" href="MadQEID_8cxx-source.html#l00387">MadQEID::PassMEDQECut()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00140">MadQuantities::PassTrackCuts()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00057">NtpMCFluxInfo::pdpx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00058">NtpMCFluxInfo::pdpy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00059">NtpMCFluxInfo::pdpz</a>, <a class="el" href="NtpSRCluster_8h-source.html#l00065">NtpSRCluster::ph</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00099">NtpSRTrack::ph</a>, <a class="el" href="NtpSREvent_8h-source.html#l00084">NtpSREvent::ph</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00171">phnti</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02278">PittInFidVol()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02294">PittTrkContained()</a>, <a class="el" href="NtpSRShower_8h-source.html#l00097">NtpSRShower::plane</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00100">NtpSRTrack::plane</a>, <a class="el" href="NtpSREvent_8h-source.html#l00085">NtpSREvent::plane</a>, <a class="el" href="NtpSRCluster_8h-source.html#l00043">NtpSRCluster::planeview</a>, <a class="el" href="nrutil__val_8h-source.html#l00374">pow()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00060">NtpMCFluxInfo::ppdxdz</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00061">NtpMCFluxInfo::ppdydz</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00063">NtpMCFluxInfo::ppenergy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00064">NtpMCFluxInfo::ppmedium</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00062">NtpMCFluxInfo::pppz</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00066">NtpMCFluxInfo::ppvx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00067">NtpMCFluxInfo::ppvy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00068">NtpMCFluxInfo::ppvz</a>, <a class="el" href="Registry_8cxx-source.html#l00184">Registry::Print()</a>, <a class="el" href="NearbyEvents_8cxx-source.html#l00185">NearbyVertexFinder::ProcessEntry()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00065">NtpMCFluxInfo::ptype</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00759">MadQuantities::Q2()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00079">qeid</a>, <a class="el" href="NtpSRMomentum_8h-source.html#l00037">NtpSRMomentum::qp</a>, <a class="el" href="NtpSRMomentum_8h-source.html#l00033">NtpSRMomentum::range</a>, <a class="el" href="MadAbID_8cxx-source.html#l00603">MadAbID::ReadPDFs()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02187">RecoMuDCosNeuFD()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02197">RecoMuDCosNeuND()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01415">MadQuantities::RecoMuDCosZ()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01368">MadQuantities::RecoMuEnergyNew()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01650">MadQuantities::RecoQENuEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01668">MadQuantities::RecoQEQ2()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01563">MadQuantities::RecoShwEnergyNew()</a>, <a class="el" href="ReleaseType_8h-source.html#l00183">ReleaseType::Release_t</a>, <a class="el" href="do__extrap_8h-source.html#l00353">run()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00174">rustemconfigfile</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00173">rustempidfile_far</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00172">rustempidfile_near</a>, <a class="el" href="BMSpillAna_8cxx-source.html#l00163">BMSpillAna::SelectSpill()</a>, <a class="el" href="classRegistry.html#a37">Registry::Set()</a>, <a class="el" href="MadDpID_8h-source.html#l00092">MadDpID::SetPHCorrection()</a>, <a class="el" href="BMSpillAna_8cxx-source.html#l00115">BMSpillAna::SetSpill()</a>, <a class="el" href="BMSpillAna_8h-source.html#l00279">BMSpillAna::SetTimeDiff()</a>, <a class="el" href="NtpSRShower_8h-source.html#l00096">NtpSRShower::shwph</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02406">SigInOut()</a>, <a class="el" href="NtpSREvent_8h-source.html#l00056">NtpSREvent::slc</a>, <a class="el" href="NtpSRCluster_8h-source.html#l00062">NtpSRCluster::slope</a>, <a class="el" href="BeamMonSpill_8cxx-source.html#l00164">BeamMonSpill::SpillTime()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01209">MadQuantities::Target4Vector()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00085">NtpMCFluxInfo::tgen</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00670">MadQuantities::TotFSNeutronEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00690">MadQuantities::TotFSPionEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00731">MadQuantities::TotFSPiZeroEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00652">MadQuantities::TotFSProtonEnergy()</a>, <a class="el" href="NtpSRCluster_8h-source.html#l00061">NtpSRCluster::tposvtx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00084">NtpMCFluxInfo::tptype</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00081">NtpMCFluxInfo::tpx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00082">NtpMCFluxInfo::tpy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00083">NtpMCFluxInfo::tpz</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00046">NtpSREventSummary::trigtime</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01304">MadQuantities::TrueMuDCosNeu()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01293">MadQuantities::TrueMuDCosZ()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01256">MadQuantities::TrueMuEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01222">MadQuantities::TrueNuEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01228">MadQuantities::TrueNuMom()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01286">MadQuantities::TrueShwEnergy()</a>, <a class="el" href="MadQuantities_8cxx-source.html#l01242">MadQuantities::TrueVtx()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00078">NtpMCFluxInfo::tvx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00079">NtpMCFluxInfo::tvy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00080">NtpMCFluxInfo::tvz</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00038">NtpSRVertex::u</a>, <a class="el" href="BMSpillAna_8h-source.html#l00267">BMSpillAna::UseDatabaseCuts()</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00039">NtpSRVertex::v</a>, <a class="el" href="NtpSRDmxStatus_8h-source.html#l00043">NtpSRDmxStatus::validplanesfail</a>, <a class="el" href="NtpSRDmxStatus_8h-source.html#l00044">NtpSRDmxStatus::vertexplanefail</a>, <a class="el" href="NtpSRShower_8h-source.html#l00098">NtpSRShower::vtx</a>, <a class="el" href="NtpSREvent_8h-source.html#l00086">NtpSREvent::vtx</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00101">NtpSRTrack::vtx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00054">NtpMCFluxInfo::vx</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00055">NtpMCFluxInfo::vy</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00056">NtpMCFluxInfo::vz</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00766">MadQuantities::W2()</a>, <a class="el" href="NtpSRShowerPulseHeight_8h-source.html#l00034">NtpSRShowerPulseHeight::wtCCgev</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00040">NtpSRVertex::x</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00752">MadQuantities::X()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00075">NtpMCFluxInfo::xpoint</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00041">NtpSRVertex::y</a>, <a class="el" href="MadQuantities_8cxx-source.html#l00745">MadQuantities::Y()</a>, <a class="el" href="NtpMCFluxInfo_8h-source.html#l00076">NtpMCFluxInfo::ypoint</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00042">NtpSRVertex::z</a>, and <a class="el" href="NtpMCFluxInfo_8h-source.html#l00077">NtpMCFluxInfo::zpoint</a>.
<p>
<div class="fragment"><pre>00138 {
00139   
00140   <span class="comment">// is this MC??</span>
00141   this-&gt;<a class="code" href="classMadBase.html#a3">GetEntry</a>(0);
00142   <span class="keyword">const</span> <span class="keywordtype">bool</span> file_is_mc
00143     =(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a5">GetSimFlag</a>()==SimFlag::kMC);
00144 
00145   <span class="comment">//set mc and recoversions for pid histogram retrevial</span>
00146   <span class="comment">//  string recover = EnergyCorrections::GetCorrectionAsString();</span>
00147   string mcver = <span class="stringliteral">"daikon"</span>; <span class="comment">//note this is hard coded and bad, but I dont' care.</span>
00148   <a class="code" href="namespaceReleaseType.html#a5">ReleaseType::Release_t</a> reltype = <a class="code" href="namespaceReleaseType.html#a115">ReleaseType::MakeReleaseType</a>(<a class="code" href="classMadBase.html#p6">strecord</a>-&gt;GetTitle(),mcver);
00149   string recover = <a class="code" href="namespaceReleaseType.html#a107">ReleaseType::AsString</a>(reltype);
00150   
00151   cout&lt;&lt;<span class="stringliteral">"Running pans over "</span>&lt;&lt;recover&lt;&lt;<span class="stringliteral">" "</span>&lt;&lt;mcver&lt;&lt;endl;
00152 
00153   <span class="comment">//updated ireg to from rustems for his cc-pid selection 12-21-2007</span>
00154   <span class="comment">//set up anti numu selection and rustem's cc pid</span>
00155   <a class="code" href="classRegistry.html">Registry</a> ireg(<span class="keyword">false</span>);
00156   
00157   ireg.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"InterfaceConfigPath"</span>, <a class="code" href="classMadTVAnalysis.html#r6">rustemconfigfile</a>.c_str());
00158   <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>() == <a class="code" href="classDetector.html#w8w2">Detector::kNear</a>)
00159   {
00160     ireg.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"FillkNNFilePath"</span>, <a class="code" href="classMadTVAnalysis.html#r4">rustempidfile_near</a>.c_str());
00161   }
00162   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>() == <a class="code" href="classDetector.html#w8w3">Detector::kFar</a>)
00163   {
00164     ireg.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"FillkNNFilePath"</span>, <a class="code" href="classMadTVAnalysis.html#r5">rustempidfile_far</a>.c_str());
00165   }
00166   
00167   <span class="comment">//</span>
00168   <span class="comment">// Do not erase events that fail SelectAntiNeutrino algorithm</span>
00169   <span class="comment">//</span>
00170   ireg.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"QuietInterface"</span>, <span class="stringliteral">"yes"</span>);
00171   ireg.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"SelectAntiNeutrinoErase"</span>, <span class="stringliteral">"no"</span>);
00172   
00173   ireg.<a class="code" href="classRegistry.html#a16">LockValues</a>();
00174   <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a4">Config</a>(ireg);
00175 
00176   <span class="comment">//PAN Quantities </span>
00177   <span class="comment">//Truth:</span>
00178   Float_t true_enu;       <span class="comment">// true neutrino energy (GeV)</span>
00179   Float_t true_emu;       <span class="comment">// true muon energy</span>
00180   Float_t true_eshw;      <span class="comment">// true shower energy</span>
00181   Float_t true_x;         <span class="comment">// true x</span>
00182   Float_t true_y;         <span class="comment">// true y</span>
00183   Float_t true_q2;        <span class="comment">// true q2</span>
00184   Float_t true_w2;        <span class="comment">// true w2</span>
00185   Float_t true_dircosneu; <span class="comment">// true muon dircos w.r.t neutrino</span>
00186   Float_t true_dircosz;   <span class="comment">// track z-direction cosine</span>
00187   Float_t true_vtxx;      <span class="comment">// true x vtx</span>
00188   Float_t true_vtxy;      <span class="comment">// true y vtx</span>
00189   Float_t true_vtxz;      <span class="comment">// true z vtx</span>
00190   Int_t true_pitt_fid; <span class="comment">// was event truly in fiducial volue?</span>
00191   Float_t true_trk_cmplt;  <span class="comment">//true track completeness</span>
00192 
00193   <span class="comment">//For Neugen:</span>
00194   Float_t flavour;        <span class="comment">// true flavour: 1-e 2-mu 3-tau</span>
00195   Int_t <a class="code" href="classprocess.html">process</a>;          <span class="comment">// process: 1001-QEL 1002-RES 1003-DIS 1004-COH</span>
00196   Int_t <a class="code" href="classnucleus.html">nucleus</a>;          <span class="comment">// target nucleus: 274-C 284-O 372-Fe</span>
00197   Int_t cc_nc;            <span class="comment">// cc/nc flag: 1-cc 2-nc</span>
00198   Int_t initial_state;    <span class="comment">// initial state: 1-vp 2-vn 3-vbarp 4-vbarn ...</span>
00199   Int_t inu;              <span class="comment">// stdhep inu</span>
00200   Int_t inunoosc;              <span class="comment">// stdhep inu unoscilllated</span>
00201   Int_t resnum; <span class="comment">// IdHEP%1000 of resonance state</span>
00202 
00203   Short_t npp; <span class="comment">// # final state pi+</span>
00204   Short_t npm; <span class="comment">// # fs pi-</span>
00205   Short_t npz; <span class="comment">// # fs pi0</span>
00206   Short_t np; <span class="comment">// # fs p</span>
00207   Short_t nn; <span class="comment">// # fs n</span>
00208   <span class="keywordtype">float</span> epp; <span class="comment">// energy final state pi+</span>
00209   <span class="keywordtype">float</span> epm; <span class="comment">// energy fs pi-</span>
00210   <span class="keywordtype">float</span> epz; <span class="comment">// energy fs pi0</span>
00211   <span class="keywordtype">float</span> ep; <span class="comment">// energy fs p</span>
00212   <span class="keywordtype">float</span> en; <span class="comment">// energy fs n</span>
00213 
00214   
00215   <span class="comment">//Reco Quantities</span>
00216   Int_t detector;         <span class="comment">// Near = 1, Far = 2;</span>
00217   Int_t <a class="code" href="do__extrap_8h.html#a34">run</a>;              <span class="comment">// run number</span>
00218   Int_t snarl;            <span class="comment">// snarl number</span>
00219   Int_t subrun;           <span class="comment">// subrun number</span>
00220   UInt_t trgsrc;          <span class="comment">// trigger source</span>
00221   <span class="keywordtype">double</span> trgtime;         <span class="comment">// trigger time</span>
00222   Double_t vld_sec;          <span class="comment">// seconds field of header vld context</span>
00223   Int_t spilltype;        <span class="comment">// comes from mdSpillTypeEnum</span>
00224                           <span class="comment">// 0=none, 1=reported, 2=predicted</span>
00225                           <span class="comment">// 3=fake, 4=local</span>
00226 
00227   Int_t nevent;           <span class="comment">// number of events in snarl</span>
00228   Int_t event;            <span class="comment">// event index</span>
00229   Int_t mcevent;          <span class="comment">// mc event index</span>
00230   Int_t ntrack;           <span class="comment">// number of tracks in event</span>
00231   Int_t nshower;          <span class="comment">// number of showers in event</span>
00232   Int_t nstrip;           <span class="comment">// number of strips in event</span>
00233 
00234   Int_t is_fid;           <span class="comment">// pass fid cut. true = 1, false = 0</span>
00235   Int_t is_fid_2007;      <span class="comment">// pass fid cut. true = 1, false = 0</span>
00236   Int_t is_cev;           <span class="comment">// fully contained. true = 1, false = 0 </span>
00237   Int_t sr_contained;     <span class="comment">// containment support from reconstruction. true=1,false=0 </span>
00238   Int_t is_mc;            <span class="comment">// is a corresponding mc event found</span>
00239   Int_t pass_basic;       <span class="comment">// Pass basic cuts. true = 1, false = 0</span>
00240   Int_t is_pitt_fid;      <span class="comment">// passes pitt ND vtx fid cut true=1, false=0</span>
00241   Int_t is_trk_fid;       <span class="comment">// is the trkvtx in fid (pitt fid for ND)</span>
00242                           <span class="comment">// true=1, false=0, notrack = -1</span>
00243   Int_t nd_radial_fid;    <span class="comment">// a bitfield, bits correspond to r cuts</span>
00244   Int_t pitt_evt_class;   <span class="comment">// CC event class as defined by pitt group</span>
00245   <span class="comment">// 1 = track is fully contained in the upstream region</span>
00246   <span class="comment">// 2 = track is partially contained in the upstream region</span>
00247   <span class="comment">// 3 = track is fully contained in the downstream region</span>
00248   <span class="comment">// 4 = track is partially contained in the downstream region</span>
00249   Int_t pitt_trk_qual;   <span class="comment">// pitt tracking quality cuts</span>
00250   Int_t duvvtx;          <span class="comment">//delta (Uvtx-Vvtx)</span>
00251 
00252   Float_t pid0;           <span class="comment">// pid parameter (usual method)</span>
00253   Float_t pid1;           <span class="comment">// pid parameter (alternative method 1)</span>
00254   Float_t pid2;           <span class="comment">// pid parameter (alternative method 2)</span>
00255   Int_t pass_track;       <span class="comment">// the primary track passes track cuts</span>
00256   Int_t trk_fit_pass;       <span class="comment">// trk.fit.pass</span>
00257   Int_t pass;             <span class="comment">// pass analysis cuts. true = 1, false = 0</span>
00258 
00259   Int_t emu_meth;         <span class="comment">// method used to determine muon energy</span>
00260   Float_t reco_enu;       <span class="comment">// reco neutrino energy</span>
00261   Float_t reco_emu;       <span class="comment">// reco muon energy</span>
00262   Float_t reco_mushw;     <span class="comment">// showers along muon track</span>
00263   Float_t reco_eshw;      <span class="comment">// reco shower energy (largest shower</span>
00264   Float_t reco_wtd_eshw;    <span class="comment">// as above but weighted </span>
00265   Float_t reco_vtx_eshw;    <span class="comment">// reco shower energy (=0 if no vertex shower)</span>
00266   Float_t reco_vtx_wtd_eshw;<span class="comment">// as above but weighted (=0 if no vertex shower)</span>
00267   
00268   Float_t reco_eshw_uncorr; <span class="comment">// uncorrected shower energy</span>
00269   Float_t reco_wtd_eshw_uncorr; <span class="comment">// uncorrected weighted shower energy</span>
00270 
00271   Float_t reco_dircosneu; <span class="comment">// reco track vtx dircos w.r.t neutrino</span>
00272   Float_t reco_dircosx;   <span class="comment">// reco track vtx x-dircos</span>
00273   Float_t reco_dircosy;   <span class="comment">// reco track vtx y-dircos</span>
00274   Float_t reco_dircosz;   <span class="comment">// reco track vtx z-dircos</span>
00275 
00276   Float_t reco_vtxx;      <span class="comment">// reco x vtx</span>
00277   Float_t reco_vtxy;      <span class="comment">// reco y vtx</span>
00278   Float_t reco_vtxz;      <span class="comment">// reco z vtx</span>
00279   Float_t reco_vtxr;<span class="comment">// radial position of vertex</span>
00280 
00281   Float_t reco_trk_vtxx;      <span class="comment">// reco x track vtx</span>
00282   Float_t reco_trk_vtxy;      <span class="comment">// reco y track vtx</span>
00283   Float_t reco_trk_vtxz;      <span class="comment">// reco z track vtx</span>
00284   Float_t reco_trk_vtxr;<span class="comment">// radial position of vertex</span>
00285 
00286   Float_t reco_shw_vtxx;      <span class="comment">// reco x track vtx</span>
00287   Float_t reco_shw_vtxy;      <span class="comment">// reco y track vtx</span>
00288   Float_t reco_shw_vtxz;      <span class="comment">// reco z track vtx</span>
00289   Float_t reco_shw_vtxr;<span class="comment">// radial position of vertex</span>
00290 
00291   Float_t reco_trk_endx;      <span class="comment">// reco x track end</span>
00292   Float_t reco_trk_endy;      <span class="comment">// reco y track end</span>
00293   Float_t reco_trk_endz;      <span class="comment">// reco z track end</span>
00294   Float_t reco_trk_endr;<span class="comment">// radial position of vertex</span>
00295 
00296   Int_t evt_nplanes;        <span class="comment">//number of planes in event above some ph</span>
00297   Int_t trk_nplanes;        <span class="comment">//number of planes in track above some ph</span>
00298   Int_t slc_nplanes;        <span class="comment">//number of planes in slice above some ph</span>
00299   Int_t shw_nplanes_cut;        <span class="comment">//number of planes in shower above some ph</span>
00300   Int_t shw_nplanes_raw;        <span class="comment">//number of planes in shower</span>
00301   Float_t shw_ph_cut, shw_ph_raw; <span class="comment">// sigcor in shower, w/ &amp; w/o ph cut</span>
00302   
00303   Int_t evt_nstrips;        <span class="comment">//number of strips in event above some ph</span>
00304   Int_t trk_nstrips;        <span class="comment">//number of strips in track above some ph</span>
00305   Int_t slc_nstrips;        <span class="comment">//number of strips in slice above some ph</span>
00306 
00307 
00308   <span class="comment">// reconstructed kinematics</span>
00309   <span class="comment">// formulae given for high-energy CC interactions</span>
00310   <span class="comment">// Assume nu = Ehad</span>
00311   Float_t reco_y;<span class="comment">// y = (Enu-Emu)/Enu</span>
00312   Float_t reco_Q2;<span class="comment">// Q2 = -q^{2} = 2 Enu Emu (1 - cos(theta_mu))</span>
00313   Float_t reco_x;<span class="comment">// x = Q2 / (2M* Ehad)  {M=nucleon mass}</span>
00314   Float_t reco_W2;<span class="comment">// W2 = M^{2} + q^{2} + 2M(Enu-Emu)</span>
00315 
00316   <span class="comment">// reco quantities, assuming a QE event</span>
00317   Float_t reco_qe_enu;    <span class="comment">// reco qe neutrino energy</span>
00318   Float_t reco_qe_q2;     <span class="comment">// reco qe q2</span>
00319 
00320   
00321   Float_t evtlength;      <span class="comment">// reco event length</span>
00322   Float_t shwlength;      <span class="comment">// reco shower length</span>
00323   Float_t trklength;      <span class="comment">// reco track length (planes)</span>
00324   Int_t ntrklike;      <span class="comment">// number of track-like planes</span>
00325   Float_t trkmomrange;    <span class="comment">// reco track momentum from range</span>
00326   Float_t trkqp;          <span class="comment">// reco track q/p</span>
00327   Float_t trkeqp;         <span class="comment">// reco track q/p error</span>
00328   Float_t trkphfrac;      <span class="comment">// reco pulse height fraction in track</span>
00329   Float_t trkphplane;     <span class="comment">// reco average track pulse height/plane</span>
00330   Float_t trkchi2;
00331   Int_t trkndf;
00332 
00333 
00334   Int_t trkend, trkendu, trkendv; <span class="comment">// track end plane, u, v</span>
00335   Int_t shwend,shwbeg; <span class="comment">// shower begin,end planes</span>
00336 
00337   Int_t nss[6];<span class="comment">//</span>
00338   Float_t ess[6];<span class="comment">//</span>
00339   Int_t ntotss;
00340 
00341 
00342 
00343   <span class="comment">// variables to tag nearest event  in space and time</span>
00344   <span class="comment">// nvsi = nearest vertex space : index</span>
00345   <span class="comment">// nvsd = nearest vertex space : distance</span>
00346   <span class="comment">// nvst = nearest vertex space : distance</span>
00347   <span class="comment">// nvsp = nearest vertex space : pulse height</span>
00348   <span class="comment">// nvsevt = nearest vertex space : mc event</span>
00349   <span class="comment">// nvti = nearest vertex time : index</span>
00350   <span class="comment">// ....  </span>
00351   <span class="comment">// bvsi = back vertex space : index</span>
00352   <span class="comment">// the "back" variables hold the same info as the "near" variables</span>
00353   <span class="comment">// but for that nearest event</span>
00354   <span class="comment">// I'm interested in this case</span>
00355   <span class="comment">//  </span>
00356   <span class="comment">//  (this vtx)------&gt;(nearest)---&gt;(nearest to it)</span>
00357   <span class="comment">//</span>
00358   <span class="comment">// if you are going to try to recombine events</span>
00359   <span class="comment">// you need to somehow account for this</span>
00360   <span class="comment">//</span>
00361 
00362   Int_t nvsi, bvsi, nvti, bvti;
00363   Int_t nvsevt, bvsevt, nvtevt, bvtevt;
00364   Float_t nvsd, bvsd, nvtd, bvtd;
00365   Float_t nvst, bvst, nvtt, bvtt;
00366   Float_t nvsp, bvsp, nvtp, bvtp;
00367 
00368   <span class="comment">// this event's pulseheight (in sigcor)</span>
00369   Float_t evtph;
00370   Float_t evtphgev;
00371 
00372   <span class="comment">// the pulse height of the event and track</span>
00373   <span class="comment">// in the fully and partially instrumented regions</span>
00374   Float_t evtsigfull,trksigfull,evtsigpart,trksigpart;
00375 
00376 
00377   <span class="comment">//time structure of event</span>
00378   <span class="keywordtype">double</span> evttimemin, evttimemax, evttimeln;
00379   <span class="keywordtype">double</span> evttimeminphc, evttimemaxphc, evttimelnphc;
00380 
00381   <span class="comment">//early activity variables</span>
00382   <span class="keywordtype">float</span> earlywph, earlywphpw, earlywphsphere;
00383   <span class="keywordtype">float</span> ph1000, ph500, ph100;
00384   <span class="keywordtype">float</span> lateph1000, lateph500, lateph100, lateph50;
00385 
00386   <span class="comment">//duplicate reconstructed strip variables</span>
00387   <span class="keywordtype">int</span> nduprs; <span class="comment">//number of reco strips that are duplicated in another event</span>
00388   <span class="keywordtype">float</span> dupphrs; <span class="comment">//pulseheight of reco strips </span>
00389                  <span class="comment">//that are duplicated in another event</span>
00390 
00391   <span class="comment">//time last li event in snarl, -1 if none;</span>
00392   <span class="keywordtype">double</span> litime;
00393   <span class="keywordtype">int</span> is_li_sieve=0;
00394 
00395   <span class="comment">//demux failures (for fd)</span>
00396   UChar_t dmx_stat;
00397   <span class="comment">//  std::cout&lt;&lt;"Second Print"&lt;&lt;std::endl;</span>
00398 
00399   <span class="comment">// david's FD data quality</span>
00400   Int_t dp_fd_quality;
00401 
00402   <span class="comment">//brian's cut on lowph ratio to remove junk events </span>
00403   <span class="comment">//in FD that pass the dmx_stat variable</span>
00404   <span class="keywordtype">float</span> lowphrat;
00405 
00406   <span class="comment">//Trees</span>
00407   <span class="comment">// output file</span>
00408   std::string savename = <span class="stringliteral">"PAN_"</span> + tag + <span class="stringliteral">".root"</span>;
00409   TFile save(savename.c_str(),<span class="stringliteral">"RECREATE"</span>); 
00410   save.cd();
00411   TTree *tree = <span class="keyword">new</span> TTree(<span class="stringliteral">"pan"</span>,<span class="stringliteral">"pan"</span>);
00412   <span class="comment">//Truth</span>
00413   tree-&gt;Branch(<span class="stringliteral">"true_enu"</span>,&amp;true_enu,<span class="stringliteral">"true_enu/F"</span>,32000);
00414   tree-&gt;Branch(<span class="stringliteral">"true_emu"</span>,&amp;true_emu,<span class="stringliteral">"true_emu/F"</span>,32000);
00415   tree-&gt;Branch(<span class="stringliteral">"true_eshw"</span>,&amp;true_eshw,<span class="stringliteral">"true_eshw/F"</span>,32000);
00416   tree-&gt;Branch(<span class="stringliteral">"true_x"</span>,&amp;true_x,<span class="stringliteral">"true_x/F"</span>,32000);
00417   tree-&gt;Branch(<span class="stringliteral">"true_y"</span>,&amp;true_y,<span class="stringliteral">"true_y/F"</span>,32000);
00418   tree-&gt;Branch(<span class="stringliteral">"true_q2"</span>,&amp;true_q2,<span class="stringliteral">"true_q2/F"</span>,32000);
00419   tree-&gt;Branch(<span class="stringliteral">"true_w2"</span>,&amp;true_w2,<span class="stringliteral">"true_w2/F"</span>,32000);
00420   Float_t nu_px, nu_py, nu_pz;
00421   Float_t tar_px, tar_py, tar_pz, tar_e;
00422   tree-&gt;Branch(<span class="stringliteral">"nu_px"</span>, &amp;nu_px, <span class="stringliteral">"nu_px/F"</span>);
00423   tree-&gt;Branch(<span class="stringliteral">"nu_py"</span>, &amp;nu_py, <span class="stringliteral">"nu_py/F"</span>);
00424   tree-&gt;Branch(<span class="stringliteral">"nu_pz"</span>, &amp;nu_pz, <span class="stringliteral">"nu_pz/F"</span>);
00425   tree-&gt;Branch(<span class="stringliteral">"tar_px"</span>, &amp;tar_px, <span class="stringliteral">"tar_px/F"</span>);
00426   tree-&gt;Branch(<span class="stringliteral">"tar_py"</span>, &amp;tar_py, <span class="stringliteral">"tar_py/F"</span>);
00427   tree-&gt;Branch(<span class="stringliteral">"tar_pz"</span>, &amp;tar_pz, <span class="stringliteral">"tar_pz/F"</span>);
00428   tree-&gt;Branch(<span class="stringliteral">"tar_e"</span>, &amp;tar_e, <span class="stringliteral">"tar_e/F"</span>);
00429 
00430 
00431   tree-&gt;Branch(<span class="stringliteral">"true_dircosneu"</span>,&amp;true_dircosneu,<span class="stringliteral">"true_dircosneu/F"</span>,32000);
00432   tree-&gt;Branch(<span class="stringliteral">"true_dircosz"</span>,&amp;true_dircosz,<span class="stringliteral">"true_dircosz/F"</span>,32000);
00433   tree-&gt;Branch(<span class="stringliteral">"true_vtxx"</span>,&amp;true_vtxx,<span class="stringliteral">"true_vtxx/F"</span>,32000);
00434   tree-&gt;Branch(<span class="stringliteral">"true_vtxy"</span>,&amp;true_vtxy,<span class="stringliteral">"true_vtxy/F"</span>,32000);
00435   tree-&gt;Branch(<span class="stringliteral">"true_vtxz"</span>,&amp;true_vtxz,<span class="stringliteral">"true_vtxz/F"</span>,32000);
00436   tree-&gt;Branch(<span class="stringliteral">"true_pitt_fid"</span>,&amp;true_pitt_fid,<span class="stringliteral">"true_pitt_fid/I"</span>,32000);
00437   tree-&gt;Branch(<span class="stringliteral">"true_trk_cmplt"</span>,&amp;true_trk_cmplt,<span class="stringliteral">"true_trk_cmplt/F"</span>,32000);
00438 
00439   <span class="comment">//Neugen</span>
00440   tree-&gt;Branch(<span class="stringliteral">"flavour"</span>,&amp;flavour,<span class="stringliteral">"flavour/F"</span>,32000);
00441   tree-&gt;Branch(<span class="stringliteral">"process"</span>,&amp;process,<span class="stringliteral">"process/I"</span>,32000);
00442   tree-&gt;Branch(<span class="stringliteral">"nucleus"</span>,&amp;nucleus,<span class="stringliteral">"nucleus/I"</span>,32000);
00443   tree-&gt;Branch(<span class="stringliteral">"cc_nc"</span>,&amp;cc_nc,<span class="stringliteral">"cc_nc/I"</span>,32000);
00444   tree-&gt;Branch(<span class="stringliteral">"inu"</span>,&amp;inu,<span class="stringliteral">"inu/I"</span>,32000);
00445   tree-&gt;Branch(<span class="stringliteral">"inunoosc"</span>,&amp;inunoosc,<span class="stringliteral">"inunoosc/I"</span>,32000);
00446 
00447   tree-&gt;Branch(<span class="stringliteral">"initial_state"</span>,&amp;initial_state,<span class="stringliteral">"initial_state/I"</span>,32000);
00448   tree-&gt;Branch(<span class="stringliteral">"resnum"</span>,&amp;resnum,<span class="stringliteral">"resnum/I"</span>,32000);
00449   tree-&gt;Branch(<span class="stringliteral">"npp"</span>,&amp;npp,<span class="stringliteral">"npp/S"</span>,32000);
00450   tree-&gt;Branch(<span class="stringliteral">"npm"</span>,&amp;npm,<span class="stringliteral">"npm/S"</span>,32000);
00451   tree-&gt;Branch(<span class="stringliteral">"npz"</span>,&amp;npz,<span class="stringliteral">"npz/S"</span>,32000);
00452   tree-&gt;Branch(<span class="stringliteral">"np"</span>,&amp;np,<span class="stringliteral">"np/S"</span>,32000);
00453   tree-&gt;Branch(<span class="stringliteral">"nn"</span>,&amp;nn,<span class="stringliteral">"nn/S"</span>,32000);
00454 
00455   tree-&gt;Branch(<span class="stringliteral">"epp"</span>,&amp;epp,<span class="stringliteral">"epp/F"</span>,32000);
00456   tree-&gt;Branch(<span class="stringliteral">"epm"</span>,&amp;epm,<span class="stringliteral">"epm/F"</span>,32000);
00457   tree-&gt;Branch(<span class="stringliteral">"epz"</span>,&amp;epz,<span class="stringliteral">"epz/F"</span>,32000);
00458   tree-&gt;Branch(<span class="stringliteral">"ep"</span>,&amp;ep,<span class="stringliteral">"ep/F"</span>,32000);
00459   tree-&gt;Branch(<span class="stringliteral">"en"</span>,&amp;en,<span class="stringliteral">"en/F"</span>,32000);
00460 
00461   <span class="comment">//Reco</span>
00462   tree-&gt;Branch(<span class="stringliteral">"detector"</span>,&amp;detector,<span class="stringliteral">"detector/I"</span>,32000);
00463   tree-&gt;Branch(<span class="stringliteral">"run"</span>,&amp;run,<span class="stringliteral">"run/I"</span>,32000);
00464   tree-&gt;Branch(<span class="stringliteral">"snarl"</span>,&amp;snarl,<span class="stringliteral">"snarl/I"</span>,32000);
00465   tree-&gt;Branch(<span class="stringliteral">"subrun"</span>,&amp;subrun,<span class="stringliteral">"subrun/I"</span>,32000);
00466   tree-&gt;Branch(<span class="stringliteral">"trgsrc"</span>,&amp;trgsrc,<span class="stringliteral">"trgsrc/i"</span>,32000);
00467   tree-&gt;Branch(<span class="stringliteral">"trgtime"</span>,&amp;trgtime,<span class="stringliteral">"trgtime/D"</span>,32000);
00468   tree-&gt;Branch(<span class="stringliteral">"vld_sec"</span>,&amp;vld_sec,<span class="stringliteral">"vld_sec/D"</span>,32000);
00469 
00470 
00471   tree-&gt;Branch(<span class="stringliteral">"spilltype"</span>,&amp;spilltype,<span class="stringliteral">"spiltype/I"</span>,32000);
00472   tree-&gt;Branch(<span class="stringliteral">"nevent"</span>,&amp;nevent,<span class="stringliteral">"nevent/I"</span>,32000);
00473   tree-&gt;Branch(<span class="stringliteral">"event"</span>,&amp;event,<span class="stringliteral">"event/I"</span>,32000);
00474   tree-&gt;Branch(<span class="stringliteral">"mcevent"</span>,&amp;mcevent,<span class="stringliteral">"mcevent/I"</span>,32000);
00475   tree-&gt;Branch(<span class="stringliteral">"ntrack"</span>,&amp;ntrack,<span class="stringliteral">"ntrack/I"</span>,32000);
00476   tree-&gt;Branch(<span class="stringliteral">"nshower"</span>,&amp;nshower,<span class="stringliteral">"nshower/I"</span>,32000);
00477   tree-&gt;Branch(<span class="stringliteral">"nstrip"</span>,&amp;nstrip,<span class="stringliteral">"nstrip/I"</span>,32000);
00478   
00479   tree-&gt;Branch(<span class="stringliteral">"is_fid"</span>,&amp;is_fid,<span class="stringliteral">"is_fid/I"</span>,32000);
00480   tree-&gt;Branch(<span class="stringliteral">"is_fid_2007"</span>,&amp;is_fid_2007,<span class="stringliteral">"is_fid_2007/I"</span>,32000);
00481   tree-&gt;Branch(<span class="stringliteral">"is_cev"</span>,&amp;is_cev,<span class="stringliteral">"is_cev/I"</span>,32000);
00482   tree-&gt;Branch(<span class="stringliteral">"sr_contained"</span>,&amp;sr_contained,<span class="stringliteral">"sr_contained/I"</span>,32000);
00483   tree-&gt;Branch(<span class="stringliteral">"is_mc"</span>,&amp;is_mc,<span class="stringliteral">"is_mc/I"</span>,32000);
00484   tree-&gt;Branch(<span class="stringliteral">"pass_basic"</span>,&amp;pass_basic,<span class="stringliteral">"pass_basic/I"</span>,32000);
00485   tree-&gt;Branch(<span class="stringliteral">"pass_track"</span>,&amp;pass_track,<span class="stringliteral">"pass_track/I"</span>,32000);
00486   tree-&gt;Branch(<span class="stringliteral">"trk_fit_pass"</span>,&amp;trk_fit_pass,<span class="stringliteral">"trk_fit_pass/I"</span>,32000);
00487   tree-&gt;Branch(<span class="stringliteral">"emu_meth"</span>,&amp;emu_meth,<span class="stringliteral">"emu_meth/I"</span>,32000);
00488   tree-&gt;Branch(<span class="stringliteral">"is_pitt_fid"</span>,&amp;is_pitt_fid,<span class="stringliteral">"is_pitt_fid/I"</span>,32000);
00489   tree-&gt;Branch(<span class="stringliteral">"is_trk_fid"</span>,&amp;is_trk_fid,<span class="stringliteral">"is_trk_fid/I"</span>,32000);
00490 
00491   tree-&gt;Branch(<span class="stringliteral">"nd_radial_fid"</span>,&amp;nd_radial_fid,<span class="stringliteral">"nd_radial_fid/I"</span>,32000);
00492   tree-&gt;Branch(<span class="stringliteral">"pitt_evt_class"</span>,&amp;pitt_evt_class,<span class="stringliteral">"pitt_evt_class/I"</span>,32000);
00493   tree-&gt;Branch(<span class="stringliteral">"pitt_trk_qual"</span>,&amp;pitt_trk_qual,<span class="stringliteral">"pitt_trk_qual/I"</span>,32000);
00494   tree-&gt;Branch(<span class="stringliteral">"duvvtx"</span>,&amp;duvvtx,<span class="stringliteral">"duvvtx/I"</span>,32000);
00495 
00496   tree-&gt;Branch(<span class="stringliteral">"pid0"</span>,&amp;pid0,<span class="stringliteral">"pid0/F"</span>,32000);
00497   tree-&gt;Branch(<span class="stringliteral">"pid1"</span>,&amp;pid1,<span class="stringliteral">"pid1/F"</span>,32000);
00498   tree-&gt;Branch(<span class="stringliteral">"pid2"</span>,&amp;pid2,<span class="stringliteral">"pid2/F"</span>,32000);
00499   tree-&gt;Branch(<span class="stringliteral">"pass"</span>,&amp;pass,<span class="stringliteral">"pass/I"</span>,32000);
00500 
00501   <span class="keywordtype">float</span> med_qe_pid;
00502   <span class="keywordtype">int</span> med_qe_pass;
00503   tree-&gt;Branch(<span class="stringliteral">"med_qe_pid"</span>,&amp;med_qe_pid,<span class="stringliteral">"med_qe_pid/F"</span>,32000);
00504   tree-&gt;Branch(<span class="stringliteral">"med_qe_pass"</span>,&amp;med_qe_pass,<span class="stringliteral">"med_qe_pass/I"</span>,32000);
00505 
00506   <span class="keywordtype">double</span> niki_cc_pid;
00507   tree-&gt;Branch(<span class="stringliteral">"niki_cc_pid"</span>,&amp;niki_cc_pid,<span class="stringliteral">"niki_cc_pid/D"</span>,32000);
00508   <span class="keywordtype">float</span> dave_cc_pid;
00509   tree-&gt;Branch(<span class="stringliteral">"dave_cc_pid"</span>,&amp;dave_cc_pid,<span class="stringliteral">"dave_cc_pid/F"</span>,32000);
00510 
00511 
00512   tree-&gt;Branch(<span class="stringliteral">"reco_enu"</span>,&amp;reco_enu,<span class="stringliteral">"reco_enu/F"</span>,32000);
00513   tree-&gt;Branch(<span class="stringliteral">"reco_emu"</span>,&amp;reco_emu,<span class="stringliteral">"reco_emu/F"</span>,32000);
00514   tree-&gt;Branch(<span class="stringliteral">"reco_mushw"</span>,&amp;reco_mushw,<span class="stringliteral">"reco_mushw/F"</span>,32000);
00515   tree-&gt;Branch(<span class="stringliteral">"reco_eshw"</span>,&amp;reco_eshw,<span class="stringliteral">"reco_eshw/F"</span>,32000);
00516   tree-&gt;Branch(<span class="stringliteral">"reco_wtd_eshw"</span>,&amp;reco_wtd_eshw,<span class="stringliteral">"reco_wtd_eshw/F"</span>,32000);
00517   tree-&gt;Branch(<span class="stringliteral">"reco_vtx_eshw"</span>,&amp;reco_vtx_eshw,<span class="stringliteral">"reco_vtx_eshw/F"</span>,32000);
00518   tree-&gt;Branch(<span class="stringliteral">"reco_vtx_wtd_eshw"</span>,&amp;reco_vtx_wtd_eshw,<span class="stringliteral">"reco_vtx_wtd_eshw/F"</span>,32000);
00519   tree-&gt;Branch(<span class="stringliteral">"reco_eshw_uncorr"</span>,&amp;reco_eshw_uncorr,<span class="stringliteral">"reco_eshw_uncorr/F"</span>,32000);
00520   tree-&gt;Branch(<span class="stringliteral">"reco_wtd_eshw_uncorr"</span>,&amp;reco_wtd_eshw_uncorr,<span class="stringliteral">"reco_wtd_eshw_uncorr/F"</span>,32000);
00521  
00522   tree-&gt;Branch(<span class="stringliteral">"reco_dircosneu"</span>,&amp;reco_dircosneu,<span class="stringliteral">"reco_dircosneu/F"</span>,32000);
00523   tree-&gt;Branch(<span class="stringliteral">"reco_dircosx"</span>,&amp;reco_dircosx,<span class="stringliteral">"reco_dircosx/F"</span>,32000);
00524   tree-&gt;Branch(<span class="stringliteral">"reco_dircosy"</span>,&amp;reco_dircosy,<span class="stringliteral">"reco_dircosy/F"</span>,32000);
00525   tree-&gt;Branch(<span class="stringliteral">"reco_dircosz"</span>,&amp;reco_dircosz,<span class="stringliteral">"reco_dircosz/F"</span>,32000);
00526 
00527   tree-&gt;Branch(<span class="stringliteral">"reco_vtxx"</span>,&amp;reco_vtxx,<span class="stringliteral">"reco_vtxx/F"</span>,32000);
00528   tree-&gt;Branch(<span class="stringliteral">"reco_vtxy"</span>,&amp;reco_vtxy,<span class="stringliteral">"reco_vtxy/F"</span>,32000);
00529   tree-&gt;Branch(<span class="stringliteral">"reco_vtxz"</span>,&amp;reco_vtxz,<span class="stringliteral">"reco_vtxz/F"</span>,32000);
00530   tree-&gt;Branch(<span class="stringliteral">"reco_vtxr"</span>,&amp;reco_vtxr,<span class="stringliteral">"reco_vtxr/F"</span>,32000);
00531 
00532   tree-&gt;Branch(<span class="stringliteral">"reco_trk_vtxx"</span>,&amp;reco_trk_vtxx,<span class="stringliteral">"reco_trk_vtxx/F"</span>,32000);
00533   tree-&gt;Branch(<span class="stringliteral">"reco_trk_vtxy"</span>,&amp;reco_trk_vtxy,<span class="stringliteral">"reco_trk_vtxy/F"</span>,32000);
00534   tree-&gt;Branch(<span class="stringliteral">"reco_trk_vtxz"</span>,&amp;reco_trk_vtxz,<span class="stringliteral">"reco_trk_vtxz/F"</span>,32000);
00535   tree-&gt;Branch(<span class="stringliteral">"reco_trk_vtxr"</span>,&amp;reco_trk_vtxr,<span class="stringliteral">"reco_trk_vtxr/F"</span>,32000);
00536 
00537   tree-&gt;Branch(<span class="stringliteral">"reco_shw_vtxx"</span>,&amp;reco_shw_vtxx,<span class="stringliteral">"reco_shw_vtxx/F"</span>,32000);
00538   tree-&gt;Branch(<span class="stringliteral">"reco_shw_vtxy"</span>,&amp;reco_shw_vtxy,<span class="stringliteral">"reco_shw_vtxy/F"</span>,32000);
00539   tree-&gt;Branch(<span class="stringliteral">"reco_shw_vtxz"</span>,&amp;reco_shw_vtxz,<span class="stringliteral">"reco_shw_vtxz/F"</span>,32000);
00540   <span class="comment">//  tree-&gt;Branch("reco_shw_vtxr",&amp;reco_shw_vtxr,"reco_shw_vtxr/F",32000);</span>
00541 
00542   tree-&gt;Branch(<span class="stringliteral">"reco_trk_endx"</span>,&amp;reco_trk_endx,<span class="stringliteral">"reco_trk_endx/F"</span>,32000);
00543   tree-&gt;Branch(<span class="stringliteral">"reco_trk_endy"</span>,&amp;reco_trk_endy,<span class="stringliteral">"reco_trk_endy/F"</span>,32000);
00544   tree-&gt;Branch(<span class="stringliteral">"reco_trk_endz"</span>,&amp;reco_trk_endz,<span class="stringliteral">"reco_trk_endz/F"</span>,32000);
00545   tree-&gt;Branch(<span class="stringliteral">"reco_trk_endr"</span>,&amp;reco_trk_endr,<span class="stringliteral">"reco_trk_endr/F"</span>,32000);
00546 
00547   tree-&gt;Branch(<span class="stringliteral">"evt_nplanes"</span>,&amp;evt_nplanes,<span class="stringliteral">"evt_nplanes/I"</span>,32000);
00548   tree-&gt;Branch(<span class="stringliteral">"trk_nplanes"</span>,&amp;trk_nplanes,<span class="stringliteral">"trk_nplanes/I"</span>,32000);
00549   tree-&gt;Branch(<span class="stringliteral">"slc_nplanes"</span>,&amp;slc_nplanes,<span class="stringliteral">"slc_nplanes/I"</span>,32000);
00550   tree-&gt;Branch(<span class="stringliteral">"shw_nplanes_cut"</span>,&amp;shw_nplanes_cut,<span class="stringliteral">"shw_nplanes_cut/I"</span>,32000);
00551   tree-&gt;Branch(<span class="stringliteral">"shw_nplanes_raw"</span>,&amp;shw_nplanes_raw,<span class="stringliteral">"shw_nplanes_raw/I"</span>,32000);
00552 
00553   tree-&gt;Branch(<span class="stringliteral">"shw_ph_cut"</span>,&amp;shw_ph_cut,<span class="stringliteral">"shw_ph_cut/F"</span>,32000);
00554   tree-&gt;Branch(<span class="stringliteral">"shw_ph_raw"</span>,&amp;shw_ph_raw,<span class="stringliteral">"shw_ph_raw/F"</span>,32000);
00555 
00556 
00557   tree-&gt;Branch(<span class="stringliteral">"evt_nstrips"</span>,&amp;evt_nstrips,<span class="stringliteral">"evt_nstrips/I"</span>,32000);
00558   tree-&gt;Branch(<span class="stringliteral">"trk_nstrips"</span>,&amp;trk_nstrips,<span class="stringliteral">"trk_nstrips/I"</span>,32000);
00559   tree-&gt;Branch(<span class="stringliteral">"slc_nstrips"</span>,&amp;slc_nstrips,<span class="stringliteral">"slc_nstrips/I"</span>,32000);
00560 
00561   tree-&gt;Branch(<span class="stringliteral">"reco_y"</span>,&amp;reco_y,<span class="stringliteral">"reco_y/F"</span>,32000);
00562   tree-&gt;Branch(<span class="stringliteral">"reco_Q2"</span>,&amp;reco_Q2,<span class="stringliteral">"reco_Q2/F"</span>,32000);
00563   tree-&gt;Branch(<span class="stringliteral">"reco_x"</span>,&amp;reco_x,<span class="stringliteral">"reco_x/F"</span>,32000);
00564   tree-&gt;Branch(<span class="stringliteral">"reco_W2"</span>,&amp;reco_W2,<span class="stringliteral">"reco_W2/F"</span>,32000);
00565 
00566   tree-&gt;Branch(<span class="stringliteral">"reco_qe_enu"</span>,&amp;reco_qe_enu,<span class="stringliteral">"reco_qe_enu/F"</span>,32000);
00567   tree-&gt;Branch(<span class="stringliteral">"reco_qe_q2"</span>,&amp;reco_qe_q2,<span class="stringliteral">"reco_qe_q2/F"</span>,32000);
00568 
00569   tree-&gt;Branch(<span class="stringliteral">"evtlength"</span>,&amp;evtlength,<span class="stringliteral">"evtlength/F"</span>,32000);
00570   tree-&gt;Branch(<span class="stringliteral">"trklength"</span>,&amp;trklength,<span class="stringliteral">"trklength/F"</span>,32000);
00571   tree-&gt;Branch(<span class="stringliteral">"shwlength"</span>,&amp;shwlength,<span class="stringliteral">"shwlength/F"</span>,32000);
00572   tree-&gt;Branch(<span class="stringliteral">"ntrklike"</span>,&amp;ntrklike,<span class="stringliteral">"ntrklike/I"</span>,32000);
00573   tree-&gt;Branch(<span class="stringliteral">"trkend"</span>,&amp;trkend,<span class="stringliteral">"trkend/I"</span>,32000);
00574   tree-&gt;Branch(<span class="stringliteral">"trkendu"</span>,&amp;trkendu,<span class="stringliteral">"trkendu/I"</span>,32000);
00575   tree-&gt;Branch(<span class="stringliteral">"trkendv"</span>,&amp;trkendv,<span class="stringliteral">"trkendv/I"</span>,32000);
00576   tree-&gt;Branch(<span class="stringliteral">"shwbeg"</span>,&amp;shwbeg,<span class="stringliteral">"shwbeg/I"</span>,32000);
00577   tree-&gt;Branch(<span class="stringliteral">"shwend"</span>,&amp;shwend,<span class="stringliteral">"shwend/I"</span>,32000);
00578 
00579 
00580   Int_t trknstp;
00581   tree-&gt;Branch(<span class="stringliteral">"trkmomrange"</span>,&amp;trkmomrange,<span class="stringliteral">"trkmomrange/F"</span>,32000);
00582   tree-&gt;Branch(<span class="stringliteral">"trkqp"</span>,&amp;trkqp,<span class="stringliteral">"trkqp/F"</span>,32000);
00583   tree-&gt;Branch(<span class="stringliteral">"trkeqp"</span>,&amp;trkeqp,<span class="stringliteral">"trkeqp/F"</span>,32000);
00584   tree-&gt;Branch(<span class="stringliteral">"trkphfrac"</span>,&amp;trkphfrac,<span class="stringliteral">"trkphfrac/F"</span>,32000);
00585   tree-&gt;Branch(<span class="stringliteral">"trkphplane"</span>,&amp;trkphplane,<span class="stringliteral">"trkphplane/F"</span>,32000);
00586   tree-&gt;Branch(<span class="stringliteral">"trkchi2"</span>,&amp;trkchi2,<span class="stringliteral">"trkchi2/F"</span>,32000);
00587   tree-&gt;Branch(<span class="stringliteral">"trkndf"</span>,&amp;trkndf,<span class="stringliteral">"trkndf/I"</span>,32000);
00588   tree-&gt;Branch(<span class="stringliteral">"trknstp"</span>,&amp;trknstp,<span class="stringliteral">"trknstp/I"</span>,32000);
00589 
00590 
00591   <span class="comment">// vertex track back variables (described above and in code)</span>
00592   tree-&gt;Branch(<span class="stringliteral">"nvsi"</span>, &amp;nvsi, <span class="stringliteral">"nvsi/I"</span>);
00593   tree-&gt;Branch(<span class="stringliteral">"nvsevt"</span>, &amp;nvsevt, <span class="stringliteral">"nvsevt/I"</span>);
00594   tree-&gt;Branch(<span class="stringliteral">"nvsd"</span>, &amp;nvsd, <span class="stringliteral">"nvsd/F"</span>);
00595   tree-&gt;Branch(<span class="stringliteral">"nvst"</span>, &amp;nvst, <span class="stringliteral">"nvst/F"</span>);
00596   tree-&gt;Branch(<span class="stringliteral">"nvsp"</span>, &amp;nvsp, <span class="stringliteral">"nvsp/F"</span>);
00597   tree-&gt;Branch(<span class="stringliteral">"nvti"</span>, &amp;nvti, <span class="stringliteral">"nvti/I"</span>);
00598   tree-&gt;Branch(<span class="stringliteral">"nvtevt"</span>, &amp;nvtevt, <span class="stringliteral">"nvtevt/I"</span>);
00599   tree-&gt;Branch(<span class="stringliteral">"nvtd"</span>, &amp;nvtd, <span class="stringliteral">"nvtd/F"</span>);
00600   tree-&gt;Branch(<span class="stringliteral">"nvtt"</span>, &amp;nvtt, <span class="stringliteral">"nvtt/F"</span>);
00601   tree-&gt;Branch(<span class="stringliteral">"nvtp"</span>, &amp;nvtp, <span class="stringliteral">"nvtp/F"</span>);
00602   <span class="comment">/*</span>
00603 <span class="comment">  tree-&gt;Branch("bvsi", &amp;bvsi, "bvsi/I");</span>
00604 <span class="comment">  tree-&gt;Branch("bvsevt", &amp;bvsevt, "bvsevt/I");</span>
00605 <span class="comment">  tree-&gt;Branch("bvsd", &amp;bvsd, "bvsd/F");</span>
00606 <span class="comment">  tree-&gt;Branch("bvst", &amp;bvst, "bvst/F");</span>
00607 <span class="comment">  tree-&gt;Branch("bvsp", &amp;bvsp, "bvsp/F");</span>
00608 <span class="comment">  tree-&gt;Branch("bvti", &amp;bvti, "bvti/I");</span>
00609 <span class="comment">  tree-&gt;Branch("bvtevt", &amp;bvtevt, "bvtevt/I");</span>
00610 <span class="comment">  tree-&gt;Branch("bvtd", &amp;bvtd, "bvtd/F");</span>
00611 <span class="comment">  tree-&gt;Branch("bvtt", &amp;bvtt, "bvtt/F");</span>
00612 <span class="comment">  tree-&gt;Branch("bvtp", &amp;bvtp, "bvtp/F");</span>
00613 <span class="comment">  */</span>
00614 
00615   tree-&gt;Branch(<span class="stringliteral">"evtph"</span>, &amp;evtph, <span class="stringliteral">"evtph/F"</span>);
00616   tree-&gt;Branch(<span class="stringliteral">"evtphgev"</span>, &amp;evtphgev, <span class="stringliteral">"evtphgev/F"</span>);
00617   
00618   tree-&gt;Branch(<span class="stringliteral">"evtsigfull"</span>, &amp;evtsigfull, <span class="stringliteral">"evtsigfull/F"</span>);
00619   tree-&gt;Branch(<span class="stringliteral">"evtsigpart"</span>, &amp;evtsigpart, <span class="stringliteral">"evtsigpart/F"</span>);
00620 
00621   tree-&gt;Branch(<span class="stringliteral">"trksigfull"</span>, &amp;trksigfull, <span class="stringliteral">"trksigfull/F"</span>);
00622   tree-&gt;Branch(<span class="stringliteral">"trksigpart"</span>, &amp;trksigpart, <span class="stringliteral">"trksigpart/F"</span>);
00623 
00624   tree-&gt;Branch(<span class="stringliteral">"evttimemin"</span>,&amp;evttimemin,<span class="stringliteral">"evttimemin/D"</span>);
00625   tree-&gt;Branch(<span class="stringliteral">"evttimemax"</span>,&amp;evttimemax,<span class="stringliteral">"evttimemax/D"</span>);
00626   tree-&gt;Branch(<span class="stringliteral">"evttimeln"</span>,&amp;evttimeln,<span class="stringliteral">"evttimeln/D"</span>);
00627 
00628   tree-&gt;Branch(<span class="stringliteral">"evttimeminphc"</span>,&amp;evttimeminphc,<span class="stringliteral">"evttimeminphc/D"</span>);
00629   tree-&gt;Branch(<span class="stringliteral">"evttimemaxphc"</span>,&amp;evttimemaxphc,<span class="stringliteral">"evttimemaxphc/D"</span>);
00630   tree-&gt;Branch(<span class="stringliteral">"evttimelnphc"</span>,&amp;evttimelnphc,<span class="stringliteral">"evttimelnphc/D"</span>);
00631 
00632   tree-&gt;Branch(<span class="stringliteral">"earlywph"</span>,&amp;earlywph,<span class="stringliteral">"earlywph/F"</span>);
00633   tree-&gt;Branch(<span class="stringliteral">"earlywphpw"</span>,&amp;earlywphpw,<span class="stringliteral">"earlywphpw/F"</span>);
00634   tree-&gt;Branch(<span class="stringliteral">"earlywphsphere"</span>,&amp;earlywphsphere,<span class="stringliteral">"earlywphsphere/F"</span>);
00635   tree-&gt;Branch(<span class="stringliteral">"ph1000"</span>,&amp;ph1000,<span class="stringliteral">"ph1000/F"</span>);
00636   tree-&gt;Branch(<span class="stringliteral">"ph500"</span>,&amp;ph500,<span class="stringliteral">"ph500/F"</span>);
00637   tree-&gt;Branch(<span class="stringliteral">"ph100"</span>,&amp;ph100,<span class="stringliteral">"ph100/F"</span>);
00638   tree-&gt;Branch(<span class="stringliteral">"lateph1000"</span>,&amp;lateph1000,<span class="stringliteral">"lateph1000/F"</span>);
00639   tree-&gt;Branch(<span class="stringliteral">"lateph500"</span>,&amp;lateph500,<span class="stringliteral">"lateph500/F"</span>);
00640   tree-&gt;Branch(<span class="stringliteral">"lateph100"</span>,&amp;lateph100,<span class="stringliteral">"lateph100/F"</span>);
00641   tree-&gt;Branch(<span class="stringliteral">"lateph50"</span>,&amp;lateph50,<span class="stringliteral">"lateph50/F"</span>);
00642   Int_t largest_event;
00643   tree-&gt;Branch(<span class="stringliteral">"largest_event"</span>,&amp;largest_event,<span class="stringliteral">"largest_event/I"</span>);
00644 
00645   tree-&gt;Branch(<span class="stringliteral">"nduprs"</span>,&amp;nduprs,<span class="stringliteral">"ndubrs/I"</span>);
00646   tree-&gt;Branch(<span class="stringliteral">"dupphrs"</span>,&amp;dupphrs,<span class="stringliteral">"dupphrs/F"</span>);
00647 
00648   tree-&gt;Branch(<span class="stringliteral">"nss"</span>, nss, <span class="stringliteral">"nss[6]/I"</span>);
00649   tree-&gt;Branch(<span class="stringliteral">"ess"</span>, ess, <span class="stringliteral">"ess[6]/F"</span>);
00650   tree-&gt;Branch(<span class="stringliteral">"ntotss"</span>, &amp;ntotss, <span class="stringliteral">"ntotss/I"</span>);
00651 
00652   Float_t etu, etv, elu, elv;
00653   tree-&gt;Branch(<span class="stringliteral">"etu"</span>, &amp;etu, <span class="stringliteral">"etu/F"</span>); <span class="comment">// transveres u and v energy</span>
00654   tree-&gt;Branch(<span class="stringliteral">"etv"</span>, &amp;etv, <span class="stringliteral">"etv/F"</span>); <span class="comment">// uses subshowers</span>
00655   tree-&gt;Branch(<span class="stringliteral">"elu"</span>, &amp;elu, <span class="stringliteral">"elu/F"</span>); <span class="comment">// longitudinal energy</span>
00656   tree-&gt;Branch(<span class="stringliteral">"elv"</span>, &amp;elv, <span class="stringliteral">"elv/F"</span>);
00657 
00658   Float_t swu,swv,wswu,wswv; 
00659   tree-&gt;Branch(<span class="stringliteral">"swu"</span>,&amp;swu, <span class="stringliteral">"swu/F"</span>);<span class="comment">// shower width in u</span>
00660   tree-&gt;Branch(<span class="stringliteral">"swv"</span>,&amp;swv, <span class="stringliteral">"swv/F"</span>);<span class="comment">// shower width in u</span>
00661   tree-&gt;Branch(<span class="stringliteral">"wswu"</span>,&amp;wswu, <span class="stringliteral">"wswu/F"</span>);<span class="comment">// shower width in u</span>
00662   tree-&gt;Branch(<span class="stringliteral">"wswv"</span>,&amp;wswv, <span class="stringliteral">"wswv/F"</span>);<span class="comment">// shower width in u</span>
00663 
00664   <span class="comment">// beam energy weights</span>
00665   <span class="comment">// 1/E flux, le, z=050, z=100, z=200, z=250 cm</span>
00666   Float_t bec_inve, bec_le, bec_050, bec_100, bec_200, bec_250;
00667   
00668   tree-&gt;Branch(<span class="stringliteral">"bec_inve"</span>, &amp;bec_inve, <span class="stringliteral">"bec_inve/F"</span>);
00669   tree-&gt;Branch(<span class="stringliteral">"bec_le"</span>, &amp;bec_le, <span class="stringliteral">"bec_le/F"</span>);
00670   tree-&gt;Branch(<span class="stringliteral">"bec_050"</span>, &amp;bec_050, <span class="stringliteral">"bec_050/F"</span>);
00671   tree-&gt;Branch(<span class="stringliteral">"bec_100"</span>, &amp;bec_100, <span class="stringliteral">"bec_100/F"</span>);
00672   tree-&gt;Branch(<span class="stringliteral">"bec_200"</span>, &amp;bec_200, <span class="stringliteral">"bec_200/F"</span>);
00673   tree-&gt;Branch(<span class="stringliteral">"bec_250"</span>, &amp;bec_250, <span class="stringliteral">"bec_250/F"</span>);
00674 
00675   <span class="comment">//li time</span>
00676   tree-&gt;Branch(<span class="stringliteral">"litime"</span>,&amp;litime,<span class="stringliteral">"litime/D"</span>);
00677   Int_t rc_boundary;
00678   tree-&gt;Branch(<span class="stringliteral">"rc_boundary"</span>,&amp;rc_boundary,<span class="stringliteral">"rc_boundary/I"</span>);
00679   tree-&gt;Branch(<span class="stringliteral">"is_li_sieve"</span>,&amp;is_li_sieve,<span class="stringliteral">"is_li_sieve/I"</span>);
00680 
00681   <span class="comment">//demux status</span>
00682   tree-&gt;Branch(<span class="stringliteral">"dmx_stat"</span>,&amp;dmx_stat,<span class="stringliteral">"dmx_stat/b"</span>);
00683   tree-&gt;Branch(<span class="stringliteral">"lowphrat"</span>,&amp;lowphrat,<span class="stringliteral">"lowphrat/F"</span>);
00684   <span class="comment">// David's FD data quality cut</span>
00685   tree-&gt;Branch(<span class="stringliteral">"dp_fd_quality"</span>,&amp;dp_fd_quality,<span class="stringliteral">"dp_fd_quality/I"</span>);
00686 
00687   <span class="comment">//anti numu selection</span>
00688   <span class="keywordtype">float</span> anumupass;
00689   tree-&gt;Branch(<span class="stringliteral">"anumupass"</span>,&amp;anumupass,<span class="stringliteral">"anumupass/F"</span>);
00690 
00691   <span class="comment">//rustem cc pid</span>
00692   <span class="keywordtype">float</span> rustem_cc_pid;
00693   tree-&gt;Branch(<span class="stringliteral">"rustem_cc_pid"</span>,&amp;rustem_cc_pid,<span class="stringliteral">"rustem_cc_pid/F"</span>);
00694 
00695   <span class="comment">//andy cc pid</span>
00696   <span class="keywordtype">float</span> andy_cc_pid;
00697   tree-&gt;Branch(<span class="stringliteral">"andy_cc_pid"</span>,&amp;andy_cc_pid,<span class="stringliteral">"andy_cc_pid/F"</span>);
00698   <span class="comment">//andy's variables</span>
00699   <span class="keywordtype">float</span> abid_costheta;
00700   <span class="keywordtype">float</span> abid_eventenergy;      
00701   <span class="keywordtype">float</span> abid_trackcharge;   
00702   <span class="keywordtype">float</span> abid_trackenergy;      
00703   <span class="keywordtype">float</span> abid_tracklikeplanes;  
00704   <span class="keywordtype">float</span> abid_trackphfrac;      
00705   <span class="keywordtype">float</span> abid_trackphmean;      
00706   <span class="keywordtype">float</span> abid_trackqpsigmaqp;   
00707   <span class="keywordtype">float</span> abid_y;
00708   tree-&gt;Branch(<span class="stringliteral">"abid_costheta"</span>, &amp;abid_costheta, <span class="stringliteral">"abid_costheta/F"</span>);
00709   tree-&gt;Branch(<span class="stringliteral">"abid_eventenergy"</span>, &amp;abid_eventenergy, <span class="stringliteral">"abid_eventenergy/F"</span>);
00710   tree-&gt;Branch(<span class="stringliteral">"abid_trackcharge"</span>, &amp;abid_trackcharge, <span class="stringliteral">"abid_trackcharge/I"</span>);
00711   tree-&gt;Branch(<span class="stringliteral">"abid_trackenergy"</span>, &amp;abid_trackenergy, <span class="stringliteral">"abid_trackenergy/i"</span>);
00712   tree-&gt;Branch(<span class="stringliteral">"abid_tracklikeplanes"</span>, &amp;abid_tracklikeplanes, <span class="stringliteral">"abid_tracklikeplanes/I"</span>);
00713   tree-&gt;Branch(<span class="stringliteral">"abid_trackphfrac"</span>, &amp;abid_trackphfrac, <span class="stringliteral">"abid_trackphfrac/F"</span>);
00714   tree-&gt;Branch(<span class="stringliteral">"abid_trackphmean"</span>, &amp;abid_trackphmean, <span class="stringliteral">"abid_trackphmean/F"</span>);
00715   tree-&gt;Branch(<span class="stringliteral">"abid_trackqpsigmaqp"</span>, &amp;abid_trackqpsigmaqp, <span class="stringliteral">"abid_trackqpsigmaqp/F"</span>);
00716   tree-&gt;Branch(<span class="stringliteral">"abid_y"</span>, &amp;abid_y, <span class="stringliteral">"abid_y/F"</span>);
00717                 
00718 
00719   <span class="keywordtype">float</span> ro_knn_01;
00720   <span class="keywordtype">float</span> ro_knn_10;
00721   <span class="keywordtype">float</span> ro_knn_20;
00722   <span class="keywordtype">float</span> ro_knn_40;
00723   tree-&gt;Branch(<span class="stringliteral">"ro_knn_01"</span>,&amp;ro_knn_01,<span class="stringliteral">"ro_knn01/F"</span>);
00724   tree-&gt;Branch(<span class="stringliteral">"ro_knn_10"</span>,&amp;ro_knn_10,<span class="stringliteral">"ro_knn10/F"</span>);
00725   tree-&gt;Branch(<span class="stringliteral">"ro_knn_20"</span>,&amp;ro_knn_20,<span class="stringliteral">"ro_knn20/F"</span>);
00726   tree-&gt;Branch(<span class="stringliteral">"ro_knn_40"</span>,&amp;ro_knn_40,<span class="stringliteral">"ro_knn40/F"</span>);
00727 
00728   <span class="comment">// beam monitoring variables</span>
00729   Double_t hbw,vbw,hpos1,vpos1,hpos2,vpos2,hornI,closestspill,dt_beam_mon;
00730   <span class="comment">//goodbeam==1 if spill meets criteria defined below </span>
00731   <span class="comment">//(see the line where goodbeam gets set)</span>
00732   <span class="comment">//beamcnf is a unsigned int as defined in BeamMonSpill::StatusBits</span>
00733   <span class="comment">//  UInt_t beamcnf;</span>
00734   <span class="comment">//now beamcnf is defined by BeamType in conventions</span>
00735   <a class="code" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a> beamcnf;
00736   <span class="comment">//leaving nuTarZ in until we've phased out the summary ntuples</span>
00737   Double_t nuTarZ;
00738   <span class="comment">//goodbeam==0 if spill doesnt meet these criteria</span>
00739   Int_t goodbeam;
00740 
00741   <span class="comment">//these next variables weren't available in the old beam monitoring ntuples</span>
00742   UInt_t horn_on, target_in, n_batches;
00743   Float_t tor101, tr101d, tortgt, trtgtd;
00744   Float_t hadmon, mumon1, mumon2, mumon3;
00745   Float_t hposbyspill[6];
00746   Float_t vposbyspill[6];
00747   Float_t bibyspill[6];
00748   <span class="keywordtype">int</span> batchnumber;
00749   tree-&gt;Branch(<span class="stringliteral">"hbw"</span>,&amp;hbw,<span class="stringliteral">"hbw/D"</span>);
00750   tree-&gt;Branch(<span class="stringliteral">"vbw"</span>,&amp;vbw,<span class="stringliteral">"vbw/D"</span>);
00751   tree-&gt;Branch(<span class="stringliteral">"hpos1"</span>,&amp;hpos1,<span class="stringliteral">"hpos1/D"</span>);
00752   tree-&gt;Branch(<span class="stringliteral">"vpos1"</span>,&amp;vpos1,<span class="stringliteral">"vpos1/D"</span>);
00753   tree-&gt;Branch(<span class="stringliteral">"hpos2"</span>,&amp;hpos2,<span class="stringliteral">"hpos2/D"</span>);
00754   tree-&gt;Branch(<span class="stringliteral">"vpos2"</span>,&amp;vpos2,<span class="stringliteral">"vpos2/D"</span>);
00755   tree-&gt;Branch(<span class="stringliteral">"hposbyspill"</span>,hposbyspill,<span class="stringliteral">"hposbyspill[6]/F"</span>);
00756   tree-&gt;Branch(<span class="stringliteral">"vposbyspill"</span>,vposbyspill,<span class="stringliteral">"vposbyspill[6]/F"</span>);
00757   tree-&gt;Branch(<span class="stringliteral">"bibyspill"</span>,bibyspill,<span class="stringliteral">"bibyspill[6]/F"</span>);
00758   tree-&gt;Branch(<span class="stringliteral">"hornI"</span>,&amp;hornI,<span class="stringliteral">"hornI/D"</span>);
00759   tree-&gt;Branch(<span class="stringliteral">"closestspill"</span>,&amp;closestspill,<span class="stringliteral">"closestspill/D"</span>);
00760   tree-&gt;Branch(<span class="stringliteral">"dt_beam_mon"</span>,&amp;dt_beam_mon,<span class="stringliteral">"dt_beam_mon/D"</span>);
00761   tree-&gt;Branch(<span class="stringliteral">"beamcnf"</span>,&amp;beamcnf,<span class="stringliteral">"beamcnf/i"</span>);
00762   tree-&gt;Branch(<span class="stringliteral">"nuTarZ"</span>,&amp;nuTarZ,<span class="stringliteral">"nuTarZ/D"</span>);
00763   tree-&gt;Branch(<span class="stringliteral">"goodbeam"</span>,&amp;goodbeam,<span class="stringliteral">"goodbeam/I"</span>);
00764   tree-&gt;Branch(<span class="stringliteral">"horn_on"</span>,&amp;horn_on,<span class="stringliteral">"horn_on/i"</span>);
00765   tree-&gt;Branch(<span class="stringliteral">"target_in"</span>,&amp;target_in,<span class="stringliteral">"target_in/i"</span>);
00766   tree-&gt;Branch(<span class="stringliteral">"n_batches"</span>,&amp;n_batches,<span class="stringliteral">"n_batches/i"</span>);
00767   tree-&gt;Branch(<span class="stringliteral">"tor101"</span>,&amp;tor101,<span class="stringliteral">"tor101/F"</span>);
00768   tree-&gt;Branch(<span class="stringliteral">"tr101d"</span>,&amp;tr101d,<span class="stringliteral">"tr101d/F"</span>);
00769   tree-&gt;Branch(<span class="stringliteral">"tortgt"</span>,&amp;tortgt,<span class="stringliteral">"tortgt/F"</span>);
00770   tree-&gt;Branch(<span class="stringliteral">"trtgtd"</span>,&amp;trtgtd,<span class="stringliteral">"trtgtd/F"</span>);
00771   tree-&gt;Branch(<span class="stringliteral">"hadmon"</span>,&amp;hadmon,<span class="stringliteral">"hadmon/F"</span>);
00772   tree-&gt;Branch(<span class="stringliteral">"mumon1"</span>,&amp;mumon1,<span class="stringliteral">"mumon1/F"</span>);
00773   tree-&gt;Branch(<span class="stringliteral">"mumon2"</span>,&amp;mumon2,<span class="stringliteral">"mumon2/F"</span>);
00774   tree-&gt;Branch(<span class="stringliteral">"mumon3"</span>,&amp;mumon3,<span class="stringliteral">"mumon3/F"</span>);
00775   tree-&gt;Branch(<span class="stringliteral">"batchnumber"</span>,&amp;batchnumber,<span class="stringliteral">"batchnumber/I"</span>);
00776 
00777   <span class="comment">//coil status</span>
00778   Short_t coil_is_ok;
00779   Short_t coil_is_reverse;
00780   Short_t coil_stat;
00781   Float_t coil_current;
00782 
00783   tree-&gt;Branch(<span class="stringliteral">"coil_is_ok"</span>,&amp;coil_is_ok,<span class="stringliteral">"coil_is_ok/S"</span>);
00784   tree-&gt;Branch(<span class="stringliteral">"coil_is_reverse"</span>,&amp;coil_is_reverse,<span class="stringliteral">"coil_is_reverse/S"</span>);
00785   tree-&gt;Branch(<span class="stringliteral">"coil_stat"</span>,&amp;coil_stat,<span class="stringliteral">"coil_stat/S"</span>);
00786   tree-&gt;Branch(<span class="stringliteral">"coil_current"</span>,&amp;coil_current,<span class="stringliteral">"coil_current/F"</span>);
00787 
00788   <span class="comment">//gnumiflux info</span>
00789   Int_t      fluxrun;     <span class="comment">// gnumi flux run number</span>
00790   Int_t      fluxevtno;   <span class="comment">// gnumi flux event number</span>
00791   Float_t    nudxdz;       <span class="comment">// dx/dz slope, neutrino rndm decay</span>
00792   Float_t    nudydz;       <span class="comment">// dy/dz slope, neutrino rndm decay</span>
00793   Float_t    nupz;         <span class="comment">// Pz of neutrino (GeV)  rndm decay</span>
00794   Float_t    nuenergy;     <span class="comment">// E(neutrino)    (GeV)  rndm decay</span>
00795   Float_t    nudxdznear;   <span class="comment">// dx/dz slope, neutrino NearDet center</span>
00796   Float_t    nudydznear;   <span class="comment">// dy/dz slope, neutrino NearDet center</span>
00797   Float_t    nuenergynear;    <span class="comment">// E(neutrino)    (GeV)  NearDet center</span>
00798   Float_t    nwtnear;     <span class="comment">// Weight of nu          NearDet center</span>
00799   Float_t    nudxdzfar;    <span class="comment">// dx/dz slope, neutrino FarDet center</span>
00800   Float_t    nudydzfar;    <span class="comment">// dy/dz slope, neutrino FarDet center</span>
00801   Float_t    nuenergyfar;    <span class="comment">// E(neutrino)    (GeV)  FarDet center</span>
00802   Float_t    nwtfar;      <span class="comment">// Weight of nu          FarDet center</span>
00803   Int_t      norig;       <span class="comment">// (ignore)</span>
00804   Int_t      ndecay;      <span class="comment">// Tag of decay mode</span>
00805   Int_t      ntype;       <span class="comment">// Neutrino type (translated to PDG)</span>
00806   Float_t    vx;          <span class="comment">// x vertex of hadron (cm)</span>
00807   Float_t    vy;          <span class="comment">// y vertex of hadron (cm)</span>
00808   Float_t    vz;          <span class="comment">// z vertex of hadron (cm)</span>
00809   Float_t    pdpx;        <span class="comment">// nu parent px at decay point</span>
00810   Float_t    pdpy;        <span class="comment">// nu parent py at decay point</span>
00811   Float_t    pdpz;        <span class="comment">// nu parent pz at decay point</span>
00812   Float_t    ppdxdz;      <span class="comment">// nu parent slope at production</span>
00813   Float_t    ppdydz;      <span class="comment">// nu parent slope at production</span>
00814   Float_t    pppz;        <span class="comment">// nu parent pz at production</span>
00815   Float_t    ppenergy;    <span class="comment">// nu parent energy at production</span>
00816   Int_t      ppmedium;    <span class="comment">// GEANT medium of nu parent at parent production</span>
00817   Int_t      ptype;       <span class="comment">// nu parent type (translated to PDG)</span>
00818   Float_t    ppvx;        <span class="comment">// nu parent production vtx x</span>
00819   Float_t    ppvy;        <span class="comment">// nu parent production vtx y</span>
00820   Float_t    ppvz;        <span class="comment">// nu parent production vtx z</span>
00821   Float_t    muparpx;     <span class="comment">// if parent=mu, hadron parent px</span>
00822   Float_t    muparpy;     <span class="comment">// if parent=mu, hadron parent py</span>
00823   Float_t    muparpz;     <span class="comment">// if parent=mu, hadron parent pz</span>
00824   Float_t    mupare;      <span class="comment">// if parent=mu, hadron parent energy</span>
00825   Float_t    necm;        <span class="comment">// E(nu) in parent cm</span>
00826   Float_t    nimpwt;      <span class="comment">// importance weight</span>
00827   Float_t    xpoint;      <span class="comment">// (unused)</span>
00828   Float_t    ypoint;      <span class="comment">// (unused)</span>
00829   Float_t    zpoint;      <span class="comment">// (unused)</span>
00830   Float_t    tvx;         <span class="comment">// target exit point (x) of parent</span>
00831   Float_t    tvy;         <span class="comment">// target exit point (y) of parent</span>
00832   Float_t    tvz;         <span class="comment">// target exit point (z) of parent</span>
00833   Float_t    tpx;         <span class="comment">// parent px at target exit</span>
00834   Float_t    tpy;         <span class="comment">// parent py at target exit</span>
00835   Float_t    tpz;         <span class="comment">// parent pz at target exit</span>
00836   Int_t      tptype;      <span class="comment">// parent particle type (translated to PDG)</span>
00837   Int_t      tgen;        <span class="comment">// parent generation in cascade</span>
00838 
00839   tree-&gt;Branch(<span class="stringliteral">"fluxrun"</span>,&amp;fluxrun,<span class="stringliteral">"fluxrun/I"</span>);
00840   tree-&gt;Branch(<span class="stringliteral">"fluxevtno"</span>,&amp;fluxevtno,<span class="stringliteral">"fluxevtno/I"</span>);
00841   tree-&gt;Branch(<span class="stringliteral">"nudxdz"</span>,&amp;nudxdz,<span class="stringliteral">"nudxdz/F"</span>);
00842   tree-&gt;Branch(<span class="stringliteral">"nudydz"</span>,&amp;nudydz,<span class="stringliteral">"nudydz/F"</span>);
00843   tree-&gt;Branch(<span class="stringliteral">"nupz"</span>,&amp;nupz,<span class="stringliteral">"nupz/F"</span>);
00844   tree-&gt;Branch(<span class="stringliteral">"nuenergy"</span>,&amp;nuenergy,<span class="stringliteral">"nuenergy/F"</span>);
00845   tree-&gt;Branch(<span class="stringliteral">"nudxdznear"</span>,&amp;nudxdznear,<span class="stringliteral">"nudxdznear/F"</span>);
00846   tree-&gt;Branch(<span class="stringliteral">"nudydznear"</span>,&amp;nudydznear,<span class="stringliteral">"nudydznear/F"</span>);
00847   tree-&gt;Branch(<span class="stringliteral">"nuenergynear"</span>,&amp;nuenergynear,<span class="stringliteral">"nuenergynear/F"</span>);
00848   tree-&gt;Branch(<span class="stringliteral">"nwtnear"</span>,&amp;nwtnear,<span class="stringliteral">"nwtnear/F"</span>);
00849   tree-&gt;Branch(<span class="stringliteral">"nudxdzfar"</span>,&amp;nudxdzfar,<span class="stringliteral">"nudxdzfar/F"</span>);
00850   tree-&gt;Branch(<span class="stringliteral">"nudydzfar"</span>,&amp;nudydzfar,<span class="stringliteral">"nudydzfar/F"</span>);
00851   tree-&gt;Branch(<span class="stringliteral">"nuenergyfar"</span>,&amp;nuenergyfar,<span class="stringliteral">"nuenergyfar/F"</span>);
00852   tree-&gt;Branch(<span class="stringliteral">"nwtfar"</span>,&amp;nwtfar,<span class="stringliteral">"nwtfar/F"</span>);
00853   tree-&gt;Branch(<span class="stringliteral">"norig"</span>,&amp;norig,<span class="stringliteral">"norig/I"</span>);
00854   tree-&gt;Branch(<span class="stringliteral">"ndecay"</span>,&amp;ndecay,<span class="stringliteral">"ndecay/I"</span>);
00855   tree-&gt;Branch(<span class="stringliteral">"ntype"</span>,&amp;ntype,<span class="stringliteral">"ntype/I"</span>);
00856   tree-&gt;Branch(<span class="stringliteral">"vx"</span>,&amp;vx,<span class="stringliteral">"vx/F"</span>);
00857   tree-&gt;Branch(<span class="stringliteral">"vy"</span>,&amp;vy,<span class="stringliteral">"vy/F"</span>);
00858   tree-&gt;Branch(<span class="stringliteral">"vz"</span>,&amp;vz,<span class="stringliteral">"vz/F"</span>);
00859   tree-&gt;Branch(<span class="stringliteral">"pdpx"</span>,&amp;pdpx,<span class="stringliteral">"pdpx/F"</span>);
00860   tree-&gt;Branch(<span class="stringliteral">"pdpy"</span>,&amp;pdpy,<span class="stringliteral">"pdpy/F"</span>);
00861   tree-&gt;Branch(<span class="stringliteral">"pdpz"</span>,&amp;pdpz,<span class="stringliteral">"pdpz/F"</span>);
00862   tree-&gt;Branch(<span class="stringliteral">"ppdxdz"</span>,&amp;ppdxdz,<span class="stringliteral">"ppdxdz/F"</span>);
00863   tree-&gt;Branch(<span class="stringliteral">"ppdydz"</span>,&amp;ppdydz,<span class="stringliteral">"ppdydz/F"</span>);
00864   tree-&gt;Branch(<span class="stringliteral">"pppz"</span>,&amp;pppz,<span class="stringliteral">"pppz/F"</span>);
00865   tree-&gt;Branch(<span class="stringliteral">"ppenergy"</span>,&amp;ppenergy,<span class="stringliteral">"ppenergy/F"</span>);
00866   tree-&gt;Branch(<span class="stringliteral">"ppmedium"</span>,&amp;ppmedium,<span class="stringliteral">"ppmedium/I"</span>);
00867   tree-&gt;Branch(<span class="stringliteral">"ptype"</span>,&amp;ptype,<span class="stringliteral">"ptype/I"</span>);
00868   tree-&gt;Branch(<span class="stringliteral">"ppvx"</span>,&amp;ppvx,<span class="stringliteral">"ppvx/F"</span>);
00869   tree-&gt;Branch(<span class="stringliteral">"ppvy"</span>,&amp;ppvy,<span class="stringliteral">"ppvy/F"</span>);
00870   tree-&gt;Branch(<span class="stringliteral">"ppvz"</span>,&amp;ppvz,<span class="stringliteral">"ppvz/F"</span>);
00871   tree-&gt;Branch(<span class="stringliteral">"muparpx"</span>,&amp;muparpx,<span class="stringliteral">"muparpx/F"</span>);
00872   tree-&gt;Branch(<span class="stringliteral">"muparpy"</span>,&amp;muparpy,<span class="stringliteral">"muparpy/F"</span>);
00873   tree-&gt;Branch(<span class="stringliteral">"muparpz"</span>,&amp;muparpz,<span class="stringliteral">"muparpz/F"</span>);
00874   tree-&gt;Branch(<span class="stringliteral">"mupare"</span>,&amp;mupare,<span class="stringliteral">"mupare/F"</span>);
00875   tree-&gt;Branch(<span class="stringliteral">"necm"</span>,&amp;necm,<span class="stringliteral">"necm/F"</span>);
00876   tree-&gt;Branch(<span class="stringliteral">"nimpwt"</span>,&amp;nimpwt,<span class="stringliteral">"nimpwt/F"</span>);
00877   tree-&gt;Branch(<span class="stringliteral">"xpoint"</span>,&amp;xpoint,<span class="stringliteral">"xpoint/F"</span>);
00878   tree-&gt;Branch(<span class="stringliteral">"ypoint"</span>,&amp;ypoint,<span class="stringliteral">"ypoint/F"</span>);
00879   tree-&gt;Branch(<span class="stringliteral">"zpoint"</span>,&amp;zpoint,<span class="stringliteral">"zpoint/F"</span>);
00880   tree-&gt;Branch(<span class="stringliteral">"tvx"</span>,&amp;tvx,<span class="stringliteral">"tvx/F"</span>);
00881   tree-&gt;Branch(<span class="stringliteral">"tvy"</span>,&amp;tvy,<span class="stringliteral">"tvy/F"</span>);
00882   tree-&gt;Branch(<span class="stringliteral">"tvz"</span>,&amp;tvz,<span class="stringliteral">"tvz/F"</span>);
00883   tree-&gt;Branch(<span class="stringliteral">"tpx"</span>,&amp;tpx,<span class="stringliteral">"tpx/F"</span>);
00884   tree-&gt;Branch(<span class="stringliteral">"tpy"</span>,&amp;tpy,<span class="stringliteral">"tpy/F"</span>);
00885   tree-&gt;Branch(<span class="stringliteral">"tpz"</span>,&amp;tpz,<span class="stringliteral">"tpz/F"</span>);
00886   tree-&gt;Branch(<span class="stringliteral">"tptype"</span>,&amp;tptype,<span class="stringliteral">"tptype/I"</span>);
00887   tree-&gt;Branch(<span class="stringliteral">"tgen"</span>,&amp;tgen,<span class="stringliteral">"tgen/I"</span>);
00888   
00889   <span class="comment">//pot counting</span>
00890   <span class="keywordtype">float</span> pottor101=0.;
00891   <span class="keywordtype">float</span> pottortgt=0.;
00892   <span class="keywordtype">float</span> pot=0.;
00893   <span class="keywordtype">int</span> NRUNS=0;
00894   <span class="keywordtype">int</span> NSNARLS=0;
00895   TTree *pottree = <span class="keyword">new</span> TTree(<span class="stringliteral">"pottree"</span>,<span class="stringliteral">"pottree"</span>);
00896   pottree-&gt;Branch(<span class="stringliteral">"pot"</span>,&amp;pot,<span class="stringliteral">"pot/F"</span>);
00897   pottree-&gt;Branch(<span class="stringliteral">"pottor101"</span>,&amp;pottor101,<span class="stringliteral">"pottor101/F"</span>);
00898   pottree-&gt;Branch(<span class="stringliteral">"pottortgt"</span>,&amp;pottortgt,<span class="stringliteral">"pottortgt/F"</span>);
00899   pottree-&gt;Branch(<span class="stringliteral">"nruns"</span>,&amp;NRUNS,<span class="stringliteral">"nruns/I"</span>);
00900   pottree-&gt;Branch(<span class="stringliteral">"nsnarls"</span>,&amp;NSNARLS,<span class="stringliteral">"nsnarls/I"</span>);
00901 
00902   <span class="comment">//make a BMSpillAna so we can tell if it's goodbeam</span>
00903   <a class="code" href="classBMSpillAna.html">BMSpillAna</a> bmana;
00904   bmana.<a class="code" href="classBMSpillAna.html#a5">UseDatabaseCuts</a>();
00905 
00911   <a class="code" href="classBeamEnergyCalculator.html">BeamEnergyCalculator</a> ecalc(&amp;fBECConfig);
00912   <span class="keywordtype">double</span> bec_high=0; <span class="keywordtype">double</span> bec_low=0;
00913   ecalc.<a class="code" href="classWeightCalculator.html#a8">GetStandardConfig</a>()-&gt;<a class="code" href="classRegistry.html#a12">Print</a>();
00914   ecalc.<a class="code" href="classWeightCalculator.html#a8">GetStandardConfig</a>()-&gt;<a class="code" href="classRegistry.html#a24">Get</a>(<span class="stringliteral">"beam:high_energy_limit"</span>,bec_high);
00915   ecalc.<a class="code" href="classWeightCalculator.html#a8">GetStandardConfig</a>()-&gt;<a class="code" href="classRegistry.html#a24">Get</a>(<span class="stringliteral">"beam:low_energy_limit"</span>,bec_low);
00916 
00917   <span class="comment">// mark's QE id</span>
00918   <span class="comment">//  MadQEID qeid;</span>
00919   <span class="comment">//  qeid.ReadPDFs("/afs/fnal.gov/files/data/minos/d04/kordosky/madqe_files/QEpdfs.root");</span>
00921 <span class="comment"></span>  <span class="comment">//  bool beamdb=false;</span>
00922   <span class="comment">//  bool checkeddb=false;</span>
00923   <span class="keywordtype">int</span> lastrun=-1;
00924   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;<a class="code" href="classMadBase.html#p36">Nentries</a>;ii++){   
00925     <span class="keywordflow">if</span>(ii%1000==0) std::cout &lt;&lt; float(ii)*100./float(Nentries) 
00926                             &lt;&lt; <span class="stringliteral">"% done"</span> &lt;&lt; std::endl;
00927 
00928     <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMadBase.html#a3">GetEntry</a>(ii)) <span class="keywordflow">continue</span>;
00929     NSNARLS++;
00930     <span class="comment">// fill some histograms for mc acceptance</span>
00931     <span class="keywordflow">if</span>(file_is_mc) <a class="code" href="classMadTVAnalysis.html#a8">FillMCHists</a>(&amp;save);
00932 
00933     <span class="comment">//give the snarl to the PhysicsNtuple interface</span>
00934     <span class="keywordtype">bool</span> anumuready = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a2">FillSnarl</a>(strecord);
00935     <span class="keywordflow">if</span>(anumuready){
00936       <span class="comment">//      cout&lt;&lt;"ITHINK THE STUPID INTERFACE THING WORKED WITH THE SNARL"&lt;&lt;endl;</span>
00937     }
00938 
00939     <a class="code" href="classVldContext.html">VldContext</a> vc = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>();
00940 
00941     nevent = <a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o6">nevent</a>;
00942     <a class="code" href="do__extrap_8h.html#a34">run</a> = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecDataHeader.html#a3">GetRun</a>();
00943     <span class="keywordflow">if</span>(<a class="code" href="do__extrap_8h.html#a34">run</a>!=lastrun){
00944       NRUNS++;
00945       lastrun = <a class="code" href="do__extrap_8h.html#a34">run</a>;
00946     }
00947     <span class="comment">//get detector type:</span>
00948     <span class="keyword">const</span> <a class="code" href="classDetector.html#w0">Detector::Detector_t</a> det 
00949       = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>();
00950 
00951 
00952     snarl = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecPhysicsHeader.html#a3">GetSnarl</a>();
00953     subrun = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecDataHeader.html#a4">GetSubRun</a>();
00954     vld_sec = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a6">GetTimeStamp</a>().<a class="code" href="classVldTimeStamp.html#a13">GetSeconds</a>();
00955     trgsrc = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecPhysicsHeader.html#a4">GetTrigSrc</a>();
00956     spilltype = <a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecPhysicsHeader.html#a6">GetRemoteSpillType</a>();
00957     trgtime = <a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o7">trigtime</a>;
00958     litime = <a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o8">litime</a>;
00959     is_li_sieve = <a class="code" href="namespaceLISieve.html#a0">LISieve::IsLI</a>(*strecord);
00960     coil_stat = <a class="code" href="classMadBase.html#p12">detStatus</a>-&gt;<a class="code" href="classNtpSRDetStatus.html#o0">coilstatus</a>;
00961     coil_is_ok = 1;
00962     coil_is_reverse = 0;
00963     coil_current = 0;
00964     <span class="keywordflow">if</span>(!file_is_mc) {
00965       coil_is_ok = <a class="code" href="classCoilTools.html#e4">CoilTools::IsOK</a>(vc);
00966       coil_is_reverse = <a class="code" href="classCoilTools.html#e6">CoilTools::IsReverse</a>(vc);
00967       coil_current = <a class="code" href="classCoilTools.html#e8">CoilTools::CoilCurrent</a>(vc).first;
00968     }
00969     dmx_stat=0;
00970 
00971     <span class="comment">//figure out demux status</span>
00972     dmx_stat+=(<a class="code" href="classMadBase.html#p11">dmxStatus</a>-&gt;<a class="code" href="classNtpSRDmxStatus.html#o1">nonphysicalfail</a>);
00973     dmx_stat+=((<a class="code" href="classMadBase.html#p11">dmxStatus</a>-&gt;<a class="code" href="classNtpSRDmxStatus.html#o2">validplanesfail</a>&lt;&lt;1));
00974     dmx_stat+=((<a class="code" href="classMadBase.html#p11">dmxStatus</a>-&gt;<a class="code" href="classNtpSRDmxStatus.html#o3">vertexplanefail</a>&lt;&lt;2));
00975 
00976     <span class="comment">//figure out how much of snarl ph was deposited as low ph</span>
00977     lowphrat=0.;
00978     lowphrat = <a class="code" href="classMadTVAnalysis.html#b17">ComputeLowPHRatio</a>();
00979 
00980     <span class="comment">//is this record in a time period defined as "bad" by Dave Petyt?</span>
00981     <span class="comment">// 1=good, 0=bad    </span>
00982     <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
00983       <span class="comment">//      dp_fd_quality=david_passfail(vld_sec);</span>
00984       <span class="comment">//      dp_fd_quality=passfail(vld_sec);</span>
00985       dp_fd_quality=<a class="code" href="namespaceDataUtil.html#a5">DataUtil::IsGoodFDData</a>(strecord);
00986     }
00987     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
00988       dp_fd_quality=1;  
00989     }
00990 
00992     <span class="comment">// look through "events" and characterize how close together</span>
00993     <span class="comment">// their vertices are</span>
00994     <span class="comment">// idea is to flag runt events caused by late activity near vertex</span>
00996 <span class="comment"></span>    <a class="code" href="classNearbyVertexFinder.html">NearbyVertexFinder</a> nby(nevent);
00997     nby.<a class="code" href="classNearbyVertexFinder.html#a6">ProcessEntry</a>(<span class="keyword">this</span>);
00998     <span class="comment">// run through and tag event with largest signal</span>
00999     <span class="keywordtype">int</span> lgst_evt_idx=-1;
01000     <span class="keywordtype">float</span> big_ph=0.0;
01001     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o6">nevent</a>;i++){ 
01002       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b3">LoadEvent</a>(i)) <span class="keywordflow">continue</span>; <span class="comment">//no event found</span>
01003       <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o19">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a> &gt; big_ph){ 
01004         big_ph=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o19">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>; 
01005         lgst_evt_idx=i;
01006       }
01007     }
01008 
01009     detector = -1; 
01010     <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
01011       detector = 2;
01012     }
01013     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
01014       detector = 1;     
01015     }
01016     <span class="comment">// deal with beam type as best we can</span>
01017     <a class="code" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a> current_beam=BeamType::kUnknown;
01018     <span class="keywordflow">if</span>(file_is_mc){
01019       <span class="comment">// for MC set beam to fMCbeam</span>
01020       current_beam=<a class="code" href="classMadTVAnalysis.html#r1">fMCBeam</a>;
01021       <span class="comment">// for data we will try to deduce from beam monitoring</span>
01022     }
01023     
01025     <span class="comment">// first thing, if data do beam monitoring</span>
01027 <span class="comment"></span>    hbw=vbw=hpos1=vpos1=hpos2=vpos2=hornI=closestspill=dt_beam_mon=-999.0;
01028     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> scnt=0;scnt&lt;6;scnt++){
01029       hposbyspill[scnt]=0.;
01030       vposbyspill[scnt]=0.;
01031       bibyspill[scnt]=0.;
01032     }
01033     beamcnf=BeamType::kUnknown;
01034     nuTarZ=0.0;
01035     goodbeam=0;
01036     horn_on=target_in=n_batches=0;
01037     tor101=tr101d=tortgt=trtgtd=0.0;
01038     hadmon=mumon1=mumon2=mumon3=0.0;  
01039 
01040     <a class="code" href="classVldTimeStamp.html">VldTimeStamp</a> vts = vc.<a class="code" href="classVldContext.html#a6">GetTimeStamp</a>();
01041 
01042     <span class="keywordflow">if</span>(!file_is_mc){
01043       <span class="comment">//      if(beamdb){</span>
01044       <a class="code" href="classBDSpillAccessor.html">BDSpillAccessor</a> &amp;sa = <a class="code" href="classBDSpillAccessor.html#e0">BDSpillAccessor::Get</a>();
01045       <span class="keyword">const</span> <a class="code" href="classBeamMonSpill.html">BeamMonSpill</a> *bs = sa.<a class="code" href="classBDSpillAccessor.html#a2">LoadSpill</a>(vts);
01046       hbw=bs-&gt;<a class="code" href="classBeamMonSpill.html#o12">fProfWidX</a>*1000.;<span class="comment">//make it in mm</span>
01047       vbw=bs-&gt;<a class="code" href="classBeamMonSpill.html#o13">fProfWidY</a>*1000.;<span class="comment">//make it in mm</span>
01048       hpos1=bs-&gt;<a class="code" href="classBeamMonSpill.html#o10">fTargProfX</a>*1000.;<span class="comment">//make it in mm</span>
01049       vpos1=bs-&gt;<a class="code" href="classBeamMonSpill.html#o11">fTargProfY</a>*1000.;<span class="comment">//make it in mm</span>
01050       n_batches=0;
01051       <span class="keywordtype">float</span> btint=0.;
01052       hpos2=0.;
01053       vpos2=0.;
01054       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> bt=0;bt&lt;6;bt++){
01055         <span class="comment">//cout&lt;&lt;"batch "&lt;&lt;bt&lt;&lt;" x "&lt;&lt;bs-&gt;fTargBpmX[bt]&lt;&lt;" y "&lt;&lt;bs-&gt;fTargBpmY[bt]</span>
01056         <span class="comment">//              &lt;&lt;" int "&lt;&lt;bs-&gt;fBpmInt[bt]&lt;&lt;endl;</span>
01057         hpos2+=(bs-&gt;<a class="code" href="classBeamMonSpill.html#o7">fTargBpmX</a>[bt]*bs-&gt;<a class="code" href="classBeamMonSpill.html#o9">fBpmInt</a>[bt]);
01058         vpos2+=(bs-&gt;<a class="code" href="classBeamMonSpill.html#o8">fTargBpmY</a>[bt]*bs-&gt;<a class="code" href="classBeamMonSpill.html#o9">fBpmInt</a>[bt]);
01059 
01060         hposbyspill[bt]=bs-&gt;<a class="code" href="classBeamMonSpill.html#o7">fTargBpmX</a>[bt];
01061         vposbyspill[bt]=bs-&gt;<a class="code" href="classBeamMonSpill.html#o8">fTargBpmY</a>[bt];
01062         bibyspill[bt]=bs-&gt;<a class="code" href="classBeamMonSpill.html#o9">fBpmInt</a>[bt];
01063         <span class="keywordflow">if</span>(bs-&gt;<a class="code" href="classBeamMonSpill.html#o9">fBpmInt</a>[bt]&gt;0.001){
01064           n_batches++;
01065         }
01066         btint+=bs-&gt;<a class="code" href="classBeamMonSpill.html#o9">fBpmInt</a>[bt];
01067       }
01068       <span class="keywordflow">if</span>(btint!=0){
01069         hpos2=hpos2*1000./btint;<span class="comment">//make it in mm</span>
01070         vpos2=vpos2*1000./btint;<span class="comment">//make it in mm</span>
01071       }
01072       <span class="keywordflow">else</span>{
01073         hpos2=-999.;
01074         vpos2=-999.;
01075       }
01076       
01077       hornI=bs-&gt;<a class="code" href="classBeamMonSpill.html#o6">fHornCur</a>;       
01078       <a class="code" href="classSpillTimeFinder.html">SpillTimeFinder</a> &amp;sfind= <a class="code" href="classSpillTimeFinder.html#e0">SpillTimeFinder::Instance</a>();
01079 
01080       closestspill = 
01081         sfind.<a class="code" href="classSpillTimeFinder.html#a9">GetTimeToNearestSpill</a>(vc);
01082       
01083       <span class="comment">//      beamcnf =bs-&gt;GetStatusBits().beam_type;</span>
01084       beamcnf =bs-&gt;<a class="code" href="classBeamMonSpill.html#a7">BeamType</a>();
01085       nuTarZ=0.;
01086       horn_on = bs-&gt;<a class="code" href="classBeamMonSpill.html#a14">GetStatusBits</a>().horn_on;
01087       target_in = bs-&gt;<a class="code" href="classBeamMonSpill.html#a14">GetStatusBits</a>().target_in;
01088       
01089       
01090       tor101=bs-&gt;<a class="code" href="classBeamMonSpill.html#o2">fTor101</a>;
01091       tr101d=bs-&gt;<a class="code" href="classBeamMonSpill.html#o3">fTr101d</a>;
01092       tortgt=bs-&gt;<a class="code" href="classBeamMonSpill.html#o4">fTortgt</a>;
01093       trtgtd=bs-&gt;<a class="code" href="classBeamMonSpill.html#o5">fTrtgtd</a>;
01094       hadmon=bs-&gt;<a class="code" href="classBeamMonSpill.html#o14">fHadInt</a>;
01095       mumon1=bs-&gt;<a class="code" href="classBeamMonSpill.html#o15">fMuInt1</a>;
01096       mumon2=bs-&gt;<a class="code" href="classBeamMonSpill.html#o16">fMuInt2</a>;
01097       mumon3=bs-&gt;<a class="code" href="classBeamMonSpill.html#o17">fMuInt3</a>;
01098       
01099       goodbeam=0;
01100       <span class="comment">//use Mark D. BMSpillAna to set good beam</span>
01101       bmana.<a class="code" href="classBMSpillAna.html#a7">SetSpill</a>(*bs);
01102       <span class="comment">//      bmana.SetTimeDiff(closestspill);</span>
01103       <span class="comment">// Mark D. suggests that we do the following rather</span>
01104       <span class="comment">// than the line above</span>
01105       <a class="code" href="classVldTimeStamp.html">VldTimeStamp</a> delta_vts=vts-bs-&gt;<a class="code" href="classBeamMonSpill.html#a5">SpillTime</a>();
01106       dt_beam_mon=delta_vts.<a class="code" href="classVldTimeStamp.html#a13">GetSeconds</a>();
01107       bmana.<a class="code" href="classBMSpillAna.html#a10">SetTimeDiff</a>(delta_vts.<a class="code" href="classVldTimeStamp.html#a13">GetSeconds</a>());
01108       
01109       <span class="keywordflow">if</span>(bmana.<a class="code" href="classBMSpillAna.html#a12">SelectSpill</a>()){
01110         goodbeam=1;
01111       }
01112       <span class="keywordflow">else</span>{
01113         goodbeam=0;
01114       }
01115 
01116       <span class="keywordflow">if</span>(<a class="code" href="classMadTVAnalysis.html#r2">fDataUseMCBeam</a>==<span class="keyword">true</span>){
01117         <span class="comment">//allow us to force the data to use the MC beam</span>
01118         current_beam=<a class="code" href="classMadTVAnalysis.html#r1">fMCBeam</a>;
01119       }
01120       <span class="keywordflow">else</span>{
01121         <span class="comment">// attempt to deduce beam type from beam monitoring</span>
01122         <span class="comment">//      current_beam = BeamType::FromBeamMon(beamcnf);</span>
01123         current_beam = beamcnf;
01124       }
01125       <span class="comment">//      cout&lt;&lt;"Current beam "&lt;&lt;current_beam&lt;&lt;" "&lt;&lt;BeamType::AsString(current_beam)&lt;&lt;endl;</span>
01126 
01127       <span class="comment">//don't count fake spills</span>
01128       <span class="keywordflow">if</span>(goodbeam==1&amp;&amp;spilltype!=3){
01129         <span class="comment">//don't count spills where ND coil not working</span>
01130         <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>||coil_is_ok==1){
01131           pot+=tortgt;
01132           pottor101+=tor101;
01133           pottortgt+=tortgt;
01134         }
01135       }
01136     }
01137     <span class="comment">// Write a special record for each spill!</span>
01138     event=-1; ntrack=-1; nshower=-1;
01139     reco_emu=0.0; reco_enu=0.0; reco_eshw=0.0; reco_eshw_uncorr=0.0;
01140     true_enu=0.0; true_emu=0.0; true_eshw=0.0;
01141     pass=0; is_fid=0; is_fid_2007=0;
01142     anumupass=0;
01143     rustem_cc_pid=0;
01144 
01145 
01146     ro_knn_01=0.;
01147     ro_knn_10=0.;
01148     ro_knn_20=0.;
01149     ro_knn_40=0.;
01150 
01151     andy_cc_pid=-1.;
01152     abid_costheta         =0.;
01153     abid_eventenergy      =0.;
01154     abid_trackcharge      =0;
01155     abid_trackenergy      =0;
01156     abid_tracklikeplanes  =0;
01157     abid_trackphfrac      =0.;
01158     abid_trackphmean      =0.;
01159     abid_trackqpsigmaqp   =0.;
01160     abid_y                =0.;
01161 
01162     tree-&gt;Fill();
01163 
01164     <span class="keywordflow">if</span>(!<a class="code" href="classMadTVAnalysis.html#o4">openedabpidfile</a>){
01165       string <a class="code" href="TrimParams_8h.html#a0">base</a>=<span class="stringliteral">""</span>;
01166       <a class="code" href="TrimParams_8h.html#a0">base</a>=getenv(<span class="stringliteral">"SRT_PRIVATE_CONTEXT"</span>);
01167       <span class="keywordflow">if</span>(<a class="code" href="TrimParams_8h.html#a0">base</a>!=<span class="stringliteral">""</span>&amp;&amp;<a class="code" href="TrimParams_8h.html#a0">base</a>!=<span class="stringliteral">"."</span>){
01168         <span class="comment">// check if directory exists in SRT_PRIVATE_CONTEXT      </span>
01169         std::string path = <a class="code" href="TrimParams_8h.html#a0">base</a> + <span class="stringliteral">"/Mad/data"</span>;
01170         <span class="keywordtype">void</span> *dir_ptr = <a class="code" href="MsgRootDummies_8cxx.html#a0">gSystem</a> -&gt; OpenDirectory(path.c_str());
01171         <span class="keywordflow">if</span>(!dir_ptr){
01172           <span class="comment">// if it doesn't exist then use SRT_PUBLIC_CONTEXT</span>
01173           <a class="code" href="TrimParams_8h.html#a0">base</a>=getenv(<span class="stringliteral">"SRT_PUBLIC_CONTEXT"</span>); 
01174         }
01175       }
01176       <span class="keywordflow">else</span>{
01177         <a class="code" href="TrimParams_8h.html#a0">base</a>=getenv(<span class="stringliteral">"SRT_PUBLIC_CONTEXT"</span>);
01178       }
01179       <span class="keywordflow">if</span>(<a class="code" href="TrimParams_8h.html#a0">base</a>==<span class="stringliteral">""</span>) {
01180         cout&lt;&lt;<span class="stringliteral">"No SRT_PUBLIC_CONTEXT set"</span>&lt;&lt;std::endl;
01181         assert(<span class="keyword">false</span>);
01182       }
01183       <a class="code" href="TrimParams_8h.html#a0">base</a>+=<span class="stringliteral">"/Mad/data"</span>;
01184       
01185       string fname=<a class="code" href="TrimParams_8h.html#a0">base</a>;
01186       string sdet=<span class="stringliteral">""</span>;
01187       <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
01188         sdet=<span class="stringliteral">"near"</span>;
01189       }
01190       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
01191         sdet=<span class="stringliteral">"far"</span>;
01192       }
01193       <span class="keywordflow">else</span>{
01194         cout&lt;&lt;<span class="stringliteral">"Could not set ab pid file, defaulting to far"</span>&lt;&lt;endl;
01195         sdet=<span class="stringliteral">"far"</span>;
01196       }      
01197       string rmc=<span class="stringliteral">""</span>;
01198       <span class="keywordflow">if</span>(<a class="code" href="namespaceReleaseType.html#a91">ReleaseType::IsCedar</a>(reltype)&amp;&amp;mcver==<span class="stringliteral">"daikon"</span>){      
01199         rmc=<span class="stringliteral">"cedar_daikon"</span>;
01200       }
01201       <span class="keywordflow">else</span>{
01202         cout&lt;&lt;<span class="stringliteral">"Dont know reco/mc versions "</span>
01203             &lt;&lt;<span class="stringliteral">"defaulting to cedar_daikon"</span>&lt;&lt;endl;
01204         rmc=<span class="stringliteral">"cedar_daikon"</span>;
01205       }
01206       string sbeam=<span class="stringliteral">""</span>;
01207       <span class="keywordflow">switch</span> (current_beam){
01208       <span class="keywordflow">case</span> BeamType::kL010z000i:
01209         sbeam=<span class="stringliteral">"le0"</span>;
01210         <span class="keywordflow">break</span>;
01211       <span class="keywordflow">case</span> BeamType::kL010z170i:
01212         sbeam=<span class="stringliteral">"le170"</span>;
01213         <span class="keywordflow">break</span>;
01214       <span class="keywordflow">case</span> BeamType::kL010z185i:
01215         sbeam=<span class="stringliteral">"le"</span>;
01216         <span class="keywordflow">break</span>;
01217       <span class="keywordflow">case</span> BeamType::kL010z200i:
01218         sbeam=<span class="stringliteral">"le200"</span>;
01219         <span class="keywordflow">break</span>;
01220       <span class="keywordflow">case</span> BeamType::kL100z200i:
01221         sbeam=<span class="stringliteral">"pme"</span>;
01222         <span class="keywordflow">break</span>;
01223       <span class="keywordflow">case</span> BeamType::kL150z200i:
01224         sbeam=<span class="stringliteral">"pmhe"</span>;
01225         <span class="keywordflow">break</span>;
01226       <span class="keywordflow">case</span> BeamType::kL250z200i:
01227         sbeam=<span class="stringliteral">"phe"</span>;
01228         <span class="keywordflow">break</span>;
01229       <span class="keywordflow">case</span> BeamType::kLE:
01230         sbeam=<span class="stringliteral">"le"</span>;
01231         <span class="keywordflow">break</span>;
01232       <span class="keywordflow">default</span>:
01233         cout&lt;&lt;<span class="stringliteral">"Don't know beam type "</span>
01234             &lt;&lt;<span class="stringliteral">" defaulting to LE"</span>&lt;&lt;endl;
01235         sbeam=<span class="stringliteral">"le"</span>;
01236         <span class="keywordflow">break</span>;
01237       }
01238       fname+=<span class="stringliteral">"/ab_pdf_"</span>+sdet+<span class="stringliteral">"_"</span>+sbeam+<span class="stringliteral">"_"</span>+rmc+<span class="stringliteral">".root"</span>;
01239       cout&lt;&lt;<span class="stringliteral">"Reading AB PDFS from "</span>&lt;&lt;fname&lt;&lt;endl;
01240       <a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a47">ReadPDFs</a>(fname.c_str());
01241       <a class="code" href="classMadTVAnalysis.html#o4">openedabpidfile</a>=<span class="keyword">true</span>;
01242     }
01243 
01244 
01245     <span class="keywordflow">if</span>(nevent==0) <span class="keywordflow">continue</span>;    
01246     <span class="comment">//fill tree once for each reconstructed event</span>
01247     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o6">nevent</a>;i++){ 
01248       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b3">LoadEvent</a>(i)) <span class="keywordflow">continue</span>; <span class="comment">//no event found</span>
01249 
01250       <span class="comment">//set event index:</span>
01251       event = i;
01252       ntrack = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o14">ntrack</a>;
01253       nshower = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o12">nshower</a>;
01254       nstrip = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;
01255 
01256       <span class="comment">//anti nu selection</span>
01257       anumupass=0;
01258       rustem_cc_pid=0;
01259       ro_knn_01=0.;
01260       ro_knn_10=0.;
01261       ro_knn_20=0.;
01262       ro_knn_40=0.;
01263 
01264       andy_cc_pid=-1.;
01265       abid_costheta         =0.;
01266       abid_eventenergy      =0.;
01267       abid_trackcharge      =0;
01268       abid_trackenergy      =0;
01269       abid_tracklikeplanes  =0;
01270       abid_trackphfrac      =0.;
01271       abid_trackphmean      =0.;
01272       abid_trackqpsigmaqp   =0.;
01273       abid_y                =0.;
01274       
01275       <span class="keywordflow">if</span>(anumuready){
01276         <span class="comment">//      cout&lt;&lt;"Filling event rustem stuff"&lt;&lt;endl;</span>
01277 
01278         anumupass     = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a3">GetVar</a>(<span class="stringliteral">"numubar"</span>, ntpEvent);
01279         rustem_cc_pid = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a3">GetVar</a>(<span class="stringliteral">"knn_pid"</span>, ntpEvent);
01280         ro_knn_01     = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a3">GetVar</a>(<span class="stringliteral">"knn_01"</span>,  ntpEvent);
01281         ro_knn_10     = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a3">GetVar</a>(<span class="stringliteral">"knn_10"</span>,  ntpEvent);
01282         ro_knn_20     = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a3">GetVar</a>(<span class="stringliteral">"knn_20"</span>,  ntpEvent);
01283         ro_knn_40     = <a class="code" href="classMadTVAnalysis.html#r3">phnti</a>-&gt;<a class="code" href="classAnp_1_1Interface.html#a3">GetVar</a>(<span class="stringliteral">"knn_40"</span>,  ntpEvent);
01284 
01285       }
01286 
01287 
01288       
01290       <span class="comment">//zero all tree values</span>
01291       true_enu = 0; true_emu = 0; true_eshw = 0; true_x = 0; true_y = 0; 
01292       true_q2 = 0; true_w2 = 0; true_dircosneu = 0; true_dircosz = 0;
01293       true_vtxx = 0; true_vtxy = 0; true_vtxz = 0; true_pitt_fid=0;
01294       true_trk_cmplt=0.;
01295       resnum=0;
01296       npp=npm=npz=np=nn=0;
01297       epp=epm=epz=ep=en=0.0;
01298 
01299       fluxrun=0; fluxevtno=0; nudxdz=0.; nudydz=0.; nupz=0.; nuenergy=0.;
01300       nudxdznear=0.; nudydznear=0.; nuenergynear=0.; nwtnear=0.; nudxdzfar=0.;
01301       nudydzfar=0.; nuenergyfar=0.; nwtfar=0.; norig=0; ndecay=0; ntype=0;
01302       vx=0.; vy=0.; vz=0.; pdpx=0.; pdpy=0.; pdpz=0.; ppdxdz=0.; ppdydz=0.; pppz=0.;
01303       ppenergy=0.; ppmedium=0; ptype=0; ppvx=0.; ppvy=0.; ppvz=0.;
01304       muparpx=0.; muparpy=0.; muparpz=0.; mupare=0.; necm=0.; nimpwt=0.;
01305       xpoint=0.; ypoint=0.; zpoint=0.; tvx=0.; tvy=0.; tvz=0.; tpx=0.;
01306       tpy=0.; tpz=0.; tptype=0; tgen=0;
01307       
01308       flavour = 0; process = 0; nucleus = 0; cc_nc = 0; initial_state = 0;
01309       rc_boundary=0;
01310       mcevent = -1;
01311       is_fid = 0;is_fid_2007 = 0; is_cev = 0; sr_contained = 0; is_mc = 0; pass_basic = 0; 
01312       is_pitt_fid=0; pitt_evt_class=0; pitt_trk_qual=0; nd_radial_fid=0;
01313       is_trk_fid=0;
01314       duvvtx=0;
01315       pid0 = 0; pid1 = 0; pid2 = 0; pass = 0;
01316       reco_enu = 0; reco_emu = 0; reco_eshw = 0; reco_wtd_eshw=0; 
01317       reco_eshw_uncorr=0; reco_wtd_eshw_uncorr=0;
01318       reco_vtx_eshw=0; reco_vtx_wtd_eshw=0;
01319       reco_qe_enu = 0;  reco_mushw=0;
01320       reco_qe_q2 = 0; reco_dircosneu = 0;
01321       reco_dircosx = 0;; reco_dircosy = 0;; reco_dircosz = 0;
01322       reco_vtxx = reco_vtxy = reco_vtxz = reco_vtxr=0; 
01323       reco_trk_vtxx = reco_trk_vtxy = reco_trk_vtxz = reco_trk_vtxr=0; 
01324       reco_shw_vtxx = reco_shw_vtxy = reco_shw_vtxz = reco_shw_vtxr=0; 
01325       reco_trk_endx = reco_trk_endy = reco_trk_endz = reco_trk_endr=0; 
01326       evt_nstrips = slc_nstrips = trk_nstrips=0;
01327       evt_nplanes = slc_nplanes = trk_nplanes=0;
01328       shw_nplanes_cut=shw_nplanes_raw=0;
01329       shw_ph_cut=shw_ph_raw=0.0;
01330 
01331       evtlength = trklength = shwlength=trknstp=0; 
01332       trkphfrac = trkphplane = 0;
01333       ntrklike= trkend=trkendu=trkendv=shwbeg=shwend=0;
01334       trkmomrange = 0; trkqp = 0; trkeqp = 0;
01335       trkchi2=0.0; trkndf=0;
01336       pass_track=0; emu_meth=0;
01337       trk_fit_pass =0;
01338       <span class="comment">// kinematic quantities always positive</span>
01339       <span class="comment">// convention: -1 indicates unfilled variable (NC events)</span>
01340       reco_y = reco_x = reco_Q2 = reco_W2 = -1;
01341       
01342       <span class="comment">// vertex back tracking</span>
01343 
01344       nvsi=nvti=bvsi=bvti=-1;
01345       nvsevt=bvsevt=nvtevt=bvtevt=-1;
01346       nvsd=nvtd=bvsd=bvtd=999999;
01347       nvst=bvst=nvtt=bvtt=1e6;
01348       nvsp=nvtp=bvsp=bvtp=-1.0;
01349 
01350       evtph=0; evtphgev=0;
01351       evtsigfull=evtsigpart=trksigfull=trksigpart=0;            
01352 
01353       evttimemin=evttimemax=evttimeln=0.;
01354       evttimeminphc=evttimemaxphc=evttimelnphc=0.;
01355 
01356       earlywph=earlywphpw=earlywphsphere=0.;
01357       ph1000=ph500=ph100=0.;
01358       lateph1000=lateph500=lateph100=lateph50=0.;
01359 
01360 
01361       nduprs=0;
01362       dupphrs=0.;
01363       
01364       nu_px=nu_py=nu_pz=tar_px=tar_py=tar_pz=tar_e=0.0;
01365       inu=0;
01366       inunoosc=0;
01367       ntotss=0;
01368       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iss=0; iss&lt;6; iss++){nss[iss]=0; ess[iss]=0;}
01369 
01370       med_qe_pid=-1001.0;
01371       med_qe_pass=0;
01372       niki_cc_pid=-999;
01373       dave_cc_pid=-999;
01374             
01375       <span class="comment">//check for a corresponding mc event</span>
01376       <span class="comment">// first, looks to match reconstructed track</span>
01377       <span class="comment">// then, looks to match reconstructed shower</span>
01378       <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#b19">LoadTruthForRecoTH</a>(i,mcevent)) {
01379         
01380         <span class="comment">// should flag with a "bad truth word"</span>
01381         <span class="comment">// in case the function above returns false</span>
01382 
01383         <span class="comment">//true info for tree:</span>
01384         is_mc             = 1;
01385         nucleus           = <a class="code" href="classMadQuantities.html#a27">Nucleus</a>(mcevent);
01386         flavour           = <a class="code" href="classMadQuantities.html#a19">Flavour</a>(mcevent);
01387         initial_state     = <a class="code" href="classMadQuantities.html#a26">Initial_state</a>(mcevent);
01388         process           = <a class="code" href="classMadQuantities.html#a21">IResonance</a>(mcevent); 
01389         cc_nc             = <a class="code" href="classMadQuantities.html#a20">IAction</a>(mcevent);
01390         true_enu          = <a class="code" href="classMadQuantities.html#a30">TrueNuEnergy</a>(mcevent); 
01391         true_emu          = <a class="code" href="classMadQuantities.html#a33">TrueMuEnergy</a>(mcevent); 
01392         true_eshw         = <a class="code" href="classMadQuantities.html#a36">TrueShwEnergy</a>(mcevent); 
01393         true_x            = <a class="code" href="classMadQuantities.html#a22">X</a>(mcevent);
01394         true_y            = <a class="code" href="classMadQuantities.html#a23">Y</a>(mcevent);
01395         true_q2           = <a class="code" href="classMadQuantities.html#a24">Q2</a>(mcevent);
01396         true_w2           = <a class="code" href="classMadQuantities.html#a25">W2</a>(mcevent);
01397         true_dircosz      = <a class="code" href="classMadQuantities.html#a38">TrueMuDCosZ</a>(mcevent);
01398         true_dircosneu    = <a class="code" href="classMadQuantities.html#a39">TrueMuDCosNeu</a>(mcevent);
01399         
01400 
01401         <span class="comment">//flux info</span>
01402         <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#b7">LoadTruth</a>(mcevent)){
01403           fluxrun=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o1">fluxrun</a>;
01404           fluxevtno=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o2">fluxevtno</a>;
01405           nudxdz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o3">ndxdz</a>;
01406           nudydz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o4">ndydz</a>;
01407           nupz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o5">npz</a>;
01408           nuenergy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o6">nenergy</a>;
01409           nudxdznear=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o7">ndxdznear</a>;
01410           nudydznear=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o8">ndydznear</a>;
01411           nuenergynear=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o9">nenergynear</a>;
01412           nwtnear=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o10">nwtnear</a>;
01413           nudxdzfar=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o11">ndxdzfar</a>;
01414           nudydzfar=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o12">ndydzfar</a>;
01415           nuenergyfar=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o13">nenergyfar</a>;
01416           nwtfar=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o14">nwtfar</a>;
01417           norig=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o15">norig</a>;
01418           ndecay=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o16">ndecay</a>;
01419           ntype=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o17">ntype</a>;
01420           vx=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o18">vx</a>;
01421           vy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o19">vy</a>;
01422           vz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o20">vz</a>;
01423           pdpx=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o21">pdpx</a>;
01424           pdpy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o22">pdpy</a>;
01425           pdpz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o23">pdpz</a>;
01426           ppdxdz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o24">ppdxdz</a>;
01427           ppdydz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o25">ppdydz</a>;
01428           pppz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o26">pppz</a>;
01429           ppenergy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o27">ppenergy</a>;
01430           ppmedium=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o28">ppmedium</a>;
01431           ptype=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o29">ptype</a>;
01432           ppvx=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o30">ppvx</a>;
01433           ppvy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o31">ppvy</a>;
01434           ppvz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o32">ppvz</a>;
01435           muparpx=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o33">muparpx</a>;
01436           muparpy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o34">muparpy</a>;
01437           muparpz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o35">muparpz</a>;
01438           mupare=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o36">mupare</a>;
01439           necm=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o37">necm</a>;
01440           nimpwt=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o38">nimpwt</a>;
01441           xpoint=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o39">xpoint</a>;
01442           ypoint=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o40">ypoint</a>;
01443           zpoint=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o41">zpoint</a>;
01444           tvx=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o42">tvx</a>;
01445           tvy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o43">tvy</a>;
01446           tvz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o44">tvz</a>;
01447           tpx=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o45">tpx</a>;
01448           tpy=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o46">tpy</a>;
01449           tpz=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o47">tpz</a>;
01450           tptype=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o48">tptype</a>;
01451           tgen=<a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o35">flux</a>.<a class="code" href="classNtpMCFluxInfo.html#o49">tgen</a>;       
01452         }
01453 
01454         <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p27">ntpTHTrack</a>){
01455           <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p27">ntpTHTrack</a>-&gt;<a class="code" href="classNtpTHTrack.html#o1">neumc</a>==mcevent){
01456             true_trk_cmplt=<a class="code" href="classMadBase.html#p27">ntpTHTrack</a>-&gt;<a class="code" href="classNtpTHTrack.html#o6">completeslc</a>;
01457           }
01458         }
01459         
01460         Float_t* true_p = <a class="code" href="classMadQuantities.html#a31">TrueNuMom</a>(mcevent);
01461         <span class="keywordflow">if</span>(true_p){
01462           nu_px=true_p[0]; nu_py=true_p[1]; nu_pz=true_p[2];
01463           <span class="keyword">delete</span>[] true_p; true_p=0;
01464         }
01465         true_p = <a class="code" href="classMadQuantities.html#a29">Target4Vector</a>(mcevent);
01466         <span class="keywordflow">if</span>(true_p){
01467           tar_px=true_p[0]; tar_py=true_p[1]; tar_pz=true_p[2]; 
01468           tar_e=true_p[3];
01469           <span class="keyword">delete</span>[] true_p; true_p=0;
01470         }
01471 
01472         Float_t *vtx = <a class="code" href="classMadQuantities.html#a32">TrueVtx</a>(mcevent);
01473         true_vtxx         = vtx[0];
01474         true_vtxy         = vtx[1];
01475         true_vtxz         = vtx[2];
01476         <span class="keywordtype">float</span> true_vtxu = (true_vtxx + true_vtxy)/sqrt(2.0);
01477         <span class="keywordtype">float</span> true_vtxv = (true_vtxy - true_vtxx)/sqrt(2.0);
01478         true_pitt_fid=<a class="code" href="classMadTVAnalysis.html#e0">PittInFidVol</a>(true_vtxx, true_vtxy, 
01479                                    true_vtxz,
01480                                    true_vtxu, true_vtxv);
01481 
01482         resnum = <a class="code" href="classMadQuantities.html#a28">HadronicFinalState</a>(mcevent);
01483         npp = <a class="code" href="classMadQuantities.html#a48">NumFSPion</a>(mcevent,+1);
01484         npm = <a class="code" href="classMadQuantities.html#a48">NumFSPion</a>(mcevent,-1);
01485         npz = <a class="code" href="classMadQuantities.html#a54">NumFSPiZero</a>(mcevent);
01486         np = <a class="code" href="classMadQuantities.html#a42">NumFSProton</a>(mcevent);
01487         nn = <a class="code" href="classMadQuantities.html#a45">NumFSNeutron</a>(mcevent);
01488         
01489         epp = <a class="code" href="classMadQuantities.html#a49">TotFSPionEnergy</a>(mcevent,+1);
01490         epm = <a class="code" href="classMadQuantities.html#a49">TotFSPionEnergy</a>(mcevent,-1);
01491         epz = <a class="code" href="classMadQuantities.html#a55">TotFSPiZeroEnergy</a>(mcevent);
01492         ep = <a class="code" href="classMadQuantities.html#a43">TotFSProtonEnergy</a>(mcevent);
01493         en = <a class="code" href="classMadQuantities.html#a46">TotFSNeutronEnergy</a>(mcevent);
01494         
01495         <span class="comment">// beam energy weights //</span>
01496         inu=0;
01497         inu = <a class="code" href="classMadQuantities.html#a17">INu</a>(mcevent);
01498         inunoosc = <a class="code" href="classMadQuantities.html#a18">INuNoOsc</a>(mcevent);
01499         bec_inve=bec_le=bec_050=bec_100=bec_200=bec_250=1.0;
01500         <span class="comment">/*</span>
01501 <span class="comment">        bec_inve=ecalc.GetWeight(BeamType::kInverseE,det,inu,</span>
01502 <span class="comment">                                 true_enu, bec_high,bec_low);</span>
01503 <span class="comment">        bec_le=ecalc.GetWeight(BeamType::kLE,det,inu,</span>
01504 <span class="comment">                               true_enu, bec_high,bec_low);</span>
01505 <span class="comment">        bec_050=ecalc.GetWeight(BeamType::k050,det,inu,</span>
01506 <span class="comment">                                 true_enu, bec_high,bec_low);</span>
01507 <span class="comment">        bec_100=ecalc.GetWeight(BeamType::k100,det,inu,</span>
01508 <span class="comment">                                 true_enu, bec_high,bec_low);</span>
01509 <span class="comment">        bec_200=ecalc.GetWeight(BeamType::k200,det,inu,</span>
01510 <span class="comment">                                 true_enu, bec_high,bec_low);</span>
01511 <span class="comment">        bec_250=ecalc.GetWeight(BeamType::k250,det,inu,</span>
01512 <span class="comment">                                 true_enu, bec_high,bec_low);</span>
01513 <span class="comment">        */</span>
01515         <span class="keyword">delete</span> [] vtx;
01516       }
01517 
01518       <span class="comment">// is the event in the fiducial volume</span>
01519       <span class="comment">// MadQuantities::IsFidVtxEvt()</span>
01520       <span class="comment">//  this is used by Dave/Niki analysis</span>
01521       <span class="comment">// provisional, will update to using track vertices</span>
01522       <span class="comment">// if there is a track.      </span>
01523       is_fid_2007 = <a class="code" href="classMadQuantities.html#a10">IsFidVtxEvt</a>(event);
01524       is_fid = <a class="code" href="classMadQuantities.html#a14">IsFid_2008</a>(event);
01525       <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
01526         <span class="keywordflow">if</span>(<a class="code" href="classMadQuantities.html#a13">IsFidFD_AB</a>(event)){
01527           is_fid_2007 = 1;
01528         }
01529         <span class="keywordflow">else</span>{
01530           is_fid_2007=0;
01531         }
01532       }
01533 
01534       <span class="comment">// is this event on a readout crate boundary</span>
01535       rc_boundary=0;      
01536       <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
01537         <span class="comment">//      if(FDRCBoundary(eventSummary-&gt;planeall.beg,eventSummary-&gt;planeall.end)) rc_boundary=1;</span>
01538         <span class="comment">//      if(FDRCBoundary(eventSummary-&gt;plane.beg,eventSummary-&gt;plane.end)) rc_boundary=1;</span>
01539         rc_boundary=<a class="code" href="classMadTVAnalysis.html#b18">FDRCBoundary</a>();
01540       }
01541       <span class="comment">// is this event the largest (sicor) in the spill</span>
01542       <span class="keywordflow">if</span>(event==lgst_evt_idx) largest_event=1;
01543       <span class="keywordflow">else</span> largest_event=0;
01544       
01545 
01546       <span class="keywordflow">if</span>(<a class="code" href="classMadAnalysis.html#b1">PassBasicCuts</a>(event)) { <span class="comment">// this does nothing.</span>
01547         <span class="comment">//reco info for tree:</span>
01548         pass_basic        = 1;
01549         
01550         
01551         <span class="comment">//index will -1 if no track/shower present in event</span>
01552         <span class="keywordtype">int</span> track_index   = -1;
01553         <span class="comment">// track spanning largest number of planes</span>
01554         <a class="code" href="classMadBase.html#b14">LoadLargestTrackFromEvent</a>(i,track_index);
01555         <span class="keywordflow">if</span>(track_index&gt;-1&amp;&amp;det==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
01556           <span class="comment">//continue to use PRL cuts for ND fid. volume</span>
01557           <span class="comment">//FD fid vol has been updated and is computed above</span>
01558           is_fid_2007=<a class="code" href="classMadTVAnalysis.html#b5">InFidVol</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>,<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>,<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>);
01559         }
01560         pass_track = <a class="code" href="classMadQuantities.html#a5">PassTrackCuts</a>(track_index);
01561         <span class="comment">//methods should all be protected against index = -1</span>
01562         
01563         <span class="comment">//      reco_emu          = RecoMKMuEnergy(emu_meth,track_index,</span>
01564         <span class="comment">//                                         !file_is_mc,det);</span>
01565         reco_emu = <a class="code" href="classMadQuantities.html#a58">RecoMuEnergyNew</a>(0,track_index,vc,
01566                                    reltype,EnergyCorrections::kDefault);
01567 
01568         <span class="keywordtype">int</span> shower_index  = -1;
01569         
01570 
01571         <span class="comment">//      LoadLargestShowerFromEvent(i,shower_index);</span>
01572         <span class="comment">// Now use 0th shower (set by Jim) with cuts to remove brems</span>
01573         <a class="code" href="classMadBase.html#b15">LoadShower_Jim</a>(i,shower_index,det);
01574         <span class="comment">// shower with the best match to the vertex</span>
01575         <span class="comment">//      reco_eshw  = RecoShwEnergy(shower_index, det,1,!file_is_mc);</span>
01576 
01577         reco_eshw=<a class="code" href="classMadQuantities.html#a63">RecoShwEnergyNew</a>(shower_index,0,vc,
01578                                     reltype,EnergyCorrections::kDefault);
01579 
01580         reco_wtd_eshw=<a class="code" href="classMadQuantities.html#a63">RecoShwEnergyNew</a>(shower_index,1,vc,
01581                                        reltype,EnergyCorrections::kDefault);
01582         
01583         <span class="comment">//      cout&lt;&lt;"reco_eshw output"&lt;&lt;reco_eshw&lt;&lt;endl;</span>
01584         <span class="comment">//      cout&lt;&lt;"VLD context "&lt;&lt;endl;</span>
01585         <span class="comment">//      vc.Print();</span>
01586         <span class="comment">//      cout&lt;&lt;endl;</span>
01587 
01588 
01589          <span class="keywordflow">if</span>(shower_index&gt;-1) {
01590            reco_eshw_uncorr = <a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o29">shwph</a>.<a class="code" href="classNtpSRShowerPulseHeight.html#o0">linCCgev</a>;
01591            reco_wtd_eshw_uncorr = <a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o29">shwph</a>.<a class="code" href="classNtpSRShowerPulseHeight.html#o1">wtCCgev</a>;
01592          }
01593          reco_vtx_eshw = reco_eshw;
01594          reco_vtx_wtd_eshw = reco_wtd_eshw;
01595 
01596          <span class="comment">// provisional, to be updated later</span>
01597          reco_enu = reco_emu + reco_eshw;
01598          <span class="comment">// event energy according to offline</span>
01599          evtphgev = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o19">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01600          <span class="keywordflow">if</span>(reco_enu&gt;0){
01601            reco_qe_enu       = <a class="code" href="classMadQuantities.html#a68">RecoQENuEnergy</a>(track_index);
01602            reco_qe_q2        = <a class="code" href="classMadQuantities.html#a69">RecoQEQ2</a>(track_index);
01603            <span class="comment">// note, NtpSRFiducial isn't filled for ND events</span>
01604            <span class="comment">// is_cev determines if the track is a stopper or punch-through</span>
01605            <span class="comment">// used in Dave/Niki analysis</span>
01606            is_cev            = <a class="code" href="classMadQuantities.html#a9">IsFidAll</a>(track_index);
01607            <span class="comment">// use Pitt group's fiducial cuts for ND events</span>
01608            <span class="keywordflow">if</span>(detector==1){
01609              <span class="comment">// for now, use event vertex</span>
01610              <span class="comment">// but maybe should use track vertex...</span>
01611              <span class="comment">// if vertex finder works well it shouldn't matter...</span>
01612              is_pitt_fid = <a class="code" href="classMadTVAnalysis.html#e0">PittInFidVol</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>, <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>, 
01613                                         <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>,
01614                                         <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>, <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>);
01615              nd_radial_fid = <a class="code" href="classMadTVAnalysis.html#e3">NDRadialFidVol</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>,<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>,
01616                                             <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>);
01617            }
01618            <span class="keywordflow">else</span>{
01619              is_pitt_fid = <a class="code" href="classMadTVAnalysis.html#b5">InFidVol</a>();
01620            }
01621            <span class="comment">// have already checked that ntpEvent exists</span>
01622            reco_vtxx         = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>;
01623            reco_vtxy         = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>;
01624            reco_vtxz         = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>;
01625 
01626            <span class="comment">// check if distance from vertex to shower is too large</span>
01627            <span class="comment">// if so, set reco_eshw =0 </span>
01628            <span class="comment">// idea is to handle case of no vertex shower but runt downstream</span>
01629            <span class="keywordflow">if</span>(shower_index!=-1){
01630              <span class="comment">//     bool shw_ok=true;</span>
01631              <span class="keyword">const</span> <span class="keywordtype">float</span> max_shw_dist=14*0.06; <span class="comment">// about 2 interaction lengths</span>
01632              <span class="keywordtype">float</span> dist_z = fabs(reco_vtxz - <a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>);
01633              <span class="keywordtype">float</span> dist_r = sqrt( <a class="code" href="nrutil__val_8h.html#a22">pow</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>-<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>,2) +
01634                                   <a class="code" href="nrutil__mtl_8h.html#a20">pow</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>-<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>,2) );
01635              <span class="keywordflow">if</span>( (dist_z + dist_r) &gt; max_shw_dist ){
01636                reco_vtx_eshw=0;
01637                reco_vtx_wtd_eshw=0;
01638              }
01639 
01640            }
01641            <span class="comment">// radial position of vertex</span>
01642            <span class="keywordflow">if</span>(detector==1){
01643              reco_vtxr = <a class="code" href="nrutil__val_8h.html#a22">pow</a>(reco_vtxx-kXcenter,2) 
01644                + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(reco_vtxy-kYcenter,2);
01645              reco_vtxr=sqrt(reco_vtxr);
01646            }
01647            <span class="keywordflow">else</span> reco_vtxr = sqrt (<a class="code" href="nrutil__val_8h.html#a22">pow</a>(reco_vtxx,2)+<a class="code" href="nrutil__val_8h.html#a22">pow</a>(reco_vtxy,2));
01648 
01649            <span class="comment">// compute signal in fully and partially instrumented regions</span>
01650            <a class="code" href="classMadTVAnalysis.html#b0">SigInOut</a>(track_index,evtsigfull,evtsigpart,trksigfull,trksigpart);
01651             <span class="keywordflow">if</span>(detector==2){
01652              <span class="comment">//if far det, all signal is in fully instrumented region</span>
01653              evtsigfull=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o19">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
01654              evtsigpart=0.;
01655              <span class="keywordflow">if</span>(track_index!=-1){
01656                trksigfull=<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o32">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
01657              }
01658              <span class="keywordflow">else</span>{
01659                trksigfull=0.;
01660              }
01661              trksigpart=0.;
01662            }
01663 
01664            <span class="comment">// angle reconstruction</span>
01665            <span class="keywordflow">if</span>(track_index&gt;-1) {
01666              reco_dircosx = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o9">dcosx</a>;
01667              reco_dircosy = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o10">dcosy</a>;
01668            }
01669            reco_dircosz      = <a class="code" href="classMadQuantities.html#a70">RecoMuDCosZ</a>(track_index);
01670 
01671            <span class="comment">// event vertex</span>
01672            <span class="keywordtype">float</span> vtx_array[3]; 
01673            vtx_array[0]=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>; vtx_array[2]=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>;
01674            vtx_array[2]=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>;          
01675            <span class="keywordflow">if</span>(detector==1) 
01676              reco_dircosneu = <a class="code" href="classMadTVAnalysis.html#b2">RecoMuDCosNeuND</a>(track_index, vtx_array);
01677            <span class="keywordflow">else</span> reco_dircosneu = <a class="code" href="classMadTVAnalysis.html#b3">RecoMuDCosNeuFD</a>(track_index, vtx_array);
01678 
01679            evtlength         = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o20">plane</a>.<a class="code" href="classNtpSRPlane.html#o6">end</a>-<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o20">plane</a>.<a class="code" href="classNtpSRPlane.html#o3">beg</a>;
01680            <span class="keywordflow">if</span>(track_index!=-1){ <span class="comment">//check track is present before using ntpTrack</span>
01681 
01682              trklength         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o6">end</a>-<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o3">beg</a>;
01683              ntrklike =<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRTrackPlane.html#o0">ntrklike</a>;
01684              trkend         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o6">end</a>;
01685              trkendu         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o7">endu</a>;
01686              trkendv         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o8">endv</a>;
01687              trknstp       = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o4">nstrip</a>;
01688              trkmomrange       = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o41">momentum</a>.<a class="code" href="classNtpSRMomentum.html#o0">range</a>;
01689 
01690              trk_fit_pass       = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o42">fit</a>.<a class="code" href="classNtpSRFitTrack.html#o0">pass</a>;
01691              <span class="comment">//     trkmomrange = EnergyCorrections::CorrectMomentumFromRange(trkmomrange,!file_is_mc,det);</span>
01692              <span class="comment">//now use FullyCorrect Versions</span>
01693              trkmomrange = <a class="code" href="namespaceEnergyCorrections.html#a29">EnergyCorrections::FullyCorrectMomentumFromRange</a>(trkmomrange,vc,reltype);
01694              trkqp             = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o41">momentum</a>.<a class="code" href="classNtpSRMomentum.html#o1">qp</a>;
01695              <span class="keywordflow">if</span>(trkqp!=0){
01696                <span class="comment">//             trkqp = 1.0/EnergyCorrections::CorrectSignedMomentumFromCurvature(1.0/trkqp,</span>
01697                trkqp = 1.0/<a class="code" href="namespaceEnergyCorrections.html#a31">EnergyCorrections::FullyCorrectSignedMomentumFromCurvature</a>(1.0/trkqp,vc,reltype);
01698              }
01699 
01700              trkeqp            = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o41">momentum</a>.<a class="code" href="classNtpSRMomentum.html#o2">eqp</a>;
01701              trkphfrac         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o32">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>/<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o19">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
01702              trkphplane        = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o32">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o1">mip</a>/<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o0">n</a>;
01703              trkchi2           = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o42">fit</a>.<a class="code" href="classNtpSRFitTrack.html#o4">chi2</a>;
01704              trkndf           = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o42">fit</a>.<a class="code" href="classNtpSRFitTrack.html#o1">ndof</a>;
01705              reco_trk_vtxx         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>;
01706              reco_trk_vtxy         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>;
01707              reco_trk_vtxz         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>;
01708 
01709              reco_trk_endx         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>;
01710              reco_trk_endy         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>;
01711              reco_trk_endz         = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>;
01712 
01713              sr_contained          = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o31">contained</a>;
01714              
01715              <span class="comment">// compute CC event class as defined by Pitt group</span>
01716              pitt_evt_class = <a class="code" href="classMadTVAnalysis.html#e1">PittTrkContained</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>,
01717                                                <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>,
01718                                                <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>,
01719                                                <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>,
01720                                                <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o35">end</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>);
01721              duvvtx=<a class="code" href="NtpStNC_8h.html#a17">abs</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o4">begu</a> - <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o5">begv</a>);
01722              <span class="comment">// based on the event class, go back and recompute</span>
01723              <span class="comment">// the muon and neutrino energy</span>
01724              <span class="comment">// modified here, now use is_cev=IsFidAll()</span>
01725              <span class="keywordtype">int</span> do_meth=0; <span class="comment">// emu reco method we should use</span>
01726              <span class="keywordflow">if</span>( is_cev==1 ) 
01727                do_meth=2; <span class="comment">// stoppers --&gt; range</span>
01728              <span class="keywordflow">else</span> <span class="keywordflow">if</span>( is_cev==0 ) 
01729                do_meth=1; <span class="comment">// punch-through --&gt; curvature</span>
01730 
01731              <span class="comment">// with the advent of trk.fit.pass==0 being accepted</span>
01732              <span class="comment">// it is possible that we have to modify do_meth to</span>
01733              <span class="comment">// account for qp==0</span>
01734              <span class="comment">// in this case we have to use the range</span>
01735              <span class="keywordflow">if</span>(trkqp==0) do_meth=2;          
01736 
01737              <span class="keywordflow">if</span>(do_meth==1 || do_meth==2){
01738                <span class="comment">//             reco_emu = RecoMKMuEnergy(do_meth,track_index,!file_is_mc,det);</span>
01739                reco_emu = <a class="code" href="classMadQuantities.html#a58">RecoMuEnergyNew</a>(do_meth,track_index,
01740                                           vc,reltype,
01741                                           EnergyCorrections::kDefault);
01742                <span class="comment">// update reco_enu to account for possible change </span>
01743                <span class="comment">// in reco_emu</span>
01744                reco_enu = reco_eshw + reco_emu;
01745              }
01746              emu_meth=do_meth; <span class="comment">// was forgetting about this</span>
01747 
01748              <span class="comment">//check to see if track vertex is in fid. vol</span>
01749              <span class="keywordflow">if</span>(detector==1){
01750                is_trk_fid = <a class="code" href="classMadTVAnalysis.html#e0">PittInFidVol</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>, <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>, 
01751                                          <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>,
01752                                          <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>, <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>);
01753              }
01754              <span class="keywordflow">else</span>{
01755                is_trk_fid = <a class="code" href="classMadTVAnalysis.html#b5">InFidVol</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>,<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>,
01756                                      <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>);
01757              }
01758 
01759              <span class="comment">// look for showers along muon track</span>
01760              reco_mushw=<a class="code" href="classMadTVAnalysis.html#b14">MuonShowerEnergy</a>(ntpEvent, ntpTrack);
01761 
01762              <span class="comment">// pitt tracking quality cuts</span>
01763              Int_t temp_ndof = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o42">fit</a>.<a class="code" href="classNtpSRFitTrack.html#o1">ndof</a>;
01764              <span class="keywordflow">if</span>(temp_ndof==0) temp_ndof=1;
01765              <span class="keywordflow">if</span>( (<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o42">fit</a>.<a class="code" href="classNtpSRFitTrack.html#o0">pass</a>&gt;0) 
01766                  &amp;&amp; (<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o42">fit</a>.<a class="code" href="classNtpSRFitTrack.html#o4">chi2</a>/temp_ndof &lt;20 )
01767                  &amp;&amp; <a class="code" href="NtpStNC_8h.html#a17">abs</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o4">begu</a> - <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o33">plane</a>.<a class="code" href="classNtpSRPlane.html#o5">begv</a>)&lt;6 )
01768                pitt_trk_qual=1;
01769 
01771              <span class="keyword">const</span> <span class="keywordtype">double</span> M=(0.93827 + 0.93957)/2.0; <span class="comment">// &lt;nucleon mass&gt;</span>
01772              <span class="keywordflow">if</span>(reco_emu&gt;0) reco_Q2 = 
01773                               2*reco_enu*reco_emu*(1.0 - reco_dircosneu);
01774              reco_W2 = M*M - reco_Q2 + 2*M*reco_eshw;     
01775              <span class="keywordflow">if</span>(reco_enu&gt;0) reco_y = reco_eshw/reco_enu;
01776              <span class="keywordflow">if</span>(reco_eshw&gt;0 &amp;&amp; reco_Q2&gt;0) reco_x =  reco_Q2/(2*M*reco_eshw);
01778 
01780              <span class="keyword">const</span> <span class="keywordtype">double</span> muM=0.10566; <span class="comment">// muon mass</span>
01781              <span class="keyword">const</span> <span class="keywordtype">double</span> muP=sqrt(reco_emu*reco_emu -muM*muM);
01782              reco_qe_enu = (M*reco_emu - muM*muM/2.0)
01783                /(M - reco_emu + muP*reco_dircosneu);
01784              reco_qe_q2 = <a class="code" href="NtpStNC_8h.html#a17">abs</a>(-2.0*reco_qe_enu*(reco_emu-muP*reco_dircosneu)+muM*muM);
01786 
01788 
01789              med_qe_pid=<a class="code" href="classMadTVAnalysis.html#o2">qeid</a>.<a class="code" href="classMadQEID.html#a3">AltCalcQEID</a>(<span class="keyword">this</span>,event,reco_enu,reco_W2);
01790              med_qe_pass=<a class="code" href="classMadTVAnalysis.html#o2">qeid</a>.<a class="code" href="classMadQEID.html#a8">PassMEDQECut</a>(reco_enu,med_qe_pid);
01792 
01794              <span class="keywordflow">if</span>(<a class="code" href="classMadTVAnalysis.html#o0">nsid</a>.<a class="code" href="classMadNsID.html#a3">ChooseWeightFile</a>(det,current_beam)){
01795                <span class="keywordflow">if</span>(!<a class="code" href="classMadTVAnalysis.html#o0">nsid</a>.<a class="code" href="classMadNsID.html#a1">GetPID</a>(<span class="keyword">this</span>,event,det,niki_cc_pid)) niki_cc_pid=-999;
01796              }
01797              <span class="keywordflow">else</span> niki_cc_pid=-999;
01798              <span class="comment">// original code made detector dependent fiducial volume cut here</span>
01799              <span class="comment">// but, it's not necessary since PID has already been</span>
01800              <span class="comment">// calculated...</span>
01801              <span class="comment">// must reevaluate efficiency or make same cut downstream      </span>
01803 <span class="comment"></span>
01805              <span class="keywordflow">if</span>(det==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a> &amp;&amp; !file_is_mc){
01806                <span class="keywordflow">if</span>(recover==<span class="stringliteral">""</span>||recover.find(<span class="stringliteral">"birch"</span>)&lt;recover.size()||
01807                   recover.find(<span class="stringliteral">"Birch"</span>)&lt;recover.size()||
01808                   recover.find(<span class="stringliteral">"BIRCH"</span>)&lt;recover.size()||
01809                   recover.find(<span class="stringliteral">"R1.18"</span>)&lt;recover.size()){
01810                  <a class="code" href="classMadTVAnalysis.html#o1">dpid</a>.<a class="code" href="classMadDpID.html#a10">SetPHCorrection</a>(1.018);
01811                }
01812                <span class="keywordflow">if</span>(recover.find(<span class="stringliteral">"cedar"</span>)&lt;recover.size()||
01813                   recover.find(<span class="stringliteral">"Cedar"</span>)&lt;recover.size()||
01814                   recover.find(<span class="stringliteral">"CEDAR"</span>)&lt;recover.size()||
01815                   recover.find(<span class="stringliteral">"R1.24"</span>)&lt;recover.size()){
01816                  <a class="code" href="classMadTVAnalysis.html#o1">dpid</a>.<a class="code" href="classMadDpID.html#a10">SetPHCorrection</a>(1.0);
01817                }
01818              }
01819              <span class="keywordflow">if</span>(<a class="code" href="classMadTVAnalysis.html#o1">dpid</a>.<a class="code" href="classMadDpID.html#a6">ChoosePDFs</a>(det,current_beam,recover,mcver)){
01820                dave_cc_pid = <a class="code" href="classMadTVAnalysis.html#o1">dpid</a>.<a class="code" href="classMadDpID.html#a2">CalcPID</a>(<span class="keyword">this</span>,event,0);
01821              }
01823 
01824 
01826              <span class="comment">//     if(abid.PassCuts(ntpEvent,strecord)){</span>
01827              andy_cc_pid=<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a3">CalcPID</a>(ntpEvent,strecord);
01828              abid_costheta         =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a37">GetRecoCosTheta</a>(ntpEvent,strecord);
01829              abid_eventenergy      =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a42">GetRecoE</a>(ntpEvent,strecord);
01830              abid_trackcharge      =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a33">GetTrackEMCharge</a>(ntpEvent,strecord);
01831              abid_trackenergy      =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a31">GetTrackPlanes</a>(ntpEvent,strecord);
01832              abid_tracklikeplanes  =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a32">GetTrackLikePlanes</a>(ntpEvent,strecord);
01833              abid_trackphfrac      =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a35">GetTrackPHfrac</a>(ntpEvent,strecord);
01834              abid_trackphmean      =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a36">GetTrackPHmean</a>(ntpEvent,strecord);
01835              abid_trackqpsigmaqp   =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a34">GetTrackQPsigmaQP</a>(ntpEvent,strecord);
01836              abid_y                =<a class="code" href="classMadTVAnalysis.html#o3">abid</a>.<a class="code" href="classMadAbID.html#a39">GetRecoY</a>(ntpEvent,strecord);
01837              <span class="comment">//     }</span>
01838 
01839              TObject *recobj=0;
01840              <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p7">record</a>!=0){
01841                recobj=<a class="code" href="classMadBase.html#p7">record</a>;
01842              }
01843              <span class="keywordflow">else</span>{
01844                recobj=<a class="code" href="classMadBase.html#p6">strecord</a>;
01845              }
01846 
01847 
01848              <a class="code" href="classMadBase.html#b0">LoadTrack</a>(track_index);
01849              <span class="comment">//figure out planes in trk &gt; 1.5 pe</span>
01850              <span class="keywordtype">float</span> temp_ph;
01851              trk_nplanes=<a class="code" href="classMadTVAnalysis.html#b9">NPlanesInObj</a>(recobj,ntpTrack,1.5,temp_ph);
01852              <span class="comment">//figure out strips in trk &gt; 1.5 pe</span>
01853              trk_nstrips=<a class="code" href="classMadTVAnalysis.html#b10">NStripsInObj</a>(recobj,ntpTrack,1.5,temp_ph);
01854 
01855            }
01856            <span class="keywordflow">else</span> {
01857              trklength         = 0;
01858              trkmomrange       = 0;
01859              trkqp             = 0;
01860              trkeqp            = 0;
01861              trkphfrac         = 0;
01862              trkphplane        = 0;
01863              is_trk_fid        = -1;
01864            }
01865 
01866            <span class="comment">//this used to load the slice associated with the track</span>
01867            <span class="comment">//but we really want the slice associated witht the event</span>
01868            <span class="comment">//tv 10-19-05</span>
01869            <a class="code" href="classMadBase.html#b4">LoadSlice</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o1">slc</a>);
01870            <span class="comment">//       cout&lt;&lt;"*********SNARL="&lt;&lt;snarl&lt;&lt;" "&lt;&lt;event</span>
01871            <span class="comment">//           &lt;&lt;"*********************************"&lt;&lt;endl;</span>
01872            TObject *recobj=0;
01873            <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p7">record</a>!=0){
01874              recobj=<a class="code" href="classMadBase.html#p7">record</a>;
01875            }
01876            <span class="keywordflow">else</span>{
01877              recobj=<a class="code" href="classMadBase.html#p6">strecord</a>;
01878            }
01879 
01880            <span class="keywordtype">float</span> temp_ph;
01881            <span class="comment">//figure out planes in slice &gt; 1.5 pe</span>
01882            slc_nplanes=<a class="code" href="classMadTVAnalysis.html#b9">NPlanesInObj</a>(recobj,ntpSlice,1.5,temp_ph);
01883            <span class="comment">//figure out planes in evt &gt; 1.5 pe</span>
01884            evt_nplanes=<a class="code" href="classMadTVAnalysis.html#b9">NPlanesInObj</a>(recobj,ntpEvent,1.5,temp_ph);
01885            <span class="comment">//figure out strips in slice &gt; 1.5 pe</span>
01886            slc_nstrips=<a class="code" href="classMadTVAnalysis.html#b10">NStripsInObj</a>(recobj,ntpSlice,1.5,temp_ph);
01887            <span class="comment">//figure out strips in evt &gt; 1.5 pe</span>
01888            evt_nstrips=<a class="code" href="classMadTVAnalysis.html#b10">NStripsInObj</a>(recobj,ntpEvent,1.5,temp_ph);
01889 
01890 
01891            <span class="keywordflow">if</span>(shower_index!=-1 &amp;&amp; reco_eshw&gt;0){ <span class="comment">// case of no vertex shower</span>
01892              <a class="code" href="classMadBase.html#b1">LoadShower</a>(shower_index);
01893              shwlength=<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o30">plane</a>.<a class="code" href="classNtpSRPlane.html#o0">n</a>;
01894              shw_nplanes_raw=<a class="code" href="classMadTVAnalysis.html#b9">NPlanesInObj</a>(recobj,ntpShower,0.0,shw_ph_raw);
01895              shw_nplanes_cut=<a class="code" href="classMadTVAnalysis.html#b9">NPlanesInObj</a>(recobj,ntpShower,1.5,shw_ph_cut);
01896 
01897              shwend=<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o30">plane</a>.<a class="code" href="classNtpSRPlane.html#o6">end</a>;
01898              shwbeg=<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o30">plane</a>.<a class="code" href="classNtpSRPlane.html#o3">beg</a>;
01899              reco_shw_vtxx=<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>;
01900              reco_shw_vtxy=<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>;
01901              reco_shw_vtxz=<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>;
01902 
01903 
01905              <span class="keywordtype">int</span> ncl = <a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o25">ncluster</a>;
01906 
01907              <span class="comment">//Float_t  zvtx</span>
01908              <span class="comment">//Float_t  tposvtx</span>
01909              <span class="comment">//Float_t  slope</span>
01910              <span class="comment">//Float_t  avgdev</span>
01911              <span class="comment">/*</span>
01912 <span class="comment">             static TH1F hswu("hswu","",400,4,-4);</span>
01913 <span class="comment">             static TH1F hswu_wtd("hswu_wtd","",400,4,-4);</span>
01914 <span class="comment">             static TH1F hswv("hswv","",400,4,-4);</span>
01915 <span class="comment">             static TH1F hswv_wtd("hswv_wtd","",400,4,-4);</span>
01916 <span class="comment">             hswu.Reset();</span>
01917 <span class="comment">             hswu_wtd.Reset();</span>
01918 <span class="comment">             hswv.Reset();</span>
01919 <span class="comment">             hswv_wtd.Reset();</span>
01920 <span class="comment">             */</span>
01921              <a class="code" href="classMoments.html">Moments</a> mom_swu;
01922              <a class="code" href="classMoments.html">Moments</a> mom_swu_wtd;
01923              <a class="code" href="classMoments.html">Moments</a> mom_swv;
01924              <a class="code" href="classMoments.html">Moments</a> mom_swv_wtd;
01925 
01926              etu=etv=elu=elv=0.0; 
01927              swu=swv=wswu=wswv=0.0;
01928 
01929              <span class="comment">//     const float ss_cut=0.150;//GeV</span>
01930              <span class="keyword">const</span> <span class="keywordtype">float</span> ss_cut=0.0;<span class="comment">//GeV</span>
01931              <span class="keywordtype">float</span> totsigssu=0.0; <span class="comment">// em and hadr subshowers</span>
01932              <span class="keywordtype">float</span> totsigssv=0.0; <span class="comment">// em and hadr subshowers</span>
01933              <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0; ii&lt;ncl; ii++){
01934                <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#b2">LoadCluster</a>(<a class="code" href="classMadBase.html#p15">ntpShower</a>-&gt;<a class="code" href="classNtpSRShower.html#o26">clu</a>[ii])){
01935                  <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a> &gt;ss_cut){
01936                    nss[<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o5">id</a>]+=1;
01937                    ess[<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o5">id</a>]+=<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01938                    ntotss++;
01939                    <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o5">id</a> &lt;2){
01940                      <span class="comment">// slope = tpos/zpos?</span>
01941                      <span class="keywordtype">float</span> sinang = sin(atan(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o14">slope</a>));
01942                      <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o1">planeview</a>==PlaneView::kU){
01943                        totsigssu+=<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01944                        <span class="comment">//hswu.Fill(ntpCluster-&gt;tposvtx);</span>
01945                        mom_swu.<a class="code" href="classMoments.html#a1">AddPoint</a>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o13">tposvtx</a>);
01946                        mom_swu_wtd.<a class="code" href="classMoments.html#a1">AddPoint</a>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o13">tposvtx</a>,
01947                                             <a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>);
01948 
01949                        etu += sinang*<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01950                        elu += sqrt(fabs(1-sinang*sinang))*<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01951                      }
01952                      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o1">planeview</a>==PlaneView::kV){
01953                        totsigssv+=<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01954                        <span class="comment">//hswv.Fill(ntpCluster-&gt;tposvtx);</span>
01955                        mom_swv.<a class="code" href="classMoments.html#a1">AddPoint</a>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o13">tposvtx</a>);
01956                        mom_swv_wtd.<a class="code" href="classMoments.html#a1">AddPoint</a>(<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o13">tposvtx</a>,
01957                                             <a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>);
01958 
01959                        etv += sinang*<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01960                        elv += sqrt(fabs(1-sinang*sinang))*<a class="code" href="classMadBase.html#p16">ntpCluster</a>-&gt;<a class="code" href="classNtpSRCluster.html#o16">ph</a>.<a class="code" href="classNtpSRStripPulseHeight.html#o2">gev</a>;
01961                      }
01962                    }
01963                  }
01964                }
01965              }
01966              <span class="comment">/*</span>
01967 <span class="comment">             for(int ii=0; ii&lt;ncl; ii++){</span>
01968 <span class="comment">               if(LoadCluster(ntpShower-&gt;clu[ii])){</span>
01969 <span class="comment">                 if(ntpCluster-&gt;ph.gev &gt;ss_cut){</span>
01970 <span class="comment">                   if(ntpCluster-&gt;id &lt;2){</span>
01971 <span class="comment">                     if(ntpCluster-&gt;planeview==PlaneView::kU){</span>
01972 <span class="comment">                       totsigssu+=ntpCluster-&gt;ph.gev;</span>
01973 <span class="comment">                       hswu_wtd.Fill(ntpCluster-&gt;tposvtx);</span>
01974 <span class="comment">                     }</span>
01975 <span class="comment">                     else if(ntpCluster-&gt;planeview==PlaneView::kV){</span>
01976 <span class="comment">                       totsigssv+=ntpCluster-&gt;ph.gev;</span>
01977 <span class="comment">                       hswv_wtd.Fill(ntpCluster-&gt;tposvtx);</span>
01978 <span class="comment">                     }</span>
01979 <span class="comment">                   }</span>
01980 <span class="comment">                 }</span>
01981 <span class="comment">               }</span>
01982 <span class="comment">             }</span>
01983 <span class="comment">             */</span>
01984              <span class="comment">/*</span>
01985 <span class="comment">             swv=hswv.GetRMS();</span>
01986 <span class="comment">             swu=hswu.GetRMS();</span>
01987 <span class="comment">             wswv=hswv_wtd.GetRMS();</span>
01988 <span class="comment">             wswu=hswu_wtd.GetRMS();</span>
01989 <span class="comment">             */</span>
01990              swv=mom_swv.<a class="code" href="classMoments.html#a3">GetRMS</a>();
01991              swu=mom_swu.<a class="code" href="classMoments.html#a3">GetRMS</a>();
01992              wswv=mom_swv_wtd.<a class="code" href="classMoments.html#a3">GetRMS</a>();
01993              wswu=mom_swu_wtd.<a class="code" href="classMoments.html#a3">GetRMS</a>();
01994 
01996            }
01997            <span class="comment">/*</span>
01998 <span class="comment">           if(ntrack==1 &amp;&amp; reco_enu&gt;0.0 &amp;&amp; reco_enu&lt;140</span>
01999 <span class="comment">              &amp;&amp; is_pitt_fid &amp;&amp; pitt_trk_qual &amp;&amp; (is_trk_fid!=0)) pass=1;</span>
02000 <span class="comment">           */</span>
02001            <span class="keywordflow">if</span>(ntrack&gt;0 &amp;&amp; trk_fit_pass==1 &amp;&amp; is_fid==1) pass=1;
02002 
02003 
02004          } <span class="comment">// if(reco_enu&gt;0)</span>
02005        } <span class="comment">// if(PassBasicCuts())</span>
02006 
02007        <span class="comment">// for both near in time and near in space</span>
02008        <span class="comment">// index of nearest, dist of nearest, ph of nearest</span>
02009        <span class="comment">// near_vtx_space_idx, near_vtx_space_dist, near_vtx_space_ph </span>
02010        <span class="comment">// nvsi, nvsd, nvsp</span>
02011        <span class="comment">// near_vtx_time_idx, near_vtx_time_dist, near_vtx_time_ph </span>
02012        <span class="comment">// nvti, nvtd, nvtp</span>
02013        <span class="comment">// for the nearest event, the index of the event nearest it</span>
02014        <span class="comment">// ph of event nearest it, distance of event nearest it</span>
02015        <span class="comment">//  maybe use for event rehashing</span>
02016        <span class="comment">// back_vtx_space_idx, back_vtx_space_dist, back_vtx_space_ph </span>
02017        <span class="comment">// bvsi, bvsd, bvsp</span>
02018        <span class="comment">// back_vtx_time_idx, back_vtx_time_dist, back_vtx_time_ph </span>
02019        <span class="comment">// bvti, bvtd, bvtp</span>
02020 
02021        nby.<a class="code" href="classNearbyVertexFinder.html#a4">ClosestSpatial</a>(i,nvsi,nvsd,nvst,nvsp,nvsevt);
02022        nby.<a class="code" href="classNearbyVertexFinder.html#a4">ClosestSpatial</a>(nvsi,bvsi,bvsd,bvst,bvsp,bvsevt);
02023        nby.<a class="code" href="classNearbyVertexFinder.html#a5">ClosestTemporal</a>(i,nvti,nvtd,nvtt,nvtp,nvtevt);
02024        nby.<a class="code" href="classNearbyVertexFinder.html#a5">ClosestTemporal</a>(nvti,bvti,bvtd,bvtt,bvtp,bvtevt);
02025 
02026        <a class="code" href="classMadTVAnalysis.html#b11">GetEvtTimeChar</a>(evttimemin,evttimemax,evttimeln);
02027        <a class="code" href="classMadTVAnalysis.html#b12">GetEvtTimeCharPHC</a>(evttimeminphc,evttimemaxphc,evttimelnphc);
02028        <a class="code" href="classMadTVAnalysis.html#b15">EarlyActivity</a>(i,earlywph,earlywphpw,earlywphsphere,
02029                      ph1000,ph500,ph100,lateph1000,lateph500,
02030                      lateph100,lateph50);
02031        evtph = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o19">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02032 
02033        <a class="code" href="classMadTVAnalysis.html#b16">DupRecoStrips</a>(i,nduprs,dupphrs);
02034 
02035        <span class="comment">//figure out batch number</span>
02036        <span class="comment">//note this will only match up with the spillmon info for</span>
02037        <span class="comment">//sure when there are 6 batches</span>
02038        <span class="comment">//if there are only 5 batches, we don't know if there</span>
02039        <span class="comment">//were only 5 batches in the MI, or if the first of those</span>
02040        <span class="comment">//batches went elsewhere.</span>
02041        batchnumber=<a class="code" href="classMadTVAnalysis.html#b13">FindBatchNumber</a>(evttimemin);
02042 
02043 
02044        tree-&gt;Fill();
02045      } <span class="comment">// loop over events</span>
02046    } <span class="comment">// loop over entries</span>
02047 
02048    <span class="comment">// delete nuparent; // should I do this?</span>
02049    save.cd();
02050    pottree-&gt;Fill();
02051    pottree-&gt;Write();
02052    tree-&gt;Write();
02053    save.Write();
02054    save.Close();
02055 
02056    }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b16" doxytag="MadTVAnalysis::DupRecoStrips" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::DupRecoStrips </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>evidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>nduprs</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>dupphrs</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l03156">3156</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadBase_8cxx-source.html#l00536">MadBase::LoadEvent()</a>, <a class="el" href="MadBase_8cxx-source.html#l00692">MadBase::LoadStrip()</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00045">NtpSREventSummary::nevent</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, and <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>03157 {
03158   <span class="comment">//zero the variables</span>
03159   nduprs=0;
03160   dupphrs=0.;
03161 
03162   <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b3">LoadEvent</a>(evidx)) <span class="keywordflow">return</span>; <span class="comment">//no event found</span>
03163   
03164   map&lt;int,float&gt; sindex;
03165   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;i++){
03166     <span class="keywordtype">int</span> si = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>[i];
03167     <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(si)) <span class="keywordflow">continue</span>;
03168     <span class="keywordtype">float</span> ph = <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
03169     sindex[<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>[i]]=ph;
03170   }
03171 
03172   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o6">nevent</a>;i++){
03173     <span class="keywordflow">if</span>(i==evidx){
03174       <span class="keywordflow">continue</span>;
03175     }
03176     <a class="code" href="classMadBase.html#b3">LoadEvent</a>(i);  <span class="comment">//load a new event</span>
03177     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;j++){
03178       map&lt;int,float&gt;::iterator it(sindex.find(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>[j]));
03179       <span class="keywordflow">if</span>(it!=sindex.end()){
03180         nduprs++;
03181         dupphrs+=it-&gt;second;
03182       }
03183     }
03184   }
03185 
03186   <span class="comment">//reload the current event</span>
03187   <a class="code" href="classMadBase.html#b3">LoadEvent</a>(evidx);
03188 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b15" doxytag="MadTVAnalysis::EarlyActivity" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::EarlyActivity </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>evidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>earlywph</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>earlywphpw</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>earlywphsphere</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ph1000</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ph500</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ph100</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lateph1000</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lateph500</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lateph100</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>lateph50</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02800">2800</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8cxx-source.html#l00055">fEarlyActivityWindowSize</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00058">fEarlyPlaneSphere</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00057">fNPlaneEarlyAct</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00056">fPMTTimeConstant</a>, <a class="el" href="MadBase_8cxx-source.html#l00536">MadBase::LoadEvent()</a>, <a class="el" href="MadBase_8cxx-source.html#l00692">MadBase::LoadStrip()</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00040">NtpSREventSummary::nstrip</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00037">NtpSRVertex::plane</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00052">NtpSRStrip::plane</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00048">NtpSRStrip::planeview</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00055">NtpSRStrip::pmtindex0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00056">NtpSRStrip::pmtindex1</a>, <a class="el" href="nrutil__val_8h-source.html#l00374">pow()</a>, <a class="el" href="idep__ldep_8cxx-source.html#l00984">s()</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00057">NtpSRStrip::time0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00058">NtpSRStrip::time1</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00053">NtpSRStrip::tpos</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00046">NtpSREventSummary::trigtime</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00038">NtpSRVertex::u</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00039">NtpSRVertex::v</a>, <a class="el" href="NtpSREvent_8h-source.html#l00086">NtpSREvent::vtx</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00054">NtpSRStrip::z</a>, and <a class="el" href="NtpSRVertex_8h-source.html#l00042">NtpSRVertex::z</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02810 {
02811   <span class="comment">//zero the variables</span>
02812   earlywph=0.;
02813   earlywphpw=0.; 
02814   earlywphsphere=0.;
02815   ph1000=0.;
02816   ph500=0.;
02817   ph100=0.;
02818   lateph1000=0.;
02819   lateph500=0.;
02820   lateph100=0.;
02821   lateph50=0.;
02822 
02823   <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b3">LoadEvent</a>(evidx)) <span class="keywordflow">return</span>; <span class="comment">//no event found</span>
02824   
02825   <span class="comment">//find the time of the earliest strip in the event</span>
02826   <span class="keywordtype">double</span> earliestEventTime = 1.e20;
02827   <span class="keywordtype">double</span> latestEventTime = 0.;
02828   map&lt;int,int&gt; eventPlanes;
02829   <span class="keywordtype">double</span> trigtime = <a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o7">trigtime</a>;
02830 
02831   <span class="comment">//loop over strips in the event</span>
02832   <span class="comment">//find the earliest strip time </span>
02833   <span class="comment">//make a map of the pmt's hit in this event</span>
02834   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="idep__ldep_8cxx.html#a10">s</a>=0;<a class="code" href="idep__ldep_8cxx.html#a10">s</a>&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;<a class="code" href="idep__ldep_8cxx.html#a10">s</a>++){
02835     <span class="keywordtype">int</span> stripindex = <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>[<a class="code" href="idep__ldep_8cxx.html#a10">s</a>];
02836     <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(stripindex)) <span class="keywordflow">continue</span>;
02837     <span class="comment">//calculate ph weighted strip time (over the two ends,</span>
02838     <span class="comment">//should be equivalent to ph1 in ND</span>
02839     <span class="keywordtype">float</span> phwt = ((<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>*<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o11">time1</a>+
02840                    <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>*<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o10">time0</a>)/
02841                   (<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>));
02842       
02843     <span class="keywordtype">double</span> time = 1.e9*(phwt-trigtime);
02844     <span class="keywordflow">if</span>(time&lt;earliestEventTime){
02845       earliestEventTime = time;
02846     }
02847     <span class="keywordflow">if</span>(time&gt;latestEventTime){
02848       latestEventTime=time;
02849     }
02850     <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>&gt;0){
02851       <span class="keywordflow">if</span>(eventPlanes.find(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o9">pmtindex1</a>)==eventPlanes.end()){
02852         eventPlanes[<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o9">pmtindex1</a>] = 1;
02853       }
02854     }
02855     <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>&gt;0){
02856       <span class="keywordflow">if</span>(eventPlanes.find(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o8">pmtindex0</a>)==eventPlanes.end()){
02857         eventPlanes[<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o9">pmtindex1</a>] = 1;
02858       }
02859     }
02860   }
02861 
02862   <span class="comment">//now find the weigthed sum of ADC for the early strips - make sure the early</span>
02863   <span class="comment">//strips come from the same pmts as the event strips.</span>
02864   <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="idep__ldep_8cxx.html#a10">s</a>=0;<a class="code" href="idep__ldep_8cxx.html#a10">s</a>&lt;<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;<a class="code" href="idep__ldep_8cxx.html#a10">s</a>++){
02865     <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(s)) <span class="keywordflow">continue</span>;
02866     <span class="comment">//work in ns</span>
02867     <span class="keywordtype">float</span> phwt = ((<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>*<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o11">time1</a>+
02868                    <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>*<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o10">time0</a>)/
02869                   (<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>));
02870     <span class="keywordtype">double</span> newtime = 1.e9*(phwt-trigtime);
02871     <span class="keywordtype">double</span> dt=(earliestEventTime-newtime);
02872     <span class="keywordtype">double</span> dtlate=newtime-latestEventTime;
02873     <span class="keywordtype">float</span> d=1000.;
02874     <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o1">planeview</a>==PlaneView::kU){
02875       d=sqrt((<a class="code" href="nrutil__val_8h.html#a22">pow</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>-<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o6">tpos</a>,2)+
02876               <a class="code" href="nrutil__mtl_8h.html#a20">pow</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>-<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o7">z</a>,2)));
02877     }
02878     <span class="keywordflow">else</span>{
02879       d=sqrt((<a class="code" href="nrutil__val_8h.html#a22">pow</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>-<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o6">tpos</a>,2)+
02880               <a class="code" href="nrutil__mtl_8h.html#a20">pow</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>-<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o7">z</a>,2)));
02881     }
02882     <span class="keywordflow">if</span>(d&lt;fEarlyPlaneSphere&amp;&amp;dtlate&gt;0.){
02883       <span class="keywordflow">if</span>(dtlate&lt;1000.){
02884         lateph1000+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02885       }
02886       <span class="keywordflow">if</span>(dtlate&lt;500.){
02887         lateph500+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02888       }
02889       <span class="keywordflow">if</span>(dtlate&lt;100.){
02890         lateph100+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02891       }
02892       <span class="keywordflow">if</span>(dtlate&lt;50.){
02893         lateph50+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02894       }
02895     }   
02896     <span class="keywordflow">if</span>(d&lt;fEarlyPlaneSphere&amp;&amp;dt&gt;0.){
02897       <span class="keywordflow">if</span>(dt&lt;1000.){
02898         ph1000+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02899       }
02900       <span class="keywordflow">if</span>(dt&lt;500.){
02901         ph500+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02902       }
02903       <span class="keywordflow">if</span>(dt&lt;100.){
02904         ph100+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02905       }
02906     }
02907     <span class="keywordflow">if</span>(dt&gt;0.&amp;&amp;dt&lt;1000.*<a class="code" href="classMadTVAnalysis.html#v7">fEarlyActivityWindowSize</a>){
02908       <span class="keywordtype">double</span> eadc = ((<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>)*
02909                      TMath::Exp(-1.*dt/fPMTTimeConstant));
02910       <span class="comment">//if this strip has activity in the same pmt as our event,</span>
02911       <span class="comment">//sum up the early pulse height</span>
02912       <span class="keywordflow">if</span>(eventPlanes.find(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o9">pmtindex1</a>)!=eventPlanes.end()){
02913         earlywph += eadc;
02914       }      
02915       <span class="comment">//if this strip is within some radius of event vertex, </span>
02916       <span class="comment">//add up the early pulse height</span>
02917       <span class="keywordflow">if</span>(d&lt;<a class="code" href="classMadTVAnalysis.html#v10">fEarlyPlaneSphere</a>){
02918         earlywphsphere+=eadc;
02919       }
02920       <span class="comment">//if this strip is within the plane window of event vertex,</span>
02921       <span class="comment">//add up the early pulseheight</span>
02922       <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>&gt;=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o0">plane</a>&amp;&amp;
02923          <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>&lt;=<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o0">plane</a>+<a class="code" href="classMadTVAnalysis.html#v9">fNPlaneEarlyAct</a>){
02924         earlywphpw+=eadc;
02925       }
02926     }
02927   }
02928 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e4" doxytag="MadTVAnalysis::FarTrkContained" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int MadTVAnalysis::FarTrkContained </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>z</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l03116">3116</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
<div class="fragment"><pre>03117 {
03118   <span class="keywordtype">int</span> is_cont=0;
03119   <span class="comment">//arguments should correspond to track end</span>
03120   <span class="comment">//returns:</span>
03121   <span class="comment">//1 if track is partially contained</span>
03122   <span class="comment">//2 if  track is fully contained</span>
03123   <span class="keyword">const</span> Float_t r = sqrt(x*x+y*y);
03124 
03125   <span class="keywordflow">if</span>(r&lt;=3.5&amp;&amp;r&gt;.5&amp;&amp;((z&gt;=0.5&amp;&amp;z&lt;=14.5)||(z&gt;=16.5&amp;&amp;z&lt;=29.4))){<span class="comment">//contained</span>
03126     is_cont=2;
03127   }
03128   <span class="keywordflow">else</span>{<span class="comment">//not contained</span>
03129     is_cont=1;
03130   }
03131   <span class="keywordflow">return</span> is_cont;
03132 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b18" doxytag="MadTVAnalysis::FDRCBoundary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Int_t MadTVAnalysis::FDRCBoundary </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l03189">3189</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpSRPlane_8h-source.html#l00040">NtpSRPlane::beg</a>, <a class="el" href="NtpSRPlane_8h-source.html#l00043">NtpSRPlane::end</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00044">NtpSREventSummary::nshower</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00051">NtpSREventSummary::ph</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00063">NtpSREventSummary::plane</a>, and <a class="el" href="NtpSRPulseHeight_8h-source.html#l00035">NtpSRPulseHeight::raw</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>03189                                  {
03190   Int_t litag=0;
03191   Int_t numshower=<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o5">nshower</a>;
03192   Float_t allph=<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o9">ph</a>.<a class="code" href="classNtpSRPulseHeight.html#o0">raw</a>;
03193   Int_t plbeg=<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o11">plane</a>.<a class="code" href="classNtpSRPlane.html#o3">beg</a>;
03194   Int_t plend=<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o11">plane</a>.<a class="code" href="classNtpSRPlane.html#o6">end</a>;
03195 
03196   <span class="keywordflow">if</span> (numshower) {
03197     <span class="keywordflow">if</span> (allph&gt;1e6) litag+=10;
03198 
03199     <span class="keywordflow">if</span> (((plbeg==1 || plbeg==2) &amp;&amp; (plend==63 || plend==64)) ||
03200         ((plbeg==65 || plbeg==66) &amp;&amp; (plend==127 || plend==128)) ||
03201         ((plbeg==129 || plbeg==130) &amp;&amp; (plend==191 || plend==192)) ||
03202         ((plbeg==193 || plbeg==194) &amp;&amp; (plend==247 || plend==248))) litag++;
03203     <span class="keywordflow">if</span> (((plbeg==250 || plbeg==251) &amp;&amp; (plend==312 || plend==313)) ||
03204         ((plbeg==314 || plbeg==315) &amp;&amp; (plend==376 || plend==377)) ||
03205         ((plbeg==378 || plbeg==379) &amp;&amp; (plend==440 || plend==441)) ||
03206         ((plbeg==442 || plbeg==443) &amp;&amp; (plend==484 || plend==485))) litag++;
03207   }
03208   <span class="keywordflow">return</span> litag;
03209 
03210 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="MadTVAnalysis::FillMCHists" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::FillMCHists </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TFile *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02931">2931</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpMCTruth_8h-source.html#l00045">NtpMCTruth::iaction</a>, <a class="el" href="NtpMCTruth_8h-source.html#l00038">NtpMCTruth::inu</a>, <a class="el" href="NtpMCTruth_8h-source.html#l00044">NtpMCTruth::iresonance</a>, <a class="el" href="MadBase_8cxx-source.html#l00553">MadBase::LoadTruth()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">NDRadialFidVol()</a>, <a class="el" href="NtpMCSummary_8h-source.html#l00037">NtpMCSummary::nmc</a>, <a class="el" href="NtpMCTruth_8h-source.html#l00067">NtpMCTruth::p4neu</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02278">PittInFidVol()</a>, <a class="el" href="NtpMCTruth_8h-source.html#l00064">NtpMCTruth::vtxx</a>, <a class="el" href="NtpMCTruth_8h-source.html#l00065">NtpMCTruth::vtxy</a>, and <a class="el" href="NtpMCTruth_8h-source.html#l00066">NtpMCTruth::vtxz</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02931                                           {
02932 
02933   <span class="keyword">static</span> <span class="keywordtype">bool</span> first=<span class="keyword">true</span>;
02934 
02935   <span class="keyword">static</span> TH1* h_numu_pf_tot = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_pf_tot"</span>,<span class="stringliteral">"CC; true neutrino energy (GeV)"</span>,
02936                                  240,0.0,120.0);
02937 
02938   <span class="keyword">static</span> TH1* h_numu_pf_qe = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_pf_qe"</span>,<span class="stringliteral">"QE; true neutrino energy (GeV)"</span>,
02939                                  240,0.0,120.0);
02940 
02941   <span class="keyword">static</span> TH1* h_numu_pf_res = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_pf_res"</span>,<span class="stringliteral">"RES; true neutrino energy (GeV)"</span>,
02942                                  240,0.0,120.0);
02943 
02944   <span class="keyword">static</span> TH1* h_numu_pf_dis = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_pf_dis"</span>,<span class="stringliteral">"DIS; true neutrino energy (GeV)"</span>,
02945                                  240,0.0,120.0);
02946   <span class="keyword">static</span> TH1* h_numu_pf_nc = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_pf_nc"</span>,<span class="stringliteral">"NC; true neutrino energy (GeV)"</span>,
02947                                  240,0.0,120.0);
02948   <span class="keywordflow">if</span>(first){
02949     h_numu_pf_tot-&gt;SetDirectory(fout);
02950     h_numu_pf_qe-&gt;SetDirectory(fout);
02951     h_numu_pf_res-&gt;SetDirectory(fout);
02952     h_numu_pf_dis-&gt;SetDirectory(fout);
02953     h_numu_pf_nc-&gt;SetDirectory(fout);
02954   }
02955 
02956   <span class="keyword">static</span> TH1* h_numubar_pf_tot = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_pf_tot"</span>,<span class="stringliteral">"CC; true neutrino energy (GeV)"</span>,
02957                                  240,0.0,120.0);
02958 
02959   <span class="keyword">static</span> TH1* h_numubar_pf_qe = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_pf_qe"</span>,<span class="stringliteral">"QE; true neutrino energy (GeV)"</span>,
02960                                  240,0.0,120.0);
02961 
02962   <span class="keyword">static</span> TH1* h_numubar_pf_res = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_pf_res"</span>,<span class="stringliteral">"RES; true neutrino energy (GeV)"</span>,
02963                                  240,0.0,120.0);
02964 
02965   <span class="keyword">static</span> TH1* h_numubar_pf_dis = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_pf_dis"</span>,<span class="stringliteral">"DIS; true neutrino energy (GeV)"</span>,
02966                                  240,0.0,120.0);
02967   <span class="keyword">static</span> TH1* h_numubar_pf_nc = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_pf_nc"</span>,<span class="stringliteral">"NC; true neutrino energy (GeV)"</span>,
02968                                  240,0.0,120.0);
02969   <span class="keywordflow">if</span>(first){
02970     h_numubar_pf_tot-&gt;SetDirectory(fout);
02971     h_numubar_pf_qe-&gt;SetDirectory(fout);
02972     h_numubar_pf_res-&gt;SetDirectory(fout);
02973     h_numubar_pf_dis-&gt;SetDirectory(fout);
02974     h_numubar_pf_nc-&gt;SetDirectory(fout);
02975   }
02976 
02977 
02978 
02979   <span class="keyword">static</span> TH1* h_numu_1m_tot = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_1m_tot"</span>,<span class="stringliteral">"CC; true neutrino energy (GeV)"</span>,
02980                                  240,0.0,120.0);
02981 
02982   <span class="keyword">static</span> TH1* h_numu_1m_qe = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_1m_qe"</span>,<span class="stringliteral">"QE; true neutrino energy (GeV)"</span>,
02983                                  240,0.0,120.0);
02984 
02985   <span class="keyword">static</span> TH1* h_numu_1m_res = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_1m_res"</span>,<span class="stringliteral">"RES; true neutrino energy (GeV)"</span>,
02986                                  240,0.0,120.0);
02987 
02988   <span class="keyword">static</span> TH1* h_numu_1m_dis = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_1m_dis"</span>,<span class="stringliteral">"DIS; true neutrino energy (GeV)"</span>,
02989                                  240,0.0,120.0);
02990   <span class="keyword">static</span> TH1* h_numu_1m_nc = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numu_1m_nc"</span>,<span class="stringliteral">"NC; true neutrino energy (GeV)"</span>,
02991                                  240,0.0,120.0);
02992   <span class="keywordflow">if</span>(first){
02993     h_numu_1m_tot-&gt;SetDirectory(fout);
02994     h_numu_1m_qe-&gt;SetDirectory(fout);
02995     h_numu_1m_res-&gt;SetDirectory(fout);
02996     h_numu_1m_dis-&gt;SetDirectory(fout);
02997     h_numu_1m_nc-&gt;SetDirectory(fout);
02998   }
02999 
03000   <span class="keyword">static</span> TH1* h_numubar_1m_tot = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_1m_tot"</span>,<span class="stringliteral">"CC; true neutrino energy (GeV)"</span>,
03001                                  240,0.0,120.0);
03002 
03003   <span class="keyword">static</span> TH1* h_numubar_1m_qe = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_1m_qe"</span>,<span class="stringliteral">"QE; true neutrino energy (GeV)"</span>,
03004                                  240,0.0,120.0);
03005 
03006   <span class="keyword">static</span> TH1* h_numubar_1m_res = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_1m_res"</span>,<span class="stringliteral">"RES; true neutrino energy (GeV)"</span>,
03007                                  240,0.0,120.0);
03008 
03009   <span class="keyword">static</span> TH1* h_numubar_1m_dis = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_1m_dis"</span>,<span class="stringliteral">"DIS; true neutrino energy (GeV)"</span>,
03010                                  240,0.0,120.0);
03011   <span class="keyword">static</span> TH1* h_numubar_1m_nc = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_numubar_1m_nc"</span>,<span class="stringliteral">"NC; true neutrino energy (GeV)"</span>,
03012                                  240,0.0,120.0);
03013   <span class="keywordflow">if</span>(first){
03014     h_numubar_1m_tot-&gt;SetDirectory(fout);
03015     h_numubar_1m_qe-&gt;SetDirectory(fout);
03016     h_numubar_1m_res-&gt;SetDirectory(fout);
03017     h_numubar_1m_dis-&gt;SetDirectory(fout);
03018     h_numubar_1m_nc-&gt;SetDirectory(fout);
03019   }
03020 
03021 
03022   <span class="keyword">static</span> TH1* h_other_pf = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_other_pf"</span>,
03023                                     <span class="stringliteral">"other; true neutrino energy (GeV)"</span>,
03024                                     240,0.0,120.0);
03025 
03026   <span class="keyword">static</span> TH1* h_other_1m = <span class="keyword">new</span> TH1F(<span class="stringliteral">"h_other_1m"</span>,
03027                                     <span class="stringliteral">"other; true neutrino energy (GeV)"</span>,
03028                                     240,0.0,120.0);
03029   <span class="keywordflow">if</span>(first){
03030     h_other_pf-&gt;SetDirectory(fout);
03031     h_other_1m-&gt;SetDirectory(fout);
03032   }
03033   <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#p21">mcHeader</a>) {
03034     first=<span class="keyword">true</span>;
03035     <span class="keywordflow">return</span>;
03036   }
03037   <span class="keywordflow">for</span>(Int_t i=0; i&lt;<a class="code" href="classMadBase.html#p21">mcHeader</a>-&gt;<a class="code" href="classNtpMCSummary.html#o1">nmc</a>; i++){
03038     <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b7">LoadTruth</a>(i)) <span class="keywordflow">continue</span>; <span class="comment">// no ntpmctruth</span>
03039     <span class="keyword">const</span> Float_t k = 1.0/sqrt(2.0);
03040     Float_t x = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o23">vtxx</a>;
03041     Float_t y = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o24">vtxy</a>;
03042     Float_t z = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o25">vtxz</a>;
03043     Float_t u = k*(y+x);
03044     Float_t v = k*(y-x);
03045     Bool_t inpf = <a class="code" href="classMadTVAnalysis.html#e0">PittInFidVol</a>(x,y,z,u,v);    
03046     Int_t ndr = <a class="code" href="classMadTVAnalysis.html#e3">NDRadialFidVol</a>(x,y,z);
03047     Bool_t inr =kFALSE;
03048     <span class="keywordflow">if</span>((ndr&amp;0x8)&gt;0) inr=kTRUE;
03049     Int_t <a class="code" href="classccnc.html">ccnc</a> = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o7">iaction</a>;
03050     Int_t <a class="code" href="classprocess.html">process</a> = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o6">iresonance</a>;
03051     Int_t inu = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o2">inu</a>;
03052     Float_t E = <a class="code" href="classMadBase.html#p22">ntpTruth</a>-&gt;<a class="code" href="classNtpMCTruth.html#o26">p4neu</a>[3];
03053 
03054     
03055     <span class="keywordflow">if</span>(inu==14){ <span class="comment">// neutrinos</span>
03056       <span class="keywordflow">if</span>(ccnc==0){
03057         <span class="keywordflow">if</span>(inpf) h_numu_pf_nc-&gt;Fill(E);
03058         <span class="keywordflow">if</span>(inr) h_numu_1m_nc-&gt;Fill(E);
03059       }
03060       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ccnc==1){
03061         <span class="keywordflow">if</span>(inpf) h_numu_pf_tot-&gt;Fill(E);
03062         <span class="keywordflow">if</span>(inr) h_numu_1m_tot-&gt;Fill(E);
03063         <span class="keywordflow">switch</span>(process){
03064         <span class="keywordflow">case</span> 1001:
03065           <span class="keywordflow">if</span>(inpf) h_numu_pf_qe-&gt;Fill(E);
03066           <span class="keywordflow">if</span>(inr) h_numu_1m_qe-&gt;Fill(E);
03067           <span class="keywordflow">break</span>;
03068         <span class="keywordflow">case</span> 1002:
03069           <span class="keywordflow">if</span>(inpf) h_numu_pf_res-&gt;Fill(E);
03070           <span class="keywordflow">if</span>(inr) h_numu_1m_res-&gt;Fill(E);
03071           <span class="keywordflow">break</span>;
03072         <span class="keywordflow">case</span> 1003:
03073           <span class="keywordflow">if</span>(inpf) h_numu_pf_dis-&gt;Fill(E);
03074           <span class="keywordflow">if</span>(inr) h_numu_1m_dis-&gt;Fill(E);
03075           <span class="keywordflow">break</span>;
03076         <span class="keywordflow">default</span>:
03077           <span class="keywordflow">break</span>;
03078         }
03079       }
03080     }
03081     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inu==-14){
03082       <span class="keywordflow">if</span>(ccnc==0){
03083         <span class="keywordflow">if</span>(inpf) h_numubar_pf_nc-&gt;Fill(E);
03084         <span class="keywordflow">if</span>(inr) h_numubar_1m_nc-&gt;Fill(E);
03085       }
03086       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ccnc==1){
03087         <span class="keywordflow">if</span>(inpf) h_numubar_pf_tot-&gt;Fill(E);
03088         <span class="keywordflow">if</span>(inr) h_numubar_1m_tot-&gt;Fill(E);
03089         <span class="keywordflow">switch</span>(process){
03090         <span class="keywordflow">case</span> 1001:
03091           <span class="keywordflow">if</span>(inpf) h_numubar_pf_qe-&gt;Fill(E);
03092           <span class="keywordflow">if</span>(inr) h_numubar_1m_qe-&gt;Fill(E);
03093           <span class="keywordflow">break</span>;
03094         <span class="keywordflow">case</span> 1002:
03095           <span class="keywordflow">if</span>(inpf) h_numubar_pf_res-&gt;Fill(E);
03096           <span class="keywordflow">if</span>(inr) h_numubar_1m_res-&gt;Fill(E);
03097           <span class="keywordflow">break</span>;
03098         <span class="keywordflow">case</span> 1003:
03099           <span class="keywordflow">if</span>(inpf) h_numubar_pf_dis-&gt;Fill(E);
03100           <span class="keywordflow">if</span>(inr) h_numubar_1m_dis-&gt;Fill(E);
03101           <span class="keywordflow">break</span>;
03102         <span class="keywordflow">default</span>:
03103           <span class="keywordflow">break</span>;
03104         }
03105       }
03106     }
03107     <span class="keywordflow">else</span>{
03108       <span class="keywordflow">if</span>(inpf) h_other_pf-&gt;Fill(E);
03109       <span class="keywordflow">if</span>(inr) h_other_1m-&gt;Fill(E);
03110     }
03111   }
03112   
03113   first=<span class="keyword">false</span>;
03114 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b13" doxytag="MadTVAnalysis::FindBatchNumber" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int MadTVAnalysis::FindBatchNumber </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>mintimediff</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l03245">3245</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>03246 {
03247   <span class="comment">//cuts from peter shannahan</span>
03248     <span class="comment">//Batch 0: 1.7e-6 to 3.0e-6</span>
03249     <span class="comment">//Batch 1: 3.3e-6 to 4.5e-6</span>
03250     <span class="comment">//Batch 2: 4.9e-6 to 6.2e-6</span>
03251     <span class="comment">//Batch 3: 6.5e-6 to 7.8e-6</span>
03252     <span class="comment">//Batch 4: 8.1e-6 to 9.4e-6</span>
03253     <span class="comment">//Batch 5: 9.7e-6 to 11.0e-6</span>
03254 
03255   <span class="comment">//mintime already has triggertime subtracted</span>
03256   <span class="keywordtype">double</span> tdiff = mintime*1.e6;
03257   <span class="keywordflow">if</span>(tdiff&gt;1.7&amp;&amp;tdiff&lt;3.0) <span class="keywordflow">return</span> 0;
03258   <span class="keywordflow">if</span>(tdiff&gt;3.3&amp;&amp;tdiff&lt;4.5) <span class="keywordflow">return</span> 1;
03259   <span class="keywordflow">if</span>(tdiff&gt;4.9&amp;&amp;tdiff&lt;6.2) <span class="keywordflow">return</span> 2;
03260   <span class="keywordflow">if</span>(tdiff&gt;6.5&amp;&amp;tdiff&lt;7.8) <span class="keywordflow">return</span> 3;
03261   <span class="keywordflow">if</span>(tdiff&gt;8.1&amp;&amp;tdiff&lt;9.4) <span class="keywordflow">return</span> 4;
03262   <span class="keywordflow">if</span>(tdiff&gt;9.7&amp;&amp;tdiff&lt;11.0) <span class="keywordflow">return</span> 5;
03263   <span class="keywordflow">else</span> <span class="keywordflow">return</span> -1;
03264 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="MadTVAnalysis::ForceMCBeam" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::ForceMCBeam </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>beam</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00063">63</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a>, and <a class="el" href="MadTVAnalysis_8h-source.html#l00168">fMCBeam</a>.
<p>
<div class="fragment"><pre>00063 {<a class="code" href="classMadTVAnalysis.html#r1">fMCBeam</a>=beam;}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b8" doxytag="MadTVAnalysis::GetBECRegistry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classRegistry.html">Registry</a>&amp; MadTVAnalysis::GetBECRegistry </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00113">113</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00167">fBECConfig</a>.
<p>
<div class="fragment"><pre>00113 { <span class="keywordflow">return</span> <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>; }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b11" doxytag="MadTVAnalysis::GetEvtTimeChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::GetEvtTimeChar </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>timemin</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>timemax</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>timeln</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02627">2627</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="VldContext_8h-source.html#l00051">VldContext::GetDetector()</a>, <a class="el" href="VldTimeStamp_8h-source.html#l00163">VldTimeStamp::GetNanoSec()</a>, <a class="el" href="VldContext_8h-source.html#l00053">VldContext::GetTimeStamp()</a>, <a class="el" href="RecHeader_8h-source.html#l00028">RecHeader::GetVldContext()</a>, <a class="el" href="MadBase_8cxx-source.html#l00692">MadBase::LoadStrip()</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>, <a class="el" href="AltAlgSliceList_8h-source.html#l00043">striptime</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00057">NtpSRStrip::time0</a>, and <a class="el" href="NtpSRStrip_8h-source.html#l00058">NtpSRStrip::time1</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02628 {
02629   <span class="comment">//cut and pasted, with minor changes from MadDpAnalysis.cxx</span>
02630   <span class="comment">//  double trgtime=eventSummary-&gt;trigtime;</span>
02631   <span class="keywordtype">double</span> trgtime=<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a6">GetTimeStamp</a>().<a class="code" href="classVldTimeStamp.html#a12">GetNanoSec</a>()/1.e9;
02632   <span class="keywordtype">double</span> timemax=0.;
02633   <span class="keywordtype">double</span> timemin=1.e10;
02634 
02635   <span class="comment">//  Find max min time of events by loading strips for ND </span>
02636   <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>()==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
02637     <span class="keywordflow">for</span>(Int_t evss=0;evss&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;evss++){
02638       Int_t stp_index=((<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>)[evss]);
02639       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(stp_index)) <span class="keywordflow">continue</span>;
02640       Double_t <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o11">time1</a>-trgtime;
02641       <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&lt;=timemin) timemin=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02642       <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&gt;=timemax) timemax=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02643     }
02644   }      
02645   
02646   <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>()==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
02647     <span class="keywordflow">for</span>(Int_t evss=0;evss&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;evss++){
02648       Int_t stp_index=((<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>)[evss]);
02649       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(stp_index)) <span class="keywordflow">continue</span>;
02650       Double_t striptime1=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o11">time1</a>-trgtime;
02651       Double_t striptime0=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o10">time0</a>-trgtime;
02652       <span class="comment">//      Double_t striptime1=ntpStrip-&gt;time1;</span>
02653       <span class="comment">//      Double_t striptime0=ntpStrip-&gt;time0;</span>
02654       Double_t <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=(striptime0+striptime1)/2.;
02655       <span class="comment">//      if(striptime1&gt;0 &amp;&amp; striptime0&lt;0)  striptime=striptime1;</span>
02656       <span class="comment">//      if(striptime0&gt;0 &amp;&amp; striptime1&lt;0)  striptime=striptime0;</span>
02657       <span class="comment">//      if(striptime0&gt;0 &amp;&amp; striptime1&gt;0)  striptime=(striptime0+striptime1)/2.;</span>
02658       <span class="keywordflow">if</span>(striptime1&gt;-1 &amp;&amp; striptime0&lt;-1)  <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=striptime1;
02659       <span class="keywordflow">if</span>(striptime0&gt;-1 &amp;&amp; striptime1&lt;-1)  <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=striptime0;
02660       <span class="keywordflow">if</span>(striptime0&gt;-1 &amp;&amp; striptime1&gt;-1)  <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=(striptime0+striptime1)/2.;
02661 
02662       <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&lt;=timemin) timemin=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02663       <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&gt;=timemax) timemax=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02664     }
02665   }
02666 
02667     evttimemax=timemax;
02668     evttimemin=timemin;
02669     evttimeln=timemax-timemin;
02670 
02671 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b12" doxytag="MadTVAnalysis::GetEvtTimeCharPHC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::GetEvtTimeCharPHC </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>timemin</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>timemax</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>timeln</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02673">2673</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="VldContext_8h-source.html#l00051">VldContext::GetDetector()</a>, <a class="el" href="RecHeader_8h-source.html#l00028">RecHeader::GetVldContext()</a>, <a class="el" href="MadBase_8cxx-source.html#l00692">MadBase::LoadStrip()</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>, <a class="el" href="AltAlgSliceList_8h-source.html#l00043">striptime</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00057">NtpSRStrip::time0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00058">NtpSRStrip::time1</a>, and <a class="el" href="NtpSREventSummary_8h-source.html#l00046">NtpSREventSummary::trigtime</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02674 {
02675   <span class="comment">//same as GetEvtTimeChar but only looking at hits with </span>
02676   <span class="comment">//pulse height &gt; 200 sig cor (~2pe) in near det</span>
02677   <span class="comment">//pulse height &gt; 160 sig cor in far det</span>
02678   <span class="keywordtype">double</span> trgtime=<a class="code" href="classMadBase.html#p10">eventSummary</a>-&gt;<a class="code" href="classNtpSREventSummary.html#o7">trigtime</a>;
02679   <span class="keywordtype">double</span> timemax=0.;
02680   <span class="keywordtype">double</span> timemin=1.e10;
02681 
02682   <span class="comment">//  Find max min time of events by loading strips for ND </span>
02683   <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>()==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
02684     <span class="keywordflow">for</span>(Int_t evss=0;evss&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;evss++){
02685       Int_t stp_index=((<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>)[evss]);
02686       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(stp_index)) <span class="keywordflow">continue</span>;
02687       Double_t <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o11">time1</a>-trgtime;
02688       <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>&gt;200){
02689         <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&lt;=timemin) timemin=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02690         <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&gt;=timemax) timemax=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02691       }
02692     }
02693   }      
02694   
02695   <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>()==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
02696     <span class="keywordflow">for</span>(Int_t evss=0;evss&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;evss++){
02697       Int_t stp_index=((<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>)[evss]);
02698       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(stp_index)) <span class="keywordflow">continue</span>;
02699       Double_t striptime1=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o11">time1</a>-trgtime;
02700       Double_t striptime0=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o10">time0</a>-trgtime;
02701       Double_t <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=(striptime0+striptime1)/2.;
02702       <span class="keywordflow">if</span>(striptime1&gt;0 &amp;&amp; striptime0&lt;0)  <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=striptime1;
02703       <span class="keywordflow">if</span>(striptime0&gt;0 &amp;&amp; striptime1&lt;0)  <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=striptime0;
02704       <span class="keywordflow">if</span>(striptime0&gt;0 &amp;&amp; striptime1&gt;0)  <a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>=(striptime0+striptime1)/2.;
02705       <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>&gt;160){
02706         <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&lt;=timemin) timemin=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02707         <span class="keywordflow">if</span>(<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>&gt;=timemax) timemax=<a class="code" href="AltAlgSliceList_8h.html#a19">striptime</a>;
02708       }
02709     }
02710   }
02711   
02712   evttimemax=timemax;
02713   evttimemin=timemin;
02714   evttimeln=timemax-timemin;
02715 
02716 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="MadTVAnalysis::GetForcedMCBeam" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a>&amp; MadTVAnalysis::GetForcedMCBeam </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00064">64</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a>, and <a class="el" href="MadTVAnalysis_8h-source.html#l00168">fMCBeam</a>.
<p>
<div class="fragment"><pre>00064 {<span class="keywordflow">return</span> <a class="code" href="classMadTVAnalysis.html#r1">fMCBeam</a>;}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b19" doxytag="MadTVAnalysis::GetNDCoilCurrent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Float_t MadTVAnalysis::GetNDCoilCurrent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classVldContext.html">VldContext</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>vc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l03235">3235</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="Dcs__Mag__Near_8h-source.html#l00055">Dcs_Mag_Near::GetCurrent()</a>, <a class="el" href="DbiResultPtr_8tpl-source.html#l00538">DbiResultPtr&lt; T &gt;::GetNumRows()</a>, and <a class="el" href="DbiResultPtr_8tpl-source.html#l00568">DbiResultPtr&lt; T &gt;::GetRow()</a>.
<p>
<div class="fragment"><pre>03235                                                            {
03236   Float_t result = 0.0;
03237   <a class="code" href="classDbiResultPtr.html">DbiResultPtr&lt;Dcs_Mag_Near&gt;</a> ptr(vc);
03238   <span class="keywordflow">if</span>(ptr.<a class="code" href="classDbiResultPtr.html#a9">GetNumRows</a>()){
03239     <span class="keyword">const</span> <a class="code" href="classDcs__Mag__Near.html">Dcs_Mag_Near</a>* row = ptr.<a class="code" href="classDbiResultPtr.html#a12">GetRow</a>(0);
03240     result = row-&gt;<a class="code" href="classDcs__Mag__Near.html#a9">GetCurrent</a>();
03241   }
03242   <span class="keywordflow">return</span> result;
03243 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b6" doxytag="MadTVAnalysis::InFidVol" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool MadTVAnalysis::InFidVol </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname" nowrap> <em>vx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>vy</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>vx</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02068">2068</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="VldContext_8h-source.html#l00051">VldContext::GetDetector()</a>, <a class="el" href="RecHeader_8h-source.html#l00028">RecHeader::GetVldContext()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00051">kXcenter</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00052">kYcenter</a>, and <a class="el" href="nrutil__val_8h-source.html#l00374">pow()</a>.
<p>
<div class="fragment"><pre>02068                                                          {
02069    <span class="comment">// assumes event has been loaded</span>
02070    <span class="comment">// check that vertex is in fiducial volume</span>
02071    <span class="keywordtype">bool</span> is_fid=<span class="keyword">false</span>;
02072    <span class="comment">// FD: from doc-1351-v2 : there is no coil cut!</span>
02073    <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>()==<a class="code" href="classDetector.html#w8w3">Detector::kFar</a>){
02074          <span class="comment">//fiducial criteria on vtx for far detector</span>
02075      is_fid = <span class="keyword">true</span>;
02076      <span class="keywordflow">if</span>((vz&lt;0.5 || vz&gt;28.0) ||   <span class="comment">//ends</span>
02077         (vz&lt;16.2 &amp;&amp; vz&gt;14.3) ||  <span class="comment">//between SMs</span>
02078         ((vx*vx)+(vy*vy))&gt;14.0) is_fid = <span class="keyword">false</span>;
02079    }
02080    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p8">ntpHeader</a>-&gt;<a class="code" href="classRecHeader.html#a3">GetVldContext</a>().<a class="code" href="classVldContext.html#a4">GetDetector</a>()==<a class="code" href="classDetector.html#w8w2">Detector::kNear</a>){
02081      <span class="comment">//fiducial criteria on vtx for near detector</span>
02082 
02083      <span class="comment">//    float beamzerox = 1.4885;</span>
02084      <span class="comment">//    float beamzeroy = 0.1397-reco_vtxz*TMath::Tan(.058);</span>
02085 
02086      <span class="comment">//    float r=sqrt(pow((reco_vtxx-beamzerox),2)+pow((reco_vtxy-beamzeroy),2));</span>
02087 
02088 
02089      is_fid = <span class="keyword">false</span>;
02090      <span class="comment">// MAK: Sept 19, 2005: Modified to account for beam slope</span>
02091      <span class="comment">/*</span>
02092 <span class="comment">     double radius = pow(vx-kXcenter,2) </span>
02093 <span class="comment">       + pow(vy-(kYcenter -vz*TMath::Tan(0.058)),2);</span>
02094 <span class="comment">     radius=sqrt(radius);</span>
02095 <span class="comment">     */</span>
02096 
02097      <span class="comment">// MAK: removed beam slope. Dave/Niki don't do it.</span>
02098      <span class="comment">//double radius = sqrt(vx*vx + vy*vy);</span>
02099      <span class="keywordtype">double</span> radius = <a class="code" href="nrutil__val_8h.html#a22">pow</a>(vx-kXcenter,2) 
02100        + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(vy-kYcenter,2);
02101      radius=sqrt(radius);
02102 
02103      <span class="comment">// restrict vertices to target region and 1m radius</span>
02104      <span class="keywordflow">if</span>(vz&gt;=1.0 &amp;&amp; vz&lt;=5.0 &amp;&amp; radius&lt;=1.0) is_fid = <span class="keyword">true</span>;    
02105    }
02106    <span class="keywordflow">return</span> is_fid;
02107  }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b5" doxytag="MadTVAnalysis::InFidVol" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool MadTVAnalysis::InFidVol </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02063">2063</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpSREvent_8h-source.html#l00086">NtpSREvent::vtx</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00040">NtpSRVertex::x</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00041">NtpSRVertex::y</a>, and <a class="el" href="NtpSRVertex_8h-source.html#l00042">NtpSRVertex::z</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02058">InFidVol()</a>.
<p>
<div class="fragment"><pre>02064  {
02065    <span class="keywordflow">return</span> <a class="code" href="classMadTVAnalysis.html#b5">InFidVol</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o3">x</a>,<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o4">y</a>,<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>);
02066  }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b4" doxytag="MadTVAnalysis::InFidVol" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool MadTVAnalysis::InFidVol </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>evidx</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02058">2058</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8cxx-source.html#l02063">InFidVol()</a>, and <a class="el" href="MadBase_8cxx-source.html#l00536">MadBase::LoadEvent()</a>.
<p>
<div class="fragment"><pre>02058                                           {
02059    <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b3">LoadEvent</a>(evidx)) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//no event found</span>
02060    <span class="keywordflow">return</span> <a class="code" href="classMadTVAnalysis.html#b5">InFidVol</a>();
02061  }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e2" doxytag="MadTVAnalysis::InPartialRegion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Int_t MadTVAnalysis::InPartialRegion </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UShort_t&nbsp;</td>
          <td class="mdname" nowrap> <em>plane</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UShort_t&nbsp;</td>
          <td class="mdname" nowrap> <em>strip</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02346">2346</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02406">SigInOut()</a>.
<p>
<div class="fragment"><pre>02346                                                                   {
02347   <span class="comment">// figure out if this (plane,strip) corresponds to something in</span>
02348   <span class="comment">// the partially instrumented region</span>
02349   <span class="comment">//</span>
02350   <span class="comment">// this region is defined as:</span>
02351   <span class="comment">// v planes: (strip&lt;=4 || strip&gt;=67)</span>
02352   <span class="comment">// partial u: (strip==0 || strip=63)</span>
02353   <span class="comment">// full u: (strip&lt;=26 || strip&gt;=88) </span>
02354   <span class="comment">//</span>
02355   <span class="comment">// if so, return 1</span>
02356   <span class="comment">// if not, return -1</span>
02357   <span class="comment">// if error, return 0</span>
02358 
02359 
02360   <span class="comment">// make a lookup ptype to hold the type of each plane</span>
02361   <span class="comment">// 1 = v partial   2 = u partial</span>
02362   <span class="comment">// 3 = v full   4 = u full</span>
02363   <span class="comment">// 0 = uninstrumented</span>
02364   <span class="keyword">static</span> <span class="keywordtype">bool</span> first=<span class="keyword">true</span>;
02365   <span class="keyword">static</span> UShort_t ptype[282];
02366   <span class="keywordflow">if</span>(first){
02367     ptype[0]=0;
02368     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;=281; i++){
02369       <span class="keywordflow">if</span>(i%2==0) ptype[i]=1; <span class="comment">// a v plane</span>
02370       <span class="keywordflow">else</span> ptype[i]=2; <span class="comment">// a u plane</span>
02371       <span class="keywordflow">if</span>((i-1)%5 == 0) ptype[i]+=2; <span class="comment">// fully instrumented</span>
02372       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i&gt;120) ptype[i]=0; <span class="comment">// not instrumented</span>
02373     }
02374     first=<span class="keyword">false</span>;
02375   }
02376   <span class="keywordflow">if</span>(plane&gt;281){
02377     <span class="comment">//    std::cerr&lt;&lt;"InPartialRegion passed plane = "&lt;&lt;plane&lt;&lt;std::endl;</span>
02378     <span class="keywordflow">return</span> 0;
02379   }
02380   UShort_t pt = ptype[plane];
02381   
02382   Int_t result;
02383   <span class="keywordflow">switch</span>(pt){
02384   <span class="keywordflow">case</span> 1:
02385   <span class="keywordflow">case</span> 3:
02386     <span class="keywordflow">if</span>(strip&lt;=4 || strip&gt;=67) result=1;
02387     <span class="keywordflow">else</span> result = -1;
02388     <span class="keywordflow">break</span>;
02389   <span class="keywordflow">case</span> 2:
02390     <span class="keywordflow">if</span>(strip==0 || strip == 63) result=1;
02391     <span class="keywordflow">else</span> result = -1;
02392     <span class="keywordflow">break</span>;
02393   <span class="keywordflow">case</span> 4:
02394     <span class="keywordflow">if</span>(strip&lt;=26 || strip&gt;=88) result=1;
02395     <span class="keywordflow">else</span> result = -1;
02396     <span class="keywordflow">break</span>;
02397   <span class="keywordflow">case</span> 0:
02398   <span class="keywordflow">default</span>:
02399     result=0;
02400     <span class="keywordflow">break</span>;
02401   }
02402   <span class="keywordflow">return</span> result;
02403 
02404 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b14" doxytag="MadTVAnalysis::MuonShowerEnergy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float MadTVAnalysis::MuonShowerEnergy </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classNtpSREvent.html">NtpSREvent</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>evt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classNtpSRTrack.html">NtpSRTrack</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>trk</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02720">2720</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpSRShowerPulseHeight_8h-source.html#l00037">NtpSRShowerPulseHeight::EMgev</a>, <a class="el" href="MadBase_8cxx-source.html#l00323">MadBase::LoadShower()</a>, <a class="el" href="NtpSREvent_8h-source.html#l00070">NtpSREvent::nshower</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00070">NtpSRTrack::nstrip</a>, <a class="el" href="nrutil__val_8h-source.html#l00374">pow()</a>, <a class="el" href="NtpSREvent_8h-source.html#l00071">NtpSREvent::shw</a>, <a class="el" href="NtpSRShower_8h-source.html#l00096">NtpSRShower::shwph</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00074">NtpSRTrack::stpu</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00075">NtpSRTrack::stpv</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00078">NtpSRTrack::stpz</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00043">NtpSRVertex::t</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00038">NtpSRVertex::u</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00039">NtpSRVertex::v</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00101">NtpSRTrack::vtx</a>, <a class="el" href="NtpSREvent_8h-source.html#l00086">NtpSREvent::vtx</a>, <a class="el" href="NtpSRShower_8h-source.html#l00098">NtpSRShower::vtx</a>, and <a class="el" href="NtpSRVertex_8h-source.html#l00042">NtpSRVertex::z</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02720                                                                                 {  
02721   <span class="comment">// Purpose: try to sum up brems along the track</span>
02722 
02723   <span class="keyword">static</span> TH2* hr = <span class="keyword">new</span> TH2F(<span class="stringliteral">"h_mushw_rph"</span>,
02724                             <span class="stringliteral">"; track - shw r dist (m); shower energy (GeV)"</span>, 
02725                             10,0,0.2,40,0,2);
02726 
02727   <span class="keyword">static</span> TH2* hz = <span class="keyword">new</span> TH2F(<span class="stringliteral">"h_mushw_zph"</span>,
02728                             <span class="stringliteral">"; track - shw z dist (m); shower energy (GeV)"</span>, 
02729                             20,-0.2,0.2,40,0,2);
02730 
02731   <span class="keyword">static</span> TH2* ht = <span class="keyword">new</span> TH2F(<span class="stringliteral">"h_mushw_tph"</span>,
02732                             <span class="stringliteral">"; track - shw t dist (m); shower energy (GeV)"</span>, 
02733                             600,-1e-6,10e-6,40,0,2);
02734   
02735 
02736   <span class="keywordflow">if</span>(evt==0 || trk==0) <span class="keywordflow">return</span> 0;
02737   <span class="keywordtype">float</span> result=0;
02738   <a class="code" href="classNtpSRShower.html">NtpSRShower</a>* save_shwr = <a class="code" href="classMadBase.html#p15">ntpShower</a>;  
02739   <span class="comment">// loop through all showers in event</span>
02740   <span class="keyword">const</span> <span class="keywordtype">float</span> max_vtx_dist=14*0.06; <span class="comment">// 2 interaction lengths</span>
02741   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;evt-&gt;<a class="code" href="classNtpSREvent.html#o12">nshower</a>; i++){
02742     <a class="code" href="classMadBase.html#b1">LoadShower</a>(evt-&gt;<a class="code" href="classNtpSREvent.html#o13">shw</a>[i]);
02743     <span class="keywordflow">if</span>(!ntpShower) <span class="keywordflow">continue</span>;
02744     <span class="comment">// calculate distance to vertex</span>
02745     <span class="comment">// don't want to use showers near the vertex</span>
02746     <span class="keywordtype">float</span> dist_vtx = <a class="code" href="nrutil__val_8h.html#a22">pow</a>(ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a> - <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>,2)
02747       + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a> - <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>,2)
02748       + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a> - <a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o21">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>,2);
02749     dist_vtx=sqrt(dist_vtx);
02750     <span class="keywordflow">if</span>(dist_vtx&lt;max_vtx_dist) <span class="keywordflow">continue</span>;
02751     <span class="comment">// loop through track's strip array</span>
02752     <span class="comment">// calculate distance from strip to shower in time and space</span>
02753     <span class="comment">// save spatial and time distance of closest approach to track</span>
02754     <span class="comment">// if shower is close enough add the shower energy to running sum.</span>
02755     <span class="keywordtype">float</span> min_dist=1e6; <span class="keywordtype">float</span> min_r=1e6; <span class="keywordtype">float</span> min_z=1e6; <span class="keywordtype">float</span> <a class="code" href="structmin__t.html">min_t</a>=1e6;
02756     <span class="keywordtype">float</span> min_ph=0; <span class="keywordtype">float</span> add_ph=0;
02757     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;trk-&gt;<a class="code" href="classNtpSRTrack.html#o4">nstrip</a>; j++){
02758       <span class="keywordtype">float</span> dist_trk= <a class="code" href="nrutil__val_8h.html#a22">pow</a>(trk-&gt;<a class="code" href="classNtpSRTrack.html#o11">stpz</a>[j]-ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>,2)
02759         + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(trk-&gt;<a class="code" href="classNtpSRTrack.html#o7">stpu</a>[j]-ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>,2)
02760         + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(trk-&gt;<a class="code" href="classNtpSRTrack.html#o8">stpv</a>[j]-ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>,2);
02761       dist_trk=sqrt(dist_trk);
02762       <span class="keywordtype">float</span> tdist = (trk-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o6">t</a> + (trk-&gt;<a class="code" href="classNtpSRTrack.html#o11">stpz</a>[j]-trk-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>)/3e8) 
02763                          - ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o6">t</a>;
02764       
02765         <span class="comment">// = trk-&gt;stpt0[j]*trk-&gt;stpph0[j]+trk-&gt;stp1[j]*trk-&gt;stpph1[j];</span>
02766         <span class="comment">//      if( (trk-&gt;stpph0[j]+trk-&gt;stpph1[j]) &gt; 0){</span>
02767         <span class="comment">//      tdist/=(trk-&gt;stpph0[j]+trk-&gt;stpph1[j]);</span>
02768         <span class="comment">//      }</span>
02769       
02770       <span class="keywordflow">if</span>(fabs(dist_trk)&lt;fabs(min_dist)) {
02771         min_ph=ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o29">shwph</a>.<a class="code" href="classNtpSRShowerPulseHeight.html#o4">EMgev</a>;
02772         min_z = fabs(ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o5">z</a>-trk-&gt;<a class="code" href="classNtpSRTrack.html#o11">stpz</a>[j]);
02773         min_r = sqrt( <a class="code" href="nrutil__val_8h.html#a22">pow</a>(ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o1">u</a>-trk-&gt;<a class="code" href="classNtpSRTrack.html#o7">stpu</a>[j],2)
02774                       + <a class="code" href="nrutil__mtl_8h.html#a20">pow</a>(ntpShower-&gt;<a class="code" href="classNtpSRShower.html#o31">vtx</a>.<a class="code" href="classNtpSRVertex.html#o2">v</a>-trk-&gt;<a class="code" href="classNtpSRTrack.html#o8">stpv</a>[j],2));
02775         min_t = tdist;
02776       }
02777 
02778       <span class="keyword">const</span> <span class="keywordtype">float</span> max_trk_dist=1.76*3.0; <span class="comment">// 3 radiation lengths</span>
02779       <span class="keyword">const</span> <span class="keywordtype">float</span> max_trk_tdist=40e-9;
02780       <span class="keywordflow">if</span>(fabs(dist_trk)&lt;max_trk_dist &amp;&amp; fabs(tdist)&lt;max_trk_tdist){
02781         <span class="comment">// shower correllated with track</span>
02782         add_ph=min_ph;
02783       }
02784     }
02785     result+=min_ph; <span class="comment">// </span>
02786     
02787     <span class="comment">// fill histograms</span>
02788     hr-&gt;Fill(min_r,min_ph);
02789     hz-&gt;Fill(min_z,min_ph);
02790     ht-&gt;Fill(min_t,min_ph);
02791 
02792   }<span class="comment">// end loop over showers</span>
02793 
02794   <span class="comment">// reset shower pointer</span>
02795   ntpShower=save_shwr;
02796   <span class="comment">// all done</span>
02797   <span class="keywordflow">return</span> result;
02798 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e3" doxytag="MadTVAnalysis::NDRadialFidVol" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Int_t MadTVAnalysis::NDRadialFidVol </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>z</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">2262</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8cxx-source.html#l00043">kTargEndZ</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00042">kVetoEndZ</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00051">kXcenter</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00052">kYcenter</a>, and <a class="el" href="nrutil__val_8h-source.html#l00374">pow()</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02931">FillMCHists()</a>.
<p>
<div class="fragment"><pre>02262                                                                  {
02263 
02264   Float_t rings[5]={0.1,0.25,0.5,1.0,1.5}; <span class="comment">// in meters</span>
02265   Int_t result=0;
02266   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;5; i++){
02267     Float_t radius = <a class="code" href="nrutil__val_8h.html#a22">pow</a>(x-kXcenter,2) 
02268       + <a class="code" href="nrutil__val_8h.html#a22">pow</a>(y-(kYcenter - z*TMath::Tan(0.058)),2);
02269     radius=sqrt(radius);
02270     <span class="comment">// restrict vertices to target region and 1m radius</span>
02271     <span class="keywordflow">if</span>(z&gt;=<a class="code" href="classMadTVAnalysis.html#v0">kVetoEndZ</a> &amp;&amp; 
02272        z&lt;=<a class="code" href="classMadTVAnalysis.html#v1">kTargEndZ</a> &amp;&amp;
02273        radius&lt;=rings[i]) result|=(1&lt;&lt;i);
02274   }
02275   <span class="keywordflow">return</span> result;
02276 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b9" doxytag="MadTVAnalysis::NPlanesInObj" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Int_t MadTVAnalysis::NPlanesInObj </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TObject *&nbsp;</td>
          <td class="mdname" nowrap> <em>rec</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>TObject *&nbsp;</td>
          <td class="mdname" nowrap> <em>obj</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>phcut</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sumph</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02464">2464</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpStRecord_8h-source.html#l00094">NtpStRecord::evthdr</a>, <a class="el" href="NtpSRRecord_8h-source.html#l00054">NtpSRRecord::evthdr</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00040">NtpSREventSummary::nstrip</a>, <a class="el" href="NtpSRShower_8h-source.html#l00071">NtpSRShower::nstrip</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00070">NtpSRTrack::nstrip</a>, <a class="el" href="NtpSRSlice_8h-source.html#l00048">NtpSRSlice::nstrip</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00038">NtpSRPulseHeight::pe</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00052">NtpSRStrip::plane</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, <a class="el" href="NtpStRecord_8h-source.html#l00110">NtpStRecord::stp</a>, <a class="el" href="NtpSRRecord_8h-source.html#l00065">NtpSRRecord::stp</a>, <a class="el" href="NtpSRShower_8h-source.html#l00072">NtpSRShower::stp</a>, <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00071">NtpSRTrack::stp</a>, and <a class="el" href="NtpSRSlice_8h-source.html#l00049">NtpSRSlice::stp</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02465 {
02466   sumph=0.0;
02467 
02468   std::set&lt;UShort_t&gt; planes;
02469 
02470   <a class="code" href="classNtpSRRecord.html">NtpSRRecord</a> *srrec = dynamic_cast&lt;NtpSRRecord *&gt;(rec);
02471   <a class="code" href="classNtpStRecord.html">NtpStRecord</a> *strec = dynamic_cast&lt;NtpStRecord *&gt;(rec);
02472 
02473   Int_t *stripindex=0;
02474   Int_t nstrip=0;
02475   <a class="code" href="classNtpSRSlice.html">NtpSRSlice</a> *slc = dynamic_cast&lt;NtpSRSlice *&gt;(obj);
02476   <a class="code" href="classNtpSRTrack.html">NtpSRTrack</a> *trk = dynamic_cast&lt;NtpSRTrack *&gt;(obj);
02477   <a class="code" href="classNtpSREvent.html">NtpSREvent</a> *evt = dynamic_cast&lt;NtpSREvent *&gt;(obj);
02478   <a class="code" href="classNtpSRShower.html">NtpSRShower</a> *shw = dynamic_cast&lt;NtpSRShower *&gt;(obj);
02479 
02480   <span class="keywordflow">if</span>(slc!=0){
02481     stripindex=slc-&gt;<a class="code" href="classNtpSRSlice.html#o4">stp</a>;
02482     nstrip=slc-&gt;<a class="code" href="classNtpSRSlice.html#o3">nstrip</a>;
02483     <span class="comment">//    cout&lt;&lt;"Counting planes in slice"&lt;&lt;endl;</span>
02484   }
02485   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(trk!=0){
02486     stripindex=trk-&gt;<a class="code" href="classNtpSRTrack.html#o5">stp</a>;
02487     nstrip=trk-&gt;<a class="code" href="classNtpSRTrack.html#o4">nstrip</a>;
02488     <span class="comment">//    cout&lt;&lt;"Counting planes in trk"&lt;&lt;endl;</span>
02489   }
02490   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(evt!=0){
02491     stripindex=evt-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>;
02492     nstrip=evt-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;
02493     <span class="comment">//    cout&lt;&lt;"Counting planes in event"&lt;&lt;endl;</span>
02494   }
02495   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(shw!=0){
02496     stripindex=shw-&gt;<a class="code" href="classNtpSRShower.html#o5">stp</a>;
02497     nstrip=shw-&gt;<a class="code" href="classNtpSRShower.html#o4">nstrip</a>;
02498     <span class="comment">//    cout&lt;&lt;"Counting planes in event"&lt;&lt;endl;</span>
02499   }
02500   
02501   TClonesArray *striplist=0; 
02502   <span class="keywordtype">int</span> TOTSTRIPS=0;
02503   <span class="keywordflow">if</span>(srrec!=0){
02504     striplist = srrec-&gt;<a class="code" href="classNtpSRRecord.html#o10">stp</a>;
02505     TOTSTRIPS=srrec-&gt;<a class="code" href="classNtpSRRecord.html#o0">evthdr</a>.<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;
02506     <span class="comment">//    cout&lt;&lt;"Found a sr"&lt;&lt;endl;</span>
02507   }
02508   <span class="keywordflow">else</span>{
02509     striplist = strec-&gt;<a class="code" href="classNtpStRecord.html#o13">stp</a>;
02510     TOTSTRIPS=strec-&gt;<a class="code" href="classNtpStRecord.html#o0">evthdr</a>.<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;
02511     <span class="comment">//    cout&lt;&lt;"found a st"&lt;&lt;endl;</span>
02512   }
02513   
02514   <span class="keywordflow">if</span>(striplist!=0){
02515     <span class="comment">//    cout&lt;&lt;"Looping over strip list, nstrip="&lt;&lt;nstrip&lt;&lt;endl;</span>
02516     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;nstrip;i++){
02517       <span class="keywordtype">int</span> sindex = stripindex[i];
02518       <span class="keywordflow">if</span>(sindex&lt;0) <span class="keywordflow">continue</span>;
02519       <span class="keywordflow">if</span>(sindex&lt;TOTSTRIPS){
02520         <a class="code" href="classNtpSRStrip.html">NtpSRStrip</a> *strip = dynamic_cast&lt;NtpSRStrip *&gt;
02521           ((*striplist)[sindex]);
02522         <span class="comment">//      cout&lt;&lt;"got strip "&lt;&lt;sindex&lt;&lt;" plane "&lt;&lt;strip-&gt;plane</span>
02523         <span class="comment">//          &lt;&lt;" strip "&lt;&lt;strip-&gt;strip</span>
02524         <span class="comment">//          &lt;&lt;" ph "&lt;&lt;strip-&gt;ph0.pe+strip-&gt;ph1.pe&lt;&lt;endl;</span>
02525         <span class="keywordflow">if</span>(strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>&gt;phcut){
02526           planes.insert(strip-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>);
02527           sumph+=strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02528         }     
02529       }
02530     }
02531   }
02532   <span class="keywordflow">else</span>{
02533     <span class="comment">//    cout&lt;&lt;"Getting number of planes in snarl"&lt;&lt;endl;</span>
02534     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;TOTSTRIPS;i++){
02535       <a class="code" href="classNtpSRStrip.html">NtpSRStrip</a> *strip = dynamic_cast&lt;NtpSRStrip *&gt;((*striplist)[i]);
02536       <span class="comment">//      cout&lt;&lt;"got strip "&lt;&lt;i&lt;&lt;" plane "&lt;&lt;strip-&gt;plane</span>
02537       <span class="comment">//          &lt;&lt;" strip "&lt;&lt;strip-&gt;strip</span>
02538       <span class="comment">//          &lt;&lt;" ph "&lt;&lt;strip-&gt;ph0.pe+strip-&gt;ph1.pe&lt;&lt;endl;</span>
02539       <span class="keywordflow">if</span>(strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>&gt;phcut){
02540         planes.insert(strip-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>);
02541         sumph+=strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02542       }     
02543     }
02544   }
02545     
02546   <span class="comment">//  cout&lt;&lt;"I count "&lt;&lt;planes.size()&lt;&lt;" planes &gt; "&lt;&lt;phcut&lt;&lt;" pe"&lt;&lt;endl;</span>
02547   <span class="keywordflow">return</span> planes.size();
02548 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b10" doxytag="MadTVAnalysis::NStripsInObj" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Int_t MadTVAnalysis::NStripsInObj </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TObject *&nbsp;</td>
          <td class="mdname" nowrap> <em>rec</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>TObject *&nbsp;</td>
          <td class="mdname" nowrap> <em>obj</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap> <em>phcut</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sumph</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02551">2551</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpStRecord_8h-source.html#l00094">NtpStRecord::evthdr</a>, <a class="el" href="NtpSRRecord_8h-source.html#l00054">NtpSRRecord::evthdr</a>, <a class="el" href="NtpSREventSummary_8h-source.html#l00040">NtpSREventSummary::nstrip</a>, <a class="el" href="NtpSRShower_8h-source.html#l00071">NtpSRShower::nstrip</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00070">NtpSRTrack::nstrip</a>, <a class="el" href="NtpSRSlice_8h-source.html#l00048">NtpSRSlice::nstrip</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00038">NtpSRPulseHeight::pe</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00052">NtpSRStrip::plane</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, <a class="el" href="NtpStRecord_8h-source.html#l00110">NtpStRecord::stp</a>, <a class="el" href="NtpSRRecord_8h-source.html#l00065">NtpSRRecord::stp</a>, <a class="el" href="NtpSRShower_8h-source.html#l00072">NtpSRShower::stp</a>, <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00071">NtpSRTrack::stp</a>, and <a class="el" href="NtpSRSlice_8h-source.html#l00049">NtpSRSlice::stp</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02552 {
02553   sumph=0.0;
02554   std::vector&lt;UShort_t&gt; strips;
02555 
02556   <a class="code" href="classNtpSRRecord.html">NtpSRRecord</a> *srrec = dynamic_cast&lt;NtpSRRecord *&gt;(rec);
02557   <a class="code" href="classNtpStRecord.html">NtpStRecord</a> *strec = dynamic_cast&lt;NtpStRecord *&gt;(rec);
02558 
02559   Int_t *stripindex=0;
02560   Int_t nstrip=0;
02561   <a class="code" href="classNtpSRSlice.html">NtpSRSlice</a> *slc = dynamic_cast&lt;NtpSRSlice *&gt;(obj);
02562   <a class="code" href="classNtpSRTrack.html">NtpSRTrack</a> *trk = dynamic_cast&lt;NtpSRTrack *&gt;(obj);
02563   <a class="code" href="classNtpSREvent.html">NtpSREvent</a> *evt = dynamic_cast&lt;NtpSREvent *&gt;(obj);
02564   <a class="code" href="classNtpSRShower.html">NtpSRShower</a> *shw = dynamic_cast&lt;NtpSRShower *&gt;(obj);
02565 
02566   <span class="keywordflow">if</span>(slc!=0){
02567     stripindex=slc-&gt;<a class="code" href="classNtpSRSlice.html#o4">stp</a>;
02568     nstrip=slc-&gt;<a class="code" href="classNtpSRSlice.html#o3">nstrip</a>;
02569   }
02570   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(trk!=0){
02571     stripindex=trk-&gt;<a class="code" href="classNtpSRTrack.html#o5">stp</a>;
02572     nstrip=trk-&gt;<a class="code" href="classNtpSRTrack.html#o4">nstrip</a>;
02573   }
02574   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(evt!=0){
02575     stripindex=evt-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>;
02576     nstrip=evt-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>;
02577   }
02578   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(shw!=0){
02579     stripindex=shw-&gt;<a class="code" href="classNtpSRShower.html#o5">stp</a>;
02580     nstrip=shw-&gt;<a class="code" href="classNtpSRShower.html#o4">nstrip</a>;
02581   }
02582   
02583   TClonesArray *striplist=0; 
02584   <span class="keywordtype">int</span> TOTSTRIPS;
02585   <span class="keywordflow">if</span>(srrec!=0){
02586     striplist = srrec-&gt;<a class="code" href="classNtpSRRecord.html#o10">stp</a>;
02587     TOTSTRIPS=srrec-&gt;<a class="code" href="classNtpSRRecord.html#o0">evthdr</a>.<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;
02588   }
02589   <span class="keywordflow">else</span>{
02590     striplist = strec-&gt;<a class="code" href="classNtpStRecord.html#o13">stp</a>;
02591     TOTSTRIPS=strec-&gt;<a class="code" href="classNtpStRecord.html#o0">evthdr</a>.<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;
02592   }
02593   
02594   <span class="comment">//  cout&lt;&lt;"CHECKING nstrips="&lt;&lt;nstrip&lt;&lt;endl;</span>
02595   <span class="keywordflow">if</span>(striplist!=0){
02596     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;nstrip;i++){
02597       <span class="keywordtype">int</span> sindex=stripindex[i];
02598       <span class="keywordflow">if</span>(sindex&lt;0) <span class="keywordflow">continue</span>;
02599       <a class="code" href="classNtpSRStrip.html">NtpSRStrip</a> *strip = dynamic_cast&lt;NtpSRStrip *&gt;((*striplist)[sindex]);
02600       <span class="keywordflow">if</span>(strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>&gt;phcut){
02601         strips.push_back(strip-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>);
02602         sumph+=strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02603       }     
02604     }
02605   }
02606   <span class="keywordflow">else</span>{
02607     <span class="keywordflow">if</span>(srrec!=0){
02608       nstrip=srrec-&gt;<a class="code" href="classNtpSRRecord.html#o0">evthdr</a>.<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;
02609     }
02610     <span class="keywordflow">else</span>{
02611       nstrip=strec-&gt;<a class="code" href="classNtpStRecord.html#o0">evthdr</a>.<a class="code" href="classNtpSREventSummary.html#o1">nstrip</a>;
02612     }
02613     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;nstrip;i++){
02614       <a class="code" href="classNtpSRStrip.html">NtpSRStrip</a> *strip = dynamic_cast&lt;NtpSRStrip *&gt;((*striplist)[i]);
02615       <span class="comment">//      cout&lt;&lt;"Checking "&lt;&lt;i&lt;&lt;" stripph: "&lt;&lt;strip-&gt;ph0.pe&lt;&lt;" "&lt;&lt;strip-&gt;ph1.pe&lt;&lt;endl;</span>
02616       <span class="keywordflow">if</span>(strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o3">pe</a>&gt;phcut){
02617         strips.push_back(strip-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>);
02618         sumph+=strip-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>+strip-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02619       }     
02620     }
02621   }
02622     
02623   <span class="comment">//  cout&lt;&lt;"returning "&lt;&lt;strips.size()&lt;&lt;endl;</span>
02624   <span class="keywordflow">return</span> strips.size();
02625 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="MadTVAnalysis::PittInFidVol" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Bool_t MadTVAnalysis::PittInFidVol </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>z</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>u</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>v</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02278">2278</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02931">FillMCHists()</a>.
<p>
<div class="fragment"><pre>02278                                                                                        {
02279 
02280   
02281   <span class="comment">// Is the event vertex, (x,y,u,v,z) inside the fiducial volume</span>
02282   <span class="comment">// used by the pittsburgh group?</span>
02283 
02284   <span class="keywordflow">if</span>( !( z&gt;0.6 &amp;&amp; z&lt;3.56) ) <span class="keywordflow">return</span> kFALSE;
02285   <span class="keywordflow">if</span>( !( u&gt;0.3 &amp;&amp; u&lt;1.8) ) <span class="keywordflow">return</span> kFALSE;
02286   <span class="keywordflow">if</span>( !( v&gt;-1.8 &amp;&amp; v&lt; -0.3) ) <span class="keywordflow">return</span> kFALSE;
02287   <span class="keywordflow">if</span>( x&gt;=2.4) <span class="keywordflow">return</span> kFALSE;
02288   <span class="keyword">const</span> Float_t coil_cut=0.8*0.8;
02289   <span class="keywordflow">if</span>( (x*x + y*y) &lt;= coil_cut) <span class="keywordflow">return</span> kFALSE;
02290   <span class="keywordflow">return</span> kTRUE;
02291 
02292 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e1" doxytag="MadTVAnalysis::PittTrkContained" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Int_t MadTVAnalysis::PittTrkContained </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>z</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>u</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t&nbsp;</td>
          <td class="mdname" nowrap> <em>v</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02294">2294</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02295                                                            {
02296   <span class="comment">// what is the containment status of this track </span>
02297   <span class="comment">// as defined by the pitt group</span>
02298   <span class="comment">//</span>
02299  <span class="comment">// takes the track end point (x,y,u,v,z)</span>
02300   <span class="comment">// returns:</span>
02301   <span class="comment">// 1 = track is fully contained in the upstream region</span>
02302   <span class="comment">// 2 = track is partially contained in the upstream region</span>
02303   <span class="comment">// 3 = track is fully contained in the downstream region</span>
02304   <span class="comment">// 4 = track is partially contained in the downstream region</span>
02305   <span class="comment">// </span>
02306   <span class="comment">// the rationale is that these categories have different momentum resolution</span>
02307   <span class="comment">//</span>
02308 
02309   <span class="keyword">const</span> Float_t radsq = x*x + y*y;
02310   <span class="keywordtype">int</span> result=0;
02311   <span class="keywordflow">if</span>(z&lt;7.0) {
02312     <span class="comment">// track in upstream region</span>
02313     <span class="keyword">static</span> <span class="keyword">const</span> Float_t coil_cut=0.8*0.8;
02314     <span class="comment">// was asking for u&gt;3 &amp;&amp; u&lt;1.8 here before -- a bug</span>
02315     <span class="keywordflow">if</span>( (u&gt;0.3 &amp;&amp; u&lt;1.8) &amp;&amp; (v&gt;-1.8 &amp;&amp; v&lt;-0.3) &amp;&amp; (x&lt;2.4) &amp;&amp; (radsq&gt;coil_cut) )
02316       result=1;
02317     <span class="keywordflow">else</span> result=2;
02318   }
02319   <span class="keywordflow">else</span>{
02320     <span class="comment">// downstream region</span>
02321     <span class="comment">// uses an ellipse in x,y</span>
02322     <span class="comment">// major axis (x) = a = 1.7 m</span>
02323     <span class="comment">// minor axis (y) = b = 1.4 m</span>
02324     <span class="comment">// centered on x,y = (0.8,0)</span>
02325     <span class="comment">// (x-x0)^2/a^2 + (y-y0)^2/b^2 = 1</span>
02326     <span class="comment">// should change this to 0.8</span>
02327     <span class="comment">//    static const Float_t coil_cut=0.5*0.5; // note differs from above</span>
02328 
02329     <span class="comment">//changed from 0.5 to 0.8 by TV on 7-29-05</span>
02330     <span class="keyword">static</span> <span class="keyword">const</span> Float_t coil_cut=0.8*0.8;
02331     <span class="keyword">static</span> <span class="keyword">const</span> Float_t x0=0.8;
02332     <span class="keyword">static</span> <span class="keyword">const</span> Float_t y0=0.0;
02333     <span class="keyword">static</span> <span class="keyword">const</span> Float_t a=1.7;
02334     <span class="keyword">static</span> <span class="keyword">const</span> Float_t b=1.4;
02335     <span class="keyword">const</span> Float_t xsc = (x-x0)/a; <span class="comment">// rescale ellipse to unit circle</span>
02336     <span class="keyword">const</span> Float_t ysc = (y-y0)/b;
02337     <span class="comment">//MAK: cut on z was 16.0 till Aug 2, 2005</span>
02338     <span class="keywordflow">if</span>( (sqrt(xsc*xsc + ysc*ysc)&lt;1.0) &amp;&amp; (radsq&gt;coil_cut) &amp;&amp; (z&lt;15.6)) 
02339       result = 3;
02340     <span class="keywordflow">else</span> result = 4;
02341   }
02342   <span class="keywordflow">return</span> result;
02343   
02344 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="MadTVAnalysis::RecoMuDCosNeuFD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Float_t MadTVAnalysis::RecoMuDCosNeuFD </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int_t&nbsp;</td>
          <td class="mdname" nowrap> <em>itr</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>vtx</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02187">2187</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpSRVertex_8h-source.html#l00047">NtpSRVertex::dcosy</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00048">NtpSRVertex::dcosz</a>, <a class="el" href="MadBase_8cxx-source.html#l00227">MadBase::LoadTrack()</a>, and <a class="el" href="NtpSRTrack_8h-source.html#l00101">NtpSRTrack::vtx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02187                                                                    {
02188   <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b0">LoadTrack</a>(itr)) <span class="keywordflow">return</span> 0.;
02189 
02190   Float_t bl_z = TMath::Cos(TMath::Pi()*3./180.); <span class="comment">//3degree beam</span>
02191   Float_t bl_y = sqrt(1. - bl_z*bl_z);
02192   Float_t costhbl = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o11">dcosz</a>*bl_z + <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o10">dcosy</a>*bl_y;
02193   
02194   <span class="keywordflow">return</span>  costhbl;
02195 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="MadTVAnalysis::RecoMuDCosNeuND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> Float_t MadTVAnalysis::RecoMuDCosNeuND </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int_t&nbsp;</td>
          <td class="mdname" nowrap> <em>itr</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>vtx</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02197">2197</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="NtpSRVertex_8h-source.html#l00047">NtpSRVertex::dcosy</a>, <a class="el" href="NtpSRVertex_8h-source.html#l00048">NtpSRVertex::dcosz</a>, <a class="el" href="MadBase_8cxx-source.html#l00227">MadBase::LoadTrack()</a>, and <a class="el" href="NtpSRTrack_8h-source.html#l00101">NtpSRTrack::vtx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.
<p>
<div class="fragment"><pre>02197                                                                    {
02198   <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b0">LoadTrack</a>(itr)) <span class="keywordflow">return</span> 0.;
02199   <span class="comment">/*</span>
02200 <span class="comment">   // simple correction based on the vertical position</span>
02201 <span class="comment">  float vtxy=0;</span>
02202 <span class="comment">  if(vtx) vtxy=vtx[1]; // in meters</span>
02203 <span class="comment">  // cosine of the typical neutrino angle in the yz plane</span>
02204 <span class="comment">  // calculated as py / sqrt( py^2 + pz^2)</span>
02205 <span class="comment">  float nu_cos = -5.799E-2;</span>
02206 <span class="comment">  if(vtxy&gt;-2.0 &amp;&amp; vtxy&lt;2.0){ //prevents further nuttyness if vtxy is silly</span>
02207 <span class="comment">    nu_cos += vtxy*1.23304E-3 </span>
02208 <span class="comment">      + vtxy*vtxy*1.08212E-5 </span>
02209 <span class="comment">      + vtxy*vtxy*vtxy*(-4.634E-5);</span>
02210 <span class="comment">  }</span>
02211 <span class="comment">  */</span>
02212   <span class="keywordtype">float</span> nu_cos = -5.799E-2;
02213   <span class="keywordtype">float</span> nu_sin = sqrt(1 -nu_cos*nu_cos);
02214   <span class="keywordtype">float</span> cosz = <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o11">dcosz</a>*nu_sin + <a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o34">vtx</a>.<a class="code" href="classNtpSRVertex.html#o10">dcosy</a>*nu_cos;
02215 
02216   <span class="keywordflow">return</span> cosz;
02217 
02218 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b7" doxytag="MadTVAnalysis::SetBECFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SetBECFile </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>f</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02458">2458</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00167">fBECConfig</a>, and <a class="el" href="classRegistry.html#a37">Registry::Set()</a>.
<p>
<div class="fragment"><pre>02458                                            {
02459   <span class="keywordflow">if</span>(f){
02460     <a class="code" href="classMadTVAnalysis.html#r0">fBECConfig</a>.<a class="code" href="classRegistry.html#a37">Set</a>(<span class="stringliteral">"beam:flux_file"</span>,f);
02461   }
02462 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="MadTVAnalysis::SetDataUseMCBeam" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SetDataUseMCBeam </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>x</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00065">65</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00169">fDataUseMCBeam</a>.
<p>
<div class="fragment"><pre>00065 {<a class="code" href="classMadTVAnalysis.html#r2">fDataUseMCBeam</a>=x;}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="MadTVAnalysis::SetRustemConfig" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SetRustemConfig </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fname</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00073">73</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00174">rustemconfigfile</a>.
<p>
<div class="fragment"><pre>00073 {<a class="code" href="classMadTVAnalysis.html#r6">rustemconfigfile</a>=fname;}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="MadTVAnalysis::SetRustemFarPID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SetRustemFarPID </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fname</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00072">72</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00173">rustempidfile_far</a>.
<p>
<div class="fragment"><pre>00072 {<a class="code" href="classMadTVAnalysis.html#r5">rustempidfile_far</a>=fname;}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="MadTVAnalysis::SetRustemNearPID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SetRustemNearPID </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">string&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fname</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00071">71</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
References <a class="el" href="MadTVAnalysis_8h-source.html#l00172">rustempidfile_near</a>.
<p>
<div class="fragment"><pre>00071 {<a class="code" href="classMadTVAnalysis.html#r4">rustempidfile_near</a>=fname;}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="MadTVAnalysis::SigInOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SigInOut </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Int_t&nbsp;</td>
          <td class="mdname" nowrap> <em>trkidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sigfull</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sigpart</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>trkfull</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>trkpart</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02450">2450</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadBase_8cxx-source.html#l00227">MadBase::LoadTrack()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02406">SigInOut()</a>.
<p>
<div class="fragment"><pre>02451                                                                 {
02452   <span class="comment">// will try to load the track pointed to by trkidx</span>
02453   <span class="keywordflow">if</span>(trkidx==-1) <a class="code" href="classMadBase.html#p14">ntpTrack</a>=0;
02454   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(<a class="code" href="classMadBase.html#b0">LoadTrack</a>(trkidx))) <a class="code" href="classMadBase.html#p14">ntpTrack</a>=0;
02455   <a class="code" href="classMadTVAnalysis.html#b0">SigInOut</a>(sigfull,sigpart,trkfull,trkpart);
02456 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="MadTVAnalysis::SigInOut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MadTVAnalysis::SigInOut </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sigfull</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sigpart</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>trkfull</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>Float_t &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>trkpart</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l02406">2406</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
References <a class="el" href="MadTVAnalysis_8cxx-source.html#l02346">InPartialRegion()</a>, <a class="el" href="MadBase_8cxx-source.html#l00692">MadBase::LoadStrip()</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00070">NtpSRTrack::nstrip</a>, <a class="el" href="NtpSREvent_8h-source.html#l00062">NtpSREvent::nstrip</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00059">NtpSRStrip::ph0</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00060">NtpSRStrip::ph1</a>, <a class="el" href="NtpSRStrip_8h-source.html#l00052">NtpSRStrip::plane</a>, <a class="el" href="NtpSRPulseHeight_8h-source.html#l00037">NtpSRPulseHeight::sigcor</a>, <a class="el" href="NtpSRTrack_8h-source.html#l00071">NtpSRTrack::stp</a>, <a class="el" href="NtpSREvent_8h-source.html#l00063">NtpSREvent::stp</a>, and <a class="el" href="NtpSRStrip_8h-source.html#l00051">NtpSRStrip::strip</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02450">SigInOut()</a>.
<p>
<div class="fragment"><pre>02407                                                                 {
02408   <span class="comment">// compute the amount of signal in the partially instrumented region</span>
02409   <span class="comment">// and the amount in the fully instrumented region</span>
02410   <span class="comment">//</span>
02411   <span class="comment">// this region is defined as:</span>
02412   <span class="comment">// v planes: (strip&lt;=4 || strip&gt;=67)</span>
02413   <span class="comment">// partial u: (strip==0 || strip=63)</span>
02414   <span class="comment">// full u: (strip&lt;=26 || strip&gt;=88) </span>
02415 
02416   sigfull=sigpart=0;
02417  
02418   <span class="comment">// loop over all strips in the event</span>
02419   <span class="comment">// and sum the signals in the partial and full regions</span>
02420   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o4">nstrip</a>; i++){
02421     <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(<a class="code" href="classMadBase.html#p13">ntpEvent</a>-&gt;<a class="code" href="classNtpSREvent.html#o5">stp</a>[i])) <span class="keywordflow">continue</span>;
02422     Int_t pr = <a class="code" href="classMadTVAnalysis.html#e2">InPartialRegion</a>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>, <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o4">strip</a>);
02423     <span class="keywordflow">if</span>(pr==1){
02424       sigpart+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a> + <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02425     }
02426     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pr==-1){
02427       sigfull+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a> + <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02428     }
02429   }
02430   
02431   <span class="comment">// loop over those strips in the primary track</span>
02432 
02433   trkfull=trkpart=0;
02434 
02435   <span class="keywordflow">if</span>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>){
02436     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o4">nstrip</a>; i++){
02437       <span class="keywordflow">if</span>(!<a class="code" href="classMadBase.html#b6">LoadStrip</a>(<a class="code" href="classMadBase.html#p14">ntpTrack</a>-&gt;<a class="code" href="classNtpSRTrack.html#o5">stp</a>[i])) <span class="keywordflow">continue</span>;
02438       Int_t pr = <a class="code" href="classMadTVAnalysis.html#e2">InPartialRegion</a>(<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o5">plane</a>, <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o4">strip</a>);
02439       <span class="keywordflow">if</span>(pr==1){
02440         trkpart+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a> + <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02441       }
02442       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pr==-1){
02443         trkfull+=<a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o12">ph0</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a> + <a class="code" href="classMadBase.html#p19">ntpStrip</a>-&gt;<a class="code" href="classNtpSRStrip.html#o13">ph1</a>.<a class="code" href="classNtpSRPulseHeight.html#o2">sigcor</a>;
02444       }
02445     }
02446   }
02447   
02448 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="o3" doxytag="MadTVAnalysis::abid" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classMadAbID.html">MadAbID</a> <a class="el" href="classMadTVAnalysis.html#o3">MadTVAnalysis::abid</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00080">80</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o1" doxytag="MadTVAnalysis::dpid" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classMadDpID.html">MadDpID</a> <a class="el" href="classMadTVAnalysis.html#o1">MadTVAnalysis::dpid</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00078">78</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="MadTVAnalysis::fBECConfig" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classRegistry.html">Registry</a> <a class="el" href="classMadTVAnalysis.html#r0">MadTVAnalysis::fBECConfig</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00167">167</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00113">GetBECRegistry()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00060">MadTVAnalysis()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02458">SetBECFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="MadTVAnalysis::fDataUseMCBeam" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool <a class="el" href="classMadTVAnalysis.html#r2">MadTVAnalysis::fDataUseMCBeam</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00169">169</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00060">MadTVAnalysis()</a>, and <a class="el" href="MadTVAnalysis_8h-source.html#l00065">SetDataUseMCBeam()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v7" doxytag="MadTVAnalysis::fEarlyActivityWindowSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Double_t <a class="el" href="classMadTVAnalysis.html#v7">MadTVAnalysis::fEarlyActivityWindowSize</a> = 10.<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00055">55</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02800">EarlyActivity()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v10" doxytag="MadTVAnalysis::fEarlyPlaneSphere" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Double_t <a class="el" href="classMadTVAnalysis.html#v10">MadTVAnalysis::fEarlyPlaneSphere</a> = 0.5<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00058">58</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02800">EarlyActivity()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="MadTVAnalysis::fMCBeam" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="namespaceBeamType.html#a0">BeamType::BeamType_t</a> <a class="el" href="classMadTVAnalysis.html#r1">MadTVAnalysis::fMCBeam</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00168">168</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00063">ForceMCBeam()</a>, <a class="el" href="MadTVAnalysis_8h-source.html#l00064">GetForcedMCBeam()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l00060">MadTVAnalysis()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v9" doxytag="MadTVAnalysis::fNPlaneEarlyAct" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Int_t <a class="el" href="classMadTVAnalysis.html#v9">MadTVAnalysis::fNPlaneEarlyAct</a> = 30<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00057">57</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02800">EarlyActivity()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v8" doxytag="MadTVAnalysis::fPMTTimeConstant" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Double_t <a class="el" href="classMadTVAnalysis.html#v8">MadTVAnalysis::fPMTTimeConstant</a> = 700.<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00056">56</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02800">EarlyActivity()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v2" doxytag="MadTVAnalysis::kCalorEndZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v2">MadTVAnalysis::kCalorEndZ</a> = 7.1554<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00044">44</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v3" doxytag="MadTVAnalysis::kHalfCalorEndZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v3">MadTVAnalysis::kHalfCalorEndZ</a> = <a class="el" href="classMadTVAnalysis.html#v1">kTargEndZ</a>+(<a class="el" href="classMadTVAnalysis.html#v2">kCalorEndZ</a>-<a class="el" href="classMadTVAnalysis.html#v1">kTargEndZ</a>)*0.5<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00045">45</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v4" doxytag="MadTVAnalysis::kSpecEndZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v4">MadTVAnalysis::kSpecEndZ</a> = 16.656<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00046">46</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v1" doxytag="MadTVAnalysis::kTargEndZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v1">MadTVAnalysis::kTargEndZ</a> = 3.5914<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00043">43</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">NDRadialFidVol()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v0" doxytag="MadTVAnalysis::kVetoEndZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v0">MadTVAnalysis::kVetoEndZ</a> = 1.2154<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00042">42</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">NDRadialFidVol()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v5" doxytag="MadTVAnalysis::kXcenter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v5">MadTVAnalysis::kXcenter</a> = 1.4828<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00051">51</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02068">InFidVol()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">NDRadialFidVol()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="v6" doxytag="MadTVAnalysis::kYcenter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const Float_t <a class="el" href="classMadTVAnalysis.html#v6">MadTVAnalysis::kYcenter</a> = 0.2384<code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8cxx-source.html#l00052">52</a> of file <a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l02068">InFidVol()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l02262">NDRadialFidVol()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o0" doxytag="MadTVAnalysis::nsid" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classMadNsID.html">MadNsID</a> <a class="el" href="classMadTVAnalysis.html#o0">MadTVAnalysis::nsid</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00077">77</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o4" doxytag="MadTVAnalysis::openedabpidfile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool <a class="el" href="classMadTVAnalysis.html#o4">MadTVAnalysis::openedabpidfile</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00081">81</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l00060">MadTVAnalysis()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="MadTVAnalysis::phnti" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classAnp_1_1Interface.html">Anp::Interface</a>* <a class="el" href="classMadTVAnalysis.html#r3">MadTVAnalysis::phnti</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00171">171</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, <a class="el" href="MadTVAnalysis_8cxx-source.html#l00060">MadTVAnalysis()</a>, and <a class="el" href="MadTVAnalysis_8cxx-source.html#l00129">~MadTVAnalysis()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o2" doxytag="MadTVAnalysis::qeid" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classMadQEID.html">MadQEID</a> <a class="el" href="classMadTVAnalysis.html#o2">MadTVAnalysis::qeid</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00079">79</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r6" doxytag="MadTVAnalysis::rustemconfigfile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> string <a class="el" href="classMadTVAnalysis.html#r6">MadTVAnalysis::rustemconfigfile</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00174">174</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8h-source.html#l00073">SetRustemConfig()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="MadTVAnalysis::rustempidfile_far" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> string <a class="el" href="classMadTVAnalysis.html#r5">MadTVAnalysis::rustempidfile_far</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00173">173</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8h-source.html#l00072">SetRustemFarPID()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="MadTVAnalysis::rustempidfile_near" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> string <a class="el" href="classMadTVAnalysis.html#r4">MadTVAnalysis::rustempidfile_near</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="MadTVAnalysis_8h-source.html#l00172">172</a> of file <a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a>.
<p>
Referenced by <a class="el" href="MadTVAnalysis_8cxx-source.html#l00137">CreatePAN()</a>, and <a class="el" href="MadTVAnalysis_8h-source.html#l00071">SetRustemNearPID()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="MadTVAnalysis_8h-source.html">MadTVAnalysis.h</a><li><a class="el" href="MadTVAnalysis_8cxx-source.html">MadTVAnalysis.cxx</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Feb 16 04:56:01 2009 for loon by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
